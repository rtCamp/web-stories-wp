/*! For license information please see vendors~chunk-react-moveable.079fd501.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{1759:function(module,__webpack_exports__,__webpack_require__){"use strict";function some(arr,callback){for(var length=arr.length,i=0;i<length;++i)if(callback(arr[i],i))return!0;return!1}function find(arr,callback){for(var length=arr.length,i=0;i<length;++i)if(callback(arr[i],i))return arr[i];return null}function execRegExp(pattern,text){try{return new RegExp(pattern,"g").exec(text)}catch(e){return null}}function hasUserAgentData(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var userAgentData=navigator.userAgentData,brands=userAgentData.brands||userAgentData.uaList;return!(!brands||!brands.length)}function convertVersion(text){return text.replace(/_/g,".")}function findPreset(presets,userAgent){var userPreset=null,version="-1";return some(presets,(function(preset){var result=execRegExp("("+preset.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",userAgent);return!(!result||preset.brand)&&(userPreset=preset,version=result[3]||"-1",preset.versionAlias?version=preset.versionAlias:preset.versionTest&&(version=function findVersion(versionTest,userAgent){var result=execRegExp("("+versionTest+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",userAgent);return result?result[3]:""}(preset.versionTest.toLowerCase(),userAgent)||version),version=convertVersion(version),!0)})),{preset:userPreset,version:version}}function findBrand(brands,preset){return find(brands,(function(_a){var brand=_a.brand;return execRegExp(""+preset.test,brand.toLowerCase())}))}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Clippable",(function(){return Clippable})),__webpack_require__.d(__webpack_exports__,"Draggable",(function(){return Draggable})),__webpack_require__.d(__webpack_exports__,"EdgeDraggable",(function(){return edgeDraggable})),__webpack_require__.d(__webpack_exports__,"InitialMoveable",(function(){return moveable_esm_InitialMoveable})),__webpack_require__.d(__webpack_exports__,"MOVEABLE_ABLES",(function(){return MOVEABLE_ABLES})),__webpack_require__.d(__webpack_exports__,"MOVEABLE_EVENTS",(function(){return MOVEABLE_EVENTS})),__webpack_require__.d(__webpack_exports__,"MOVEABLE_EVENTS_MAP",(function(){return MOVEABLE_EVENTS_MAP})),__webpack_require__.d(__webpack_exports__,"MOVEABLE_EVENTS_PROPS_MAP",(function(){return MOVEABLE_EVENTS_PROPS_MAP})),__webpack_require__.d(__webpack_exports__,"MOVEABLE_METHODS",(function(){return MOVEABLE_METHODS})),__webpack_require__.d(__webpack_exports__,"MOVEABLE_PROPS",(function(){return MOVEABLE_PROPS})),__webpack_require__.d(__webpack_exports__,"MOVEABLE_PROPS_MAP",(function(){return MOVEABLE_PROPS_MAP})),__webpack_require__.d(__webpack_exports__,"Pinchable",(function(){return Pinchable})),__webpack_require__.d(__webpack_exports__,"Resizable",(function(){return Resizable})),__webpack_require__.d(__webpack_exports__,"Rotatable",(function(){return Rotatable})),__webpack_require__.d(__webpack_exports__,"Roundable",(function(){return Roundable})),__webpack_require__.d(__webpack_exports__,"Scalable",(function(){return Scalable})),__webpack_require__.d(__webpack_exports__,"Snappable",(function(){return Snappable})),__webpack_require__.d(__webpack_exports__,"Warpable",(function(){return Warpable})),__webpack_require__.d(__webpack_exports__,"getElementInfo",(function(){return getElementInfo})),__webpack_require__.d(__webpack_exports__,"makeAble",(function(){return makeAble})),__webpack_require__.d(__webpack_exports__,"makeMoveable",(function(){return makeMoveable}));var BROWSER_PRESETS=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],CHROMIUM_PRESETS=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",brand:!0}],WEBKIT_PRESETS=[{test:"applewebkit",id:"webkit"}],WEBVIEW_PRESETS=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],OS_PRESETS=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function parseUserAgentData(osData){var userAgentData=navigator.userAgentData,brands=(userAgentData.uaList||userAgentData.brands).slice(),isMobile=userAgentData.mobile||!1,firstBrand=brands[0],browser={name:firstBrand.brand,version:firstBrand.version,majorVersion:-1,webkit:!1,webview:some(WEBVIEW_PRESETS,(function(preset){return findBrand(brands,preset)})),chromium:some(CHROMIUM_PRESETS,(function(preset){return findBrand(brands,preset)}))},os={name:"unknown",version:"-1",majorVersion:-1};if(browser.webkit=!browser.chromium&&some(WEBKIT_PRESETS,(function(preset){return findBrand(brands,preset)})),osData){var platform_1=osData.platform.toLowerCase(),result=find(OS_PRESETS,(function(preset){return new RegExp(""+preset.test,"g").exec(platform_1)}));os.name=result?result.id:platform_1,os.version=osData.platformVersion}return some(BROWSER_PRESETS,(function(preset){var result=findBrand(brands,preset);return!!result&&(browser.name=preset.id,browser.version=osData?osData.uaFullVersion:result.version,!0)})),"Linux armv8l"===navigator.platform?os.name="android":browser.webkit&&(os.name=isMobile?"ios":"mac"),"ios"===os.name&&browser.webview&&(browser.version="-1"),os.version=convertVersion(os.version),browser.version=convertVersion(browser.version),os.majorVersion=parseInt(os.version,10),browser.majorVersion=parseInt(browser.version,10),{browser:browser,os:os,isMobile:isMobile,isHints:!0}}function parseUserAgent(userAgent){var nextAgent=function getUserAgent(agent){var userAgent=agent;if(void 0===userAgent){if("undefined"==typeof navigator||!navigator)return"";userAgent=navigator.userAgent||""}return userAgent.toLowerCase()}(userAgent),isMobile=!!/mobi/g.exec(nextAgent),browser={name:"unknown",version:"-1",majorVersion:-1,webview:!!findPreset(WEBVIEW_PRESETS,nextAgent).preset,chromium:!!findPreset(CHROMIUM_PRESETS,nextAgent).preset,webkit:!1},os={name:"unknown",version:"-1",majorVersion:-1},_a=findPreset(BROWSER_PRESETS,nextAgent),browserPreset=_a.preset,browserVersion=_a.version,_b=findPreset(OS_PRESETS,nextAgent),osPreset=_b.preset,osVersion=_b.version;return browser.webkit=!browser.chromium&&!!findPreset(WEBKIT_PRESETS,nextAgent).preset,osPreset&&(os.name=osPreset.id,os.version=osVersion,os.majorVersion=parseInt(osVersion,10)),browserPreset&&(browser.name=browserPreset.id,browser.version=browserVersion,browser.webview&&"ios"===os.name&&"safari"!==browser.name&&(browser.webview=!1)),browser.majorVersion=parseInt(browser.version,10),{browser:browser,os:os,isMobile:isMobile,isHints:!1}}function agent(userAgent){return void 0===userAgent&&hasUserAgentData()?parseUserAgentData():parseUserAgent(userAgent)}var agent_esm=agent;function prefixNames(prefix){for(var classNames=[],_i=1;_i<arguments.length;_i++)classNames[_i-1]=arguments[_i];return classNames.map((function(className){return className.split(" ").map((function(name){return name?""+prefix+name:""})).join(" ")})).join(" ")}function ref(target,name){return function(e){e&&(target[name]=e)}}function refs(target,name,i){return function(e){e&&(target[name][i]=e)}}"undefined"!=typeof document&&document;var OPEN_CLOSED_CHARACTER=['"',"'",'\\"',"\\'"],DEFAULT_UNIT_PRESETS={cm:function(pos){return 96*pos/2.54},mm:function(pos){return 96*pos/254},in:function(pos){return 96*pos},pt:function(pos){return 96*pos/72},pc:function(pos){return 96*pos/6},"%":function(pos,size){return pos*size/100},vw:function(pos,size){return void 0===size&&(size=window.innerWidth),pos/100*size},vh:function(pos,size){return void 0===size&&(size=window.innerHeight),pos/100*size},vmax:function(pos,size){return void 0===size&&(size=Math.max(window.innerWidth,window.innerHeight)),pos/100*size},vmin:function(pos,size){return void 0===size&&(size=Math.min(window.innerWidth,window.innerHeight)),pos/100*size}};function isUndefined(value){return void 0===value}function isObject(value){return value&&"object"==typeof value}function isArray(value){return Array.isArray(value)}function isString(value){return"string"==typeof value}function isFunction(value){return"function"==typeof value}function findClosed(closedCharacter,texts,index,length){for(var i=index;i<length;++i){var character=texts[i].trim();if(character===closedCharacter)return i;var nextIndex=i;if("("===character?nextIndex=findClosed(")",texts,i+1,length):OPEN_CLOSED_CHARACTER.indexOf(character)>-1&&(nextIndex=findClosed(character,texts,i+1,length)),-1===nextIndex)break;i=nextIndex}return-1}function splitText(text,separator){for(var regex=new RegExp("(\\s*"+(separator||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),texts=text.split(regex).filter(Boolean),length=texts.length,values=[],tempValues=[],i=0;i<length;++i){var character=texts[i].trim(),nextIndex=i;if("("===character)nextIndex=findClosed(")",texts,i+1,length);else{if(")"===character)throw new Error("invalid format");if(OPEN_CLOSED_CHARACTER.indexOf(character)>-1)nextIndex=findClosed(character,texts,i+1,length);else if(character===separator){tempValues.length&&(values.push(tempValues.join("")),tempValues=[]);continue}}-1===nextIndex&&(nextIndex=length-1),tempValues.push(texts.slice(i,nextIndex+1).join("")),i=nextIndex}return tempValues.length&&values.push(tempValues.join("")),values}function splitSpace(text){return splitText(text,"")}function splitComma(text){return splitText(text,",")}function splitBracket(text){var matches=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(text);return!matches||matches.length<4?{}:{prefix:matches[1],value:matches[2],suffix:matches[3]}}function splitUnit(text){var matches=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(text);if(!matches)return{prefix:"",unit:"",value:NaN};var prefix=matches[1],value=matches[2];return{prefix:prefix,unit:matches[3],value:parseFloat(value)}}function now(){return Date.now?Date.now():(new Date).getTime()}function findIndex(arr,callback,defaultIndex){void 0===defaultIndex&&(defaultIndex=-1);for(var length=arr.length,i=0;i<length;++i)if(callback(arr[i],i,arr))return i;return defaultIndex}function getKeys(obj){if(Object.keys)return Object.keys(obj);var keys=[];for(var name in keys)keys.push(name);return keys}function convertUnitSize(pos,size){var _a=splitUnit(pos),value=_a.value,unit=_a.unit;if(isObject(size)){var sizeFunction=size[unit];if(sizeFunction){if(isFunction(sizeFunction))return sizeFunction(value);if(DEFAULT_UNIT_PRESETS[unit])return DEFAULT_UNIT_PRESETS[unit](value,sizeFunction)}}else if("%"===unit)return value*size/100;return DEFAULT_UNIT_PRESETS[unit]?DEFAULT_UNIT_PRESETS[unit](value):value}function throttle(num,unit){return unit?Math.round(num/unit)*unit:num}function checkBoundSize(targetSize,compareSize,isMax){return[[throttle(compareSize[0],1e-7),throttle(compareSize[0]*targetSize[1]/targetSize[0],1e-7)],[throttle(compareSize[1]*targetSize[0]/targetSize[1],1e-7),throttle(compareSize[1],1e-7)]].filter((function(size){return size.every((function(value,i){return isMax?value<=compareSize[i]:value>=compareSize[i]}))}))[0]||targetSize}function calculateBoundSize(size,minSize,maxSize,keepRatio){if(!keepRatio)return size.map((function(value,i){return function between(value,min,max){return Math.max(min,Math.min(value,max))}(value,minSize[i],maxSize[i])}));var width=size[0],height=size[1],_a=checkBoundSize(size,minSize,!1),minWidth=_a[0],minHeight=_a[1],_b=checkBoundSize(size,maxSize,!0),maxWidth=_b[0],maxHeight=_b[1];return width<minWidth||height<minHeight?(width=minWidth,height=minHeight):(width>maxWidth||height>maxHeight)&&(width=maxWidth,height=maxHeight),[width,height]}function average(nums){for(var length=nums.length,total=0,i=length-1;i>=0;--i)total+=nums[i];return length?total/length:0}function getRad(pos1,pos2){var distX=pos2[0]-pos1[0],distY=pos2[1]-pos1[1],rad=Math.atan2(distY,distX);return rad>=0?rad:rad+2*Math.PI}function getShapeDirection(points){var center=function getCenterPoint(points){return[0,1].map((function(i){return average(points.map((function(pos){return pos[i]})))}))}(points),pos1Rad=getRad(center,points[0]),pos2Rad=getRad(center,points[1]);return pos1Rad<pos2Rad&&pos2Rad-pos1Rad<Math.PI||pos1Rad>pos2Rad&&pos2Rad-pos1Rad<-Math.PI?1:-1}function getDist(a,b){return Math.sqrt(Math.pow((b?b[0]:0)-a[0],2)+Math.pow((b?b[1]:0)-a[1],2))}function hasClass(element,className){return element.classList?element.classList.contains(className):!!element.className.match(new RegExp("(\\s|^)"+className+"(\\s|$)"))}function addEvent(el,type,listener,options){el.addEventListener(type,listener,options)}function removeEvent(el,type,listener){el.removeEventListener(type,listener)}function add(matrix,inverseMatrix,startIndex,fromIndex,n,k){for(var i=0;i<n;++i){var x=startIndex+i*n,fromX=fromIndex+i*n;matrix[x]+=matrix[fromX]*k,inverseMatrix[x]+=inverseMatrix[fromX]*k}}function swap(matrix,inverseMatrix,startIndex,fromIndex,n){for(var i=0;i<n;++i){var x=startIndex+i*n,fromX=fromIndex+i*n,v=matrix[x],iv=inverseMatrix[x];matrix[x]=matrix[fromX],matrix[fromX]=v,inverseMatrix[x]=inverseMatrix[fromX],inverseMatrix[fromX]=iv}}function divide(matrix,inverseMatrix,startIndex,n,k){for(var i=0;i<n;++i){var x=startIndex+i*n;matrix[x]/=k,inverseMatrix[x]/=k}}function ignoreDimension(matrix,m,n){void 0===n&&(n=Math.sqrt(matrix.length));for(var newMatrix=matrix.slice(),i=0;i<n;++i)newMatrix[i*n+m-1]=0,newMatrix[(m-1)*n+i]=0;return newMatrix[(m-1)*(n+1)]=1,newMatrix}function invert(matrix,n){void 0===n&&(n=Math.sqrt(matrix.length));for(var newMatrix=matrix.slice(),inverseMatrix=createIdentityMatrix(n),i=0;i<n;++i){var identityIndex=n*i+i;if(!throttle(newMatrix[identityIndex],1e-7))for(var j=i+1;j<n;++j)if(newMatrix[n*i+j]){swap(newMatrix,inverseMatrix,i,j,n);break}if(!throttle(newMatrix[identityIndex],1e-7))return[];divide(newMatrix,inverseMatrix,i,n,newMatrix[identityIndex]);for(j=0;j<n;++j){var targetStartIndex=j,target=newMatrix[j+i*n];throttle(target,1e-7)&&i!==j&&add(newMatrix,inverseMatrix,targetStartIndex,i,n,-target)}}return inverseMatrix}function convertPositionMatrix(matrix,n){for(var newMatrix=matrix.slice(),i=matrix.length;i<n-1;++i)newMatrix[i]=0;return newMatrix[n-1]=1,newMatrix}function convertDimension(matrix,n,m){if(void 0===n&&(n=Math.sqrt(matrix.length)),n===m)return matrix;for(var newMatrix=createIdentityMatrix(m),length=Math.min(n,m),i=0;i<length-1;++i){for(var j=0;j<length-1;++j)newMatrix[i*m+j]=matrix[i*n+j];newMatrix[(i+1)*m-1]=matrix[(i+1)*n-1],newMatrix[(m-1)*m+i]=matrix[(n-1)*n+i]}return newMatrix[m*m-1]=matrix[n*n-1],newMatrix}function multiplies(n){for(var matrixes=[],_i=1;_i<arguments.length;_i++)matrixes[_i-1]=arguments[_i];var m=createIdentityMatrix(n);return matrixes.forEach((function(matrix){m=multiply(m,matrix,n)})),m}function multiply(matrix,matrix2,n){void 0===n&&(n=Math.sqrt(matrix.length));var newMatrix=[],m=matrix.length/n,k=matrix2.length/m;if(!m)return matrix2;if(!k)return matrix;for(var i=0;i<n;++i)for(var j=0;j<k;++j){newMatrix[j*n+i]=0;for(var l=0;l<m;++l)newMatrix[j*n+i]+=matrix[l*n+i]*matrix2[j*m+l]}return newMatrix}function plus(pos1,pos2){for(var length=Math.min(pos1.length,pos2.length),nextPos=pos1.slice(),i=0;i<length;++i)nextPos[i]=nextPos[i]+pos2[i];return nextPos}function minus(pos1,pos2){for(var length=Math.min(pos1.length,pos2.length),nextPos=pos1.slice(),i=0;i<length;++i)nextPos[i]=nextPos[i]-pos2[i];return nextPos}function convertMatrixtoCSS(a,is2d){return void 0===is2d&&(is2d=9===a.length),is2d?[a[0],a[1],a[3],a[4],a[6],a[7]]:a}function calculate(matrix,matrix2,n){void 0===n&&(n=matrix2.length);var result=multiply(matrix,matrix2,n),k=result[n-1];return result.map((function(v){return v/k}))}function rotateX3d(matrix,rad){return multiply(matrix,[1,0,0,0,0,Math.cos(rad),Math.sin(rad),0,0,-Math.sin(rad),Math.cos(rad),0,0,0,0,1],4)}function rotateY3d(matrix,rad){return multiply(matrix,[Math.cos(rad),0,-Math.sin(rad),0,0,1,0,0,Math.sin(rad),0,Math.cos(rad),0,0,0,0,1],4)}function rotateZ3d(matrix,rad){return multiply(matrix,createRotateMatrix(rad,4))}function scale3d(matrix,_a){var _b=_a[0],sx=void 0===_b?1:_b,_c=_a[1],sy=void 0===_c?1:_c,_d=_a[2];return multiply(matrix,[sx,0,0,0,0,sy,0,0,0,0,void 0===_d?1:_d,0,0,0,0,1],4)}function matrix_esm_rotate(pos,rad){return calculate(createRotateMatrix(rad,3),convertPositionMatrix(pos,3))}function translate3d(matrix,_a){var _b=_a[0],tx=void 0===_b?0:_b,_c=_a[1],ty=void 0===_c?0:_c,_d=_a[2];return multiply(matrix,[1,0,0,0,0,1,0,0,0,0,1,0,tx,ty,void 0===_d?0:_d,1],4)}function matrix3d(matrix1,matrix2){return multiply(matrix1,matrix2,4)}function createRotateMatrix(rad,n){var cos=Math.cos(rad),sin=Math.sin(rad),m=createIdentityMatrix(n);return m[0]=cos,m[1]=sin,m[n]=-sin,m[n+1]=cos,m}function createIdentityMatrix(n){for(var length=n*n,matrix=[],i=0;i<length;++i)matrix[i]=i%(n+1)?0:1;return matrix}function createScaleMatrix(scale,n){for(var m=createIdentityMatrix(n),length=Math.min(scale.length,n-1),i=0;i<length;++i)m[(n+1)*i]=scale[i];return m}function createOriginMatrix(origin,n){for(var m=createIdentityMatrix(n),length=Math.min(origin.length,n-1),i=0;i<length;++i)m[n*(n-1)+i]=origin[i];return m}function createWarpMatrix(pos0,pos1,pos2,pos3,nextPos0,nextPos1,nextPos2,nextPos3){var x0=pos0[0],y0=pos0[1],x1=pos1[0],y1=pos1[1],x2=pos2[0],y2=pos2[1],x3=pos3[0],y3=pos3[1],u0=nextPos0[0],v0=nextPos0[1],u1=nextPos1[0],v1=nextPos1[1],u2=nextPos2[0],v2=nextPos2[1],u3=nextPos3[0],v3=nextPos3[1],inverseMatrix=invert([x0,0,x1,0,x2,0,x3,0,y0,0,y1,0,y2,0,y3,0,1,0,1,0,1,0,1,0,0,x0,0,x1,0,x2,0,x3,0,y0,0,y1,0,y2,0,y3,0,1,0,1,0,1,0,1,-u0*x0,-v0*x0,-u1*x1,-v1*x1,-u2*x2,-v2*x2,-u3*x3,-v3*x3,-u0*y0,-v0*y0,-u1*y1,-v1*y1,-u2*y2,-v2*y2,-u3*y3,-v3*y3],8);if(!inverseMatrix.length)return[];var h=multiply(inverseMatrix,[u0,v0,u1,v1,u2,v2,u3,v3],8);return h[8]=1,convertDimension(function transpose(matrix,n){void 0===n&&(n=Math.sqrt(matrix.length));for(var newMatrix=[],i=0;i<n;++i)for(var j=0;j<n;++j)newMatrix[j*n+i]=matrix[n*i+j];return newMatrix}(h),3,4)}function parseMat(transform){return toMat(parse(transform))}function toMat(matrixInfos){var target=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return matrixInfos.forEach((function(info){var matrixFunction=info.matrixFunction,functionValue=info.functionValue;matrixFunction&&(target=matrixFunction(target,functionValue))})),target}function parse(transform){return(isArray(transform)?transform:splitSpace(transform)).map((function(t){var _a=splitBracket(t),name=_a.prefix,value=_a.value,matrixFunction=null,functionName=name,functionValue="";if("translate"===name||"translateX"===name||"translate3d"===name){var _b=splitComma(value).map((function(v){return parseFloat(v)})),posX=_b[0],_c=_b[1],posY=void 0===_c?0:_c,_d=_b[2];matrixFunction=translate3d,functionValue=[posX,posY,void 0===_d?0:_d]}else if("translateY"===name){matrixFunction=translate3d,functionValue=[0,posY=parseFloat(value),0]}else if("translateZ"===name){matrixFunction=translate3d,functionValue=[0,0,parseFloat(value)]}else if("scale"===name||"scale3d"===name){var _e=splitComma(value).map((function(v){return parseFloat(v)})),sx=_e[0],_f=_e[1],sy=void 0===_f?sx:_f,_g=_e[2];matrixFunction=scale3d,functionValue=[sx,sy,void 0===_g?1:_g]}else if("scaleX"===name){matrixFunction=scale3d,functionValue=[sx=parseFloat(value),1,1]}else if("scaleY"===name){matrixFunction=scale3d,functionValue=[1,sy=parseFloat(value),1]}else if("scaleZ"===name){matrixFunction=scale3d,functionValue=[1,1,parseFloat(value)]}else if("rotate"===name||"rotateZ"===name||"rotateX"===name||"rotateY"===name){var _h=splitUnit(value),unit=_h.unit,unitValue=_h.value;"rotate"===name||"rotateZ"===name?(functionName="rotateZ",matrixFunction=rotateZ3d):"rotateX"===name?matrixFunction=rotateX3d:"rotateY"===name&&(matrixFunction=rotateY3d),functionValue="rad"===unit?unitValue:unitValue*Math.PI/180}else if("matrix3d"===name)matrixFunction=matrix3d,functionValue=splitComma(value).map((function(v){return parseFloat(v)}));else if("matrix"===name){var m=splitComma(value).map((function(v){return parseFloat(v)}));matrixFunction=matrix3d,functionValue=[m[0],m[1],0,0,m[2],m[3],0,0,0,0,1,0,m[4],m[5],0,1]}else functionName="";return{name:name,functionName:functionName,value:value,matrixFunction:matrixFunction,functionValue:functionValue}}))}function getAreaSize(points){return points.length<3?0:Math.abs(function sum(nums){for(var total=0,i=nums.length-1;i>=0;--i)total+=nums[i];return total}(points.map((function(point,i){var nextPoint=points[i+1]||points[0];return point[0]*nextPoint[1]-nextPoint[0]*point[1]}))))/2}function fitPoints(points,rect){var width=rect.width,height=rect.height,left=rect.left,top=rect.top,_a=getMinMaxs(points),minX=_a.minX,minY=_a.minY,maxX=_a.maxX,maxY=_a.maxY,ratioX=width/(maxX-minX),ratioY=height/(maxY-minY);return points.map((function(point){return[left+(point[0]-minX)*ratioX,top+(point[1]-minY)*ratioY]}))}function getMinMaxs(points){var xs=points.map((function(point){return point[0]})),ys=points.map((function(point){return point[1]}));return{minX:Math.min.apply(Math,xs),minY:Math.min.apply(Math,ys),maxX:Math.max.apply(Math,xs),maxY:Math.max.apply(Math,ys)}}function isInside(pos,points,excludeLine){var x=pos[0],y=pos[1],_a=getMinMaxs(points),minX=_a.minX,minY=_a.minY,maxX=_a.maxX,maxY=_a.maxY,xLine=[[minX,y],[maxX,y]],yLine=[[x,minY],[x,maxY]],xLinearConstants=getLinearConstants(xLine[0],xLine[1]),yLinearConstants=getLinearConstants(yLine[0],yLine[1]),lines=convertLines(points),intersectionXPoints=[],intersectionYPoints=[];return lines.forEach((function(line){var linearConstants=getLinearConstants(line[0],line[1]),xPoints=getPointsOnLines(getIntersectionPointsByConstants(xLinearConstants,linearConstants),[xLine,line]),yPoints=getPointsOnLines(getIntersectionPointsByConstants(yLinearConstants,linearConstants),[yLine,line]);1===xPoints.length&&line[0][1]===y||intersectionXPoints.push.apply(intersectionXPoints,xPoints),1===yPoints.length&&line[0][0]===x||intersectionYPoints.push.apply(intersectionYPoints,yPoints),linearConstants[0]||intersectionXPoints.push.apply(intersectionXPoints,xPoints),linearConstants[1]||intersectionYPoints.push.apply(intersectionYPoints,yPoints)})),!excludeLine&&(findIndex(intersectionXPoints,(function(p){return p[0]===x}))>-1||findIndex(intersectionYPoints,(function(p){return p[1]===y}))>-1)||!!(intersectionXPoints.filter((function(p){return p[0]>x})).length%2&&intersectionYPoints.filter((function(p){return p[1]>y})).length%2)}function getLinearConstants(point1,point2){var x1=point1[0],y1=point1[1],x2=point2[0],y2=point2[1];if(x1===x2&&y1===y2)return[0,0,0];if(x1===x2)return[1,0,-x1];if(y1===y2)return[0,1,-y1];var a_1=(x2-x1)/(y1-y2);return[1,a_1,-x1-a_1*y1]}function getIntersectionPointsByConstants(linearConstants1,linearConstants2){var x,y,a1=linearConstants1[0],b1=linearConstants1[1],c1=linearConstants1[2],a2=linearConstants2[0],b2=linearConstants2[1],c2=linearConstants2[2],isZeroA=0===a1&&0===a2,isZeroB=0===b1&&0===b2;if(isZeroA&&isZeroB)return[];if(isZeroA){var y1=-c1/b1;return y1!==-c2/b2?[]:[[-1/0,y1],[1/0,y1]]}if(isZeroB){var x1=-c1/a1;return x1!==-c2/a2?[]:[[x1,-1/0],[x1,1/0]]}return 0===a1?[[x=-(b2*(y=-c1/b1)+c2)/a2,y]]:0===a2?[[x=-(b1*(y=-c2/b2)+c1)/a1,y]]:0===b1?[[x=-c1/a1,y=-(a2*x+c2)/b2]]:0===b2?[[x=-c2/a2,y=-(a1*x+c1)/b1]]:[[x=(b1*c2-b2*c1)/(b2*a1-b1*a2),y=-(a1*x+c1)/b1]]}function getPointsOnLines(points,lines){var minMaxs=lines.map((function(line){return[0,1].map((function(order){return[Math.min(line[0][order],line[1][order]),Math.max(line[0][order],line[1][order])]}))}));if(2===points.length){var _a=points[0],x=_a[0],y=_a[1];if(x===points[1][0]){var top=Math.max.apply(Math,minMaxs.map((function(minMax){return minMax[1][0]}))),bottom=Math.min.apply(Math,minMaxs.map((function(minMax){return minMax[1][1]})));return top>bottom?[]:[[x,top],[x,bottom]]}if(y===points[1][1]){var left=Math.max.apply(Math,minMaxs.map((function(minMax){return minMax[0][0]}))),right=Math.min.apply(Math,minMaxs.map((function(minMax){return minMax[0][1]})));return left>right?[]:[[left,y],[right,y]]}}return points.filter((function(point){return minMaxs.every((function(minMax){return minMax[0][0]<=point[0]&&point[0]<=minMax[0][1]&&minMax[1][0]<=point[1]&&point[1]<=minMax[1][1]}))}))}function convertLines(points){return function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}(points.slice(1),[points[0]]).map((function(point,i){return[points[i],point]}))}function getOverlapSize(points1,points2){return getAreaSize(function getOverlapPoints(points1,points2){var targetPoints1=points1.slice(),targetPoints2=points2.slice();-1===getShapeDirection(targetPoints1)&&targetPoints1.reverse(),-1===getShapeDirection(targetPoints2)&&targetPoints2.reverse();var lines1=convertLines(targetPoints1),lines2=convertLines(targetPoints2),linearConstantss1=lines1.map((function(line1){return getLinearConstants(line1[0],line1[1])})),linearConstantss2=lines2.map((function(line2){return getLinearConstants(line2[0],line2[1])})),overlapInfos=[];linearConstantss1.forEach((function(linearConstants1,i){var line1=lines1[i],linePointInfos=[];linearConstantss2.forEach((function(linearConstants2,j){var points=getPointsOnLines(getIntersectionPointsByConstants(linearConstants1,linearConstants2),[line1,lines2[j]]);linePointInfos.push.apply(linePointInfos,points.map((function(pos){return{index1:i,index2:j,pos:pos}})))})),linePointInfos.sort((function(a,b){return getDist(line1[0],a.pos)-getDist(line1[0],b.pos)})),overlapInfos.push.apply(overlapInfos,linePointInfos),isInside(line1[1],targetPoints2)&&overlapInfos.push({index1:i,index2:-1,pos:line1[1]})})),lines2.forEach((function(line2,i){if(isInside(line2[1],targetPoints1)){var isNext_1=!1,index=findIndex(overlapInfos,(function(_a){return _a.index2===i?(isNext_1=!0,!1):!!isNext_1}));-1===index&&(isNext_1=!1,index=findIndex(overlapInfos,(function(_a){var index1=_a.index1,index2=_a.index2;return-1===index1&&index2+1===i?(isNext_1=!0,!1):!!isNext_1}))),-1===index?overlapInfos.push({index1:-1,index2:i,pos:line2[1]}):overlapInfos.splice(index,0,{index1:-1,index2:i,pos:line2[1]})}}));var overlapPoints=overlapInfos.map((function(_a){return _a.pos})),pointMap={};return overlapPoints.filter((function(point){var key=point[0]+"x"+point[1];return!pointMap[key]&&(pointMap[key]=!0,!0)}))}(points1,points2))}var PolyMap=function(){function PolyMap(){this.keys=[],this.values=[]}var __proto=PolyMap.prototype;return __proto.get=function(key){return this.values[this.keys.indexOf(key)]},__proto.set=function(key,value){var keys=this.keys,values=this.values,prevIndex=keys.indexOf(key),index=-1===prevIndex?keys.length:prevIndex;keys[index]=key,values[index]=value},PolyMap}(),HashMap=function(){function HashMap(){this.object={}}var __proto=HashMap.prototype;return __proto.get=function(key){return this.object[key]},__proto.set=function(key,value){this.object[key]=value},HashMap}(),SUPPORT_MAP="function"==typeof Map,Link=function(){function Link(){}var __proto=Link.prototype;return __proto.connect=function(prevLink,nextLink){this.prev=prevLink,this.next=nextLink,prevLink&&(prevLink.next=this),nextLink&&(nextLink.prev=this)},__proto.disconnect=function(){var prevLink=this.prev,nextLink=this.next;prevLink&&(prevLink.next=nextLink),nextLink&&(nextLink.prev=prevLink)},__proto.getIndex=function(){for(var link=this,index=-1;link;)link=link.prev,++index;return index},Link}();var Result=function(){function Result(prevList,list,added,removed,changed,maintained,changedBeforeAdded,fixed){this.prevList=prevList,this.list=list,this.added=added,this.removed=removed,this.changed=changed,this.maintained=maintained,this.changedBeforeAdded=changedBeforeAdded,this.fixed=fixed}var __proto=Result.prototype;return Object.defineProperty(__proto,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(__proto,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),__proto.caculateOrdered=function(){var ordered=function orderChanged(changed,fixed){var fromLinks=[],toLinks=[];return changed.forEach((function(_a){var from=_a[0],to=_a[1],link=new Link;fromLinks[from]=link,toLinks[to]=link})),fromLinks.forEach((function(link,i){link.connect(fromLinks[i-1])})),changed.filter((function(_,i){return!fixed[i]})).map((function(_a,i){var from=_a[0],to=_a[1];if(from===to)return[0,0];var fromLink=fromLinks[from],toLink=toLinks[to-1],fromIndex=fromLink.getIndex();return fromLink.disconnect(),toLink?fromLink.connect(toLink,toLink.next):fromLink.connect(void 0,fromLinks[0]),[fromIndex,fromLink.getIndex()]}))}(this.changedBeforeAdded,this.fixed),changed=this.changed,pureChanged=[];this.cacheOrdered=ordered.filter((function(_a,i){var from=_a[0],to=_a[1],_b=changed[i],fromBefore=_b[0],toBefore=_b[1];if(from!==to)return pureChanged.push([fromBefore,toBefore]),!0})),this.cachePureChanged=pureChanged},Result}();function diff(prevList,list,findKeyCallback){var mapClass=SUPPORT_MAP?Map:findKeyCallback?HashMap:PolyMap,callback=findKeyCallback||function(e){return e},added=[],removed=[],maintained=[],prevKeys=prevList.map(callback),keys=list.map(callback),prevKeyMap=new mapClass,keyMap=new mapClass,changedBeforeAdded=[],fixed=[],removedMap={},changed=[],addedCount=0,removedCount=0;return prevKeys.forEach((function(key,prevListIndex){prevKeyMap.set(key,prevListIndex)})),keys.forEach((function(key,listIndex){keyMap.set(key,listIndex)})),prevKeys.forEach((function(key,prevListIndex){var listIndex=keyMap.get(key);void 0===listIndex?(++removedCount,removed.push(prevListIndex)):removedMap[listIndex]=removedCount})),keys.forEach((function(key,listIndex){var prevListIndex=prevKeyMap.get(key);void 0===prevListIndex?(added.push(listIndex),++addedCount):(maintained.push([prevListIndex,listIndex]),removedCount=removedMap[listIndex]||0,changedBeforeAdded.push([prevListIndex-removedCount,listIndex-addedCount]),fixed.push(listIndex===prevListIndex),prevListIndex!==listIndex&&changed.push([prevListIndex,listIndex]))})),removed.reverse(),new Result(prevList,list,added,removed,changed,maintained,changedBeforeAdded,fixed)}var ListDiffer=function(){function ListDiffer(list,findKeyCallback){void 0===list&&(list=[]),this.findKeyCallback=findKeyCallback,this.list=[].slice.call(list)}return ListDiffer.prototype.update=function(list){var newData=[].slice.call(list),result=diff(this.list,newData,this.findKeyCallback);return this.list=newData,result},ListDiffer}(),extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var childrenCount,findKeyCallback="function"==typeof Map?void 0:(childrenCount=0,function(el){return el.__DIFF_KEY__||(el.__DIFF_KEY__=++childrenCount)});var children_differ_esm=function(_super){function ChildrenDiffer(list){return void 0===list&&(list=[]),_super.call(this,list,findKeyCallback)||this}return function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}(ChildrenDiffer,_super),ChildrenDiffer}(ListDiffer),__assign=function(){return(__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};var event_emitter_esm=function(){function EventEmitter(){this._events={}}var __proto=EventEmitter.prototype;return __proto.on=function(eventName,listener){if(isObject(eventName))for(var name in eventName)this.on(name,eventName[name]);else this._addEvent(eventName,listener,{});return this},__proto.off=function(eventName,listener){if(eventName)if(isObject(eventName))for(var name in eventName)this.off(name);else if(listener){var events=this._events[eventName];if(events){var index=findIndex(events,(function(e){return e.listener===listener}));index>-1&&events.splice(index,1)}}else this._events[eventName]=[];else this._events={};return this},__proto.once=function(eventName,listener){var _this=this;return listener&&this._addEvent(eventName,listener,{once:!0}),new Promise((function(resolve){_this._addEvent(eventName,resolve,{once:!0})}))},__proto.emit=function(eventName,param){var _this=this;void 0===param&&(param={});var events=this._events[eventName];if(!eventName||!events)return!0;var isStop=!1;return param.eventType=eventName,param.stop=function(){isStop=!0},param.currentTarget=this,function event_emitter_esm_spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}(events).forEach((function(info){info.listener(param),info.once&&_this.off(eventName,info.listener)})),!isStop},__proto.trigger=function(eventName,param){return void 0===param&&(param={}),this.emit(eventName,param)},__proto._addEvent=function(eventName,listener,options){var events=this._events;events[eventName]=events[eventName]||[],events[eventName].push(__assign({listener:listener},options))},EventEmitter}(),dragscroll_esm_extendStatics=function(d,b){return(dragscroll_esm_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function getDefaultScrollPosition(e){var container=e.container;return[container.scrollLeft,container.scrollTop]}var dragscroll_esm=function(_super){function DragScroll(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.startRect=null,_this.startPos=[],_this.prevTime=0,_this.timer=0,_this}!function dragscroll_esm_extends(d,b){function __(){this.constructor=d}dragscroll_esm_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}(DragScroll,_super);var __proto=DragScroll.prototype;return __proto.dragStart=function(e,options){var container=options.container,top=0,left=0,width=0,height=0;if(container===document.body)width=window.innerWidth,height=window.innerHeight;else{var rect=container.getBoundingClientRect();top=rect.top,left=rect.left,width=rect.width,height=rect.height}this.startPos=[e.clientX,e.clientY],this.startRect={top:top,left:left,width:width,height:height}},__proto.drag=function(e,options){var _this=this,clientX=e.clientX,clientY=e.clientY,container=options.container,_a=options.threshold,threshold=void 0===_a?0:_a,_b=options.throttleTime,throttleTime=void 0===_b?0:_b,_c=options.getScrollPosition,getScrollPosition=void 0===_c?getDefaultScrollPosition:_c,startRect=this.startRect,startPos=this.startPos,nowTime=now(),distTime=Math.max(throttleTime+this.prevTime-nowTime,0),direction=[0,0];if(startRect.top>clientY-threshold?(startPos[1]>startRect.top||clientY<startPos[1])&&(direction[1]=-1):startRect.top+startRect.height<clientY+threshold&&(startPos[1]<startRect.top+startRect.height||clientY>startPos[1])&&(direction[1]=1),startRect.left>clientX-threshold?(startPos[0]>startRect.left||clientX<startPos[0])&&(direction[0]=-1):startRect.left+startRect.width<clientX+threshold&&(startPos[0]<startRect.left+startRect.width||clientX>startPos[0])&&(direction[0]=1),clearTimeout(this.timer),!direction[0]&&!direction[1])return!1;if(distTime>0)return this.timer=window.setTimeout((function(){_this.drag(e,options)}),distTime),!1;this.prevTime=nowTime;var prevPos=getScrollPosition({container:container,direction:direction});this.trigger("scroll",{container:container,direction:direction,inputEvent:e});var nextPos=getScrollPosition({container:container,direction:direction}),offsetX=nextPos[0]-prevPos[0],offsetY=nextPos[1]-prevPos[1];return!(!offsetX&&!offsetY)&&(this.trigger("move",{offsetX:direction[0]?offsetX:0,offsetY:direction[1]?offsetY:0,inputEvent:e}),throttleTime&&(this.timer=window.setTimeout((function(){_this.drag(e,options)}),throttleTime)),!0)},__proto.dragEnd=function(){clearTimeout(this.timer)},DragScroll}(event_emitter_esm),react=__webpack_require__(1),gesto_esm_extendStatics=function(d,b){return(gesto_esm_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var gesto_esm_assign=function(){return(gesto_esm_assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function getRotatiion(touches){return function gesto_esm_getRad(pos1,pos2){var distX=pos2[0]-pos1[0],distY=pos2[1]-pos1[1],rad=Math.atan2(distY,distX);return rad>=0?rad:rad+2*Math.PI}([touches[0].clientX,touches[0].clientY],[touches[1].clientX,touches[1].clientY])/Math.PI*180}function getEventClients(e){return e.touches?function getClients(touches){for(var length=Math.min(touches.length,2),clients=[],i=0;i<length;++i)clients.push(getClient(touches[i]));return clients}(e.touches):[getClient(e)]}function getPosition(clients,prevClients,startClients){var length=startClients.length,_a=getAverageClient(clients,length),clientX=_a.clientX,clientY=_a.clientY,originalClientX=_a.originalClientX,originalClientY=_a.originalClientY,_b=getAverageClient(prevClients,length),prevX=_b.clientX,prevY=_b.clientY,_c=getAverageClient(startClients,length);return{clientX:originalClientX,clientY:originalClientY,deltaX:clientX-prevX,deltaY:clientY-prevY,distX:clientX-_c.clientX,distY:clientY-_c.clientY}}function gesto_esm_getDist(clients){return Math.sqrt(Math.pow(clients[0].clientX-clients[1].clientX,2)+Math.pow(clients[0].clientY-clients[1].clientY,2))}function getClient(e){return{clientX:e.clientX,clientY:e.clientY}}function getAverageClient(clients,length){void 0===length&&(length=clients.length);for(var sumClient={clientX:0,clientY:0,originalClientX:0,originalClientY:0},i=0;i<length;++i){var client=clients[i];sumClient.originalClientX+="originalClientX"in client?client.originalClientX:client.clientX,sumClient.originalClientY+="originalClientY"in client?client.originalClientY:client.clientY,sumClient.clientX+=client.clientX,sumClient.clientY+=client.clientY}return length?{clientX:sumClient.clientX/length,clientY:sumClient.clientY/length,originalClientX:sumClient.originalClientX/length,originalClientY:sumClient.originalClientY/length}:sumClient}var ClientStore=function(){function ClientStore(clients){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=clients,this.prevClients=clients,this.length=clients.length}var __proto=ClientStore.prototype;return __proto.addClients=function(clients){void 0===clients&&(clients=this.prevClients);var position=this.getPosition(clients),deltaX=position.deltaX,deltaY=position.deltaY;return this.movement+=Math.sqrt(deltaX*deltaX+deltaY*deltaY),this.prevClients=clients,position},__proto.getAngle=function(clients){return void 0===clients&&(clients=this.prevClients),getRotatiion(clients)},__proto.getRotation=function(clients){return void 0===clients&&(clients=this.prevClients),getRotatiion(clients)-getRotatiion(this.startClients)},__proto.getPosition=function(clients){return getPosition(clients||this.prevClients,this.prevClients,this.startClients)},__proto.getPositions=function(clients){void 0===clients&&(clients=this.prevClients);var prevClients=this.prevClients;return this.startClients.map((function(startClient,i){return getPosition([clients[i]],[prevClients[i]],[startClient])}))},__proto.getMovement=function(clients){var movement=this.movement;if(!clients)return movement;var currentClient=getAverageClient(clients,this.length),prevClient=getAverageClient(this.prevClients,this.length),deltaX=currentClient.clientX-prevClient.clientX,deltaY=currentClient.clientY-prevClient.clientY;return Math.sqrt(deltaX*deltaX+deltaY*deltaY)+movement},__proto.getDistance=function(clients){return void 0===clients&&(clients=this.prevClients),gesto_esm_getDist(clients)},__proto.getScale=function(clients){return void 0===clients&&(clients=this.prevClients),gesto_esm_getDist(clients)/gesto_esm_getDist(this.startClients)},__proto.move=function(deltaX,deltaY){this.startClients.forEach((function(client){client.clientX-=deltaX,client.clientY-=deltaY})),this.prevClients.forEach((function(client){client.clientX-=deltaX,client.clientY-=deltaY}))},ClientStore}(),INPUT_TAGNAMES=["textarea","input"],gesto_esm=function(_super){function Gesto(targets,options){void 0===options&&(options={});var _this=_super.call(this)||this;_this.options={},_this.flag=!1,_this.pinchFlag=!1,_this.datas={},_this.isDrag=!1,_this.isPinch=!1,_this.isMouse=!1,_this.isTouch=!1,_this.clientStores=[],_this.targets=[],_this.prevTime=0,_this.doubleFlag=!1,_this.onDragStart=function(e,isTrusted){if(void 0===isTrusted&&(isTrusted=!0),_this.flag||!1!==e.cancelable){var _a=_this.options,container=_a.container,pinchOutside=_a.pinchOutside,preventRightClick=_a.preventRightClick,preventDefault=_a.preventDefault,checkInput=_a.checkInput,isTouch=_this.isTouch,isDragStart=!_this.flag;if(isDragStart){var activeElement=document.activeElement,target=e.target,tagName=target.tagName.toLowerCase(),hasInput=INPUT_TAGNAMES.indexOf(tagName)>-1,hasContentEditable=target.isContentEditable;if(hasInput||hasContentEditable){if(checkInput||activeElement===target)return!1;if(activeElement&&hasContentEditable&&activeElement.isContentEditable&&activeElement.contains(target))return!1}else if((preventDefault||"touchstart"===e.type)&&activeElement){var activeTagName=activeElement.tagName;(activeElement.isContentEditable||INPUT_TAGNAMES.indexOf(activeTagName)>-1)&&activeElement.blur()}if(_this.clientStores=[new ClientStore(getEventClients(e))],_this.flag=!0,_this.isDrag=!1,_this.datas={},preventRightClick&&(3===e.which||2===e.button))return _this.initDrag(),!1;_this.doubleFlag=now()-_this.prevTime<200,!1===_this.emit("dragStart",gesto_esm_assign({datas:_this.datas,inputEvent:e,isTrusted:isTrusted,isDouble:_this.doubleFlag},_this.getCurrentStore().getPosition()))&&_this.initDrag(),_this.flag&&preventDefault&&e.preventDefault()}if(!_this.flag)return!1;var timer=0;if(isDragStart&&isTouch&&pinchOutside&&(timer=setTimeout((function(){addEvent(container,"touchstart",_this.onDragStart,{passive:!1})}))),!isDragStart&&isTouch&&pinchOutside&&removeEvent(container,"touchstart",_this.onDragStart),_this.flag&&function isMultiTouch(e){return e.touches&&e.touches.length>=2}(e)){if(clearTimeout(timer),isDragStart&&e.touches.length!==e.changedTouches.length)return;_this.pinchFlag||_this.onPinchStart(e)}}},_this.onDrag=function(e,isScroll){if(_this.flag){var clients=getEventClients(e),result=_this.moveClients(clients,e,!1);(_this.pinchFlag||result.deltaX||result.deltaY)&&_this.emit("drag",gesto_esm_assign({},result,{isScroll:!!isScroll,inputEvent:e})),_this.pinchFlag&&_this.onPinch(e,clients),_this.getCurrentStore().addClients(clients)}},_this.onDragEnd=function(e){if(_this.flag){var _a=_this.options,pinchOutside=_a.pinchOutside,container=_a.container;_this.isTouch&&pinchOutside&&removeEvent(container,"touchstart",_this.onDragStart),_this.flag=!1;var position=_this.getCurrentStore().getPosition(),currentTime=now(),isDouble=!_this.isDrag&&_this.doubleFlag;_this.prevTime=_this.isDrag||isDouble?0:currentTime,_this.emit("dragEnd",gesto_esm_assign({datas:_this.datas,isDouble:isDouble,isDrag:_this.isDrag,inputEvent:e},position)),_this.pinchFlag&&_this.onPinchEnd(e),_this.clientStores=[]}},_this.onBlur=function(){_this.onDragEnd()};var elements=[].concat(targets);_this.options=gesto_esm_assign({checkInput:!1,container:elements.length>1?window:elements[0],preventRightClick:!0,preventDefault:!0,checkWindowBlur:!1,pinchThreshold:0,events:["touch","mouse"]},options);var _a=_this.options,container=_a.container,events=_a.events,checkWindowBlur=_a.checkWindowBlur;if(_this.isTouch=events.indexOf("touch")>-1,_this.isMouse=events.indexOf("mouse")>-1,_this.targets=elements,_this.isMouse&&(elements.forEach((function(el){addEvent(el,"mousedown",_this.onDragStart)})),addEvent(container,"mousemove",_this.onDrag),addEvent(container,"mouseup",_this.onDragEnd),addEvent(container,"contextmenu",_this.onDragEnd)),checkWindowBlur&&addEvent(window,"blur",_this.onBlur),_this.isTouch){var passive_1={passive:!1};elements.forEach((function(el){addEvent(el,"touchstart",_this.onDragStart,passive_1)})),addEvent(container,"touchmove",_this.onDrag,passive_1),addEvent(container,"touchend",_this.onDragEnd,passive_1),addEvent(container,"touchcancel",_this.onDragEnd,passive_1)}return _this}!function gesto_esm_extends(d,b){function __(){this.constructor=d}gesto_esm_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}(Gesto,_super);var __proto=Gesto.prototype;return __proto.getMovement=function(clients){return this.getCurrentStore().getMovement(clients)+this.clientStores.slice(1).reduce((function(prev,cur){return prev+cur.movement}),0)},__proto.isDragging=function(){return this.isDrag},__proto.isFlag=function(){return this.flag},__proto.isPinchFlag=function(){return this.pinchFlag},__proto.isDoubleFlag=function(){return this.doubleFlag},__proto.isPinching=function(){return this.isPinch},__proto.scrollBy=function(deltaX,deltaY,e,isCallDrag){void 0===isCallDrag&&(isCallDrag=!0),this.flag&&(this.clientStores[0].move(deltaX,deltaY),isCallDrag&&this.onDrag(e,!0))},__proto.move=function(_a,inputEvent){var deltaX=_a[0],deltaY=_a[1],nextClients=this.getCurrentStore().prevClients;return this.moveClients(nextClients.map((function(_a){var clientX=_a.clientX,clientY=_a.clientY;return{clientX:clientX+deltaX,clientY:clientY+deltaY,originalClientX:clientX,originalClientY:clientY}})),inputEvent,!0)},__proto.triggerDragStart=function(e){this.onDragStart(e,!1)},__proto.setEventDatas=function(datas){var currentDatas=this.datas;for(var name in datas)currentDatas[name]=datas[name];return this},__proto.getEventDatas=function(){return this.datas},__proto.unset=function(){var _this=this,targets=this.targets,container=this.options.container;this.off(),removeEvent(window,"blur",this.onBlur),this.isMouse&&(targets.forEach((function(target){removeEvent(target,"mousedown",_this.onDragStart)})),removeEvent(container,"mousemove",this.onDrag),removeEvent(container,"mouseup",this.onDragEnd),removeEvent(container,"contextmenu",this.onDragEnd)),this.isTouch&&(targets.forEach((function(target){removeEvent(target,"touchstart",_this.onDragStart)})),removeEvent(container,"touchstart",this.onDragStart),removeEvent(container,"touchmove",this.onDrag),removeEvent(container,"touchend",this.onDragEnd),removeEvent(container,"touchcancel",this.onDragEnd))},__proto.onPinchStart=function(e){var pinchThreshold=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>pinchThreshold)){var store=new ClientStore(getEventClients(e));this.pinchFlag=!0,this.clientStores.splice(0,0,store),!1===this.emit("pinchStart",gesto_esm_assign({datas:this.datas,angle:store.getAngle(),touches:this.getCurrentStore().getPositions()},store.getPosition(),{inputEvent:e}))&&(this.pinchFlag=!1)}},__proto.onPinch=function(e,clients){if(this.flag&&this.pinchFlag&&!(clients.length<2)){var store=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",gesto_esm_assign({datas:this.datas,movement:this.getMovement(clients),angle:store.getAngle(clients),rotation:store.getRotation(clients),touches:store.getPositions(clients),scale:store.getScale(clients),distance:store.getDistance(clients)},store.getPosition(clients),{inputEvent:e}))}},__proto.onPinchEnd=function(e){if(this.pinchFlag){var isPinch=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var store=this.getCurrentStore();this.emit("pinchEnd",gesto_esm_assign({datas:this.datas,isPinch:isPinch,touches:store.getPositions()},store.getPosition(),{inputEvent:e})),this.isPinch=!1,this.pinchFlag=!1}},__proto.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1},__proto.getCurrentStore=function(){return this.clientStores[0]},__proto.moveClients=function(clients,inputEvent,isAdd){var position=this.getCurrentStore()[isAdd?"addClients":"getPosition"](clients);return this.isDrag=!0,gesto_esm_assign({datas:this.datas},position,{movement:this.getMovement(clients),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:inputEvent})},Gesto}(event_emitter_esm);var stringHash=function hash(str){for(var hash=5381,i=str.length;i;)hash=33*hash^str.charCodeAt(--i);return hash>>>0};function injectStyle(className,css,options,shadowRoot){var style=document.createElement("style");return style.setAttribute("type","text/css"),style.setAttribute("data-styled-id",className),options.nonce&&style.setAttribute("nonce",options.nonce),style.innerHTML=function replaceStyle(className,css,options){return options.original?css:css.replace(/([^};{\s}][^};{]*|^\s*){/gm,(function(_,selector){var trimmedSelector=selector.trim();return(trimmedSelector?splitComma(trimmedSelector):[""]).map((function(subSelector){var trimmedSubSelector=subSelector.trim();return 0===trimmedSubSelector.indexOf("@")?trimmedSubSelector:trimmedSubSelector.indexOf(":global")>-1?trimmedSubSelector.replace(/\:global/g,""):trimmedSubSelector.indexOf(":host")>-1?""+trimmedSubSelector.replace(/\:host/g,"."+className):trimmedSubSelector?"."+className+" "+trimmedSubSelector:"."+className})).join(", ")+" {"}))}(className,css,options),(shadowRoot||document.head||document.body).appendChild(style),style}var styled_esm=function styled(css){var injectElement,injectClassName="rCS"+function getHash(str){return stringHash(str).toString(36)}(css),injectCount=0;return{className:injectClassName,inject:function(el,options){void 0===options&&(options={});var styleElement,shadowRoot=function getShadowRoot(parentElement){if(parentElement&&parentElement.getRootNode){var rootNode=parentElement.getRootNode();if(11===rootNode.nodeType)return rootNode}}(el),firstMount=0===injectCount;return(shadowRoot||firstMount)&&(styleElement=injectStyle(injectClassName,css,options,shadowRoot)),firstMount&&(injectElement=styleElement),shadowRoot||++injectCount,{destroy:function(){shadowRoot?(el.removeChild(styleElement),styleElement=null):(injectCount>0&&--injectCount,0===injectCount&&injectElement&&(injectElement.parentNode.removeChild(injectElement),injectElement=null))}}}}};var styled_esm_extendStatics=function(d,b){return(styled_esm_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function styled_esm_extends(d,b){function __(){this.constructor=d}styled_esm_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var styled_esm_assign=function(){return(styled_esm_assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};var styled_esm_StyledElement=function(_super){function StyledElement(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.injectResult=null,_this.tag="div",_this}styled_esm_extends(StyledElement,_super);var __proto=StyledElement.prototype;return __proto.render=function(){var target,name,_a=this.props,_b=_a.className,className=void 0===_b?"":_b,portalContainer=(_a.cspNonce,_a.portalContainer),attributes=function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}(_a,["className","cspNonce","portalContainer"]),cssId=this.injector.className,Tag=this.tag,portalAttributes={};return(react.version||"").indexOf("simple")>-1&&portalContainer&&(portalAttributes={portalContainer:portalContainer}),Object(react.createElement)(Tag,styled_esm_assign({ref:(target=this,name="element",function(e){e&&(target[name]=e)}),"data-styled-id":cssId,className:className+" "+cssId},portalAttributes,attributes))},__proto.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},__proto.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},__proto.getElement=function(){return this.element},StyledElement}(react.Component);var dist_styled_esm=function styled_esm_styled(tag,css){var injector=styled_esm(css);return function(_super){function Styled(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.injector=injector,_this.tag=tag,_this}return styled_esm_extends(Styled,_super),Styled}(styled_esm_StyledElement)},moveable_esm_extendStatics=function(d,b){return(moveable_esm_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function moveable_esm_extends(d,b){function __(){this.constructor=d}moveable_esm_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var moveable_esm_assign=function(){return(moveable_esm_assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function moveable_esm_spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function makeAble(name,able){var _a;return moveable_esm_assign({events:{},props:(_a={},_a[name]=Boolean,_a),name:name},able)}function getSVGCursor(scale,degree){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*scale+'px" height="'+32*scale+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+degree+'deg);transform-origin: 16px 16px"></path></svg>'}var res,IS_WEBKIT=agent_esm().browser.webkit,IS_WEBKIT605=IS_WEBKIT&&(!!(res=/applewebkit\/([^\s]+)/g.exec(navigator.userAgent.toLowerCase()))&&parseFloat(res[1])<605),PREFIX="moveable-",MOVEABLE_CSS="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map((function(degree){return'\n.direction[data-rotation="'+degree+'"] {\n\t'+function getCursorCSS(degree){var x1=getSVGCursor(1,degree),x2=getSVGCursor(2,degree),degree45=45*Math.round(degree/45)%180,defaultCursor="ns-resize";return 135===degree45?defaultCursor="nwse-resize":45===degree45?defaultCursor="nesw-resize":90===degree45&&(defaultCursor="ew-resize"),"cursor:"+defaultCursor+";cursor: url('"+x1+"') 16 16, "+defaultCursor+";cursor: -webkit-image-set(url('"+x1+"') 1x, url('"+x2+"') 2x) 16 16, "+defaultCursor+";"}(degree)+"\n}\n"})).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(IS_WEBKIT605?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n",NEARBY_POS=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],MAX_NUM=Math.pow(10,10),MIN_NUM=-MAX_NUM,DIRECTIONS=["n","w","s","e","nw","ne","sw","se"],DIRECTION_INDEXES={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},DIRECTION_ROTATIONS={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},MOVEABLE_METHODS=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager"];function prefix(){for(var classNames=[],_i=0;_i<arguments.length;_i++)classNames[_i]=arguments[_i];return prefixNames.apply(void 0,moveable_esm_spreadArrays([PREFIX],classNames))}function getAbsoluteMatrix(matrix,n,origin){return multiplies(n,createOriginMatrix(origin,n),matrix,createOriginMatrix(origin.map((function(a){return-a})),n))}function getBeforeTransformOrigin(el){return getTransformOrigin(moveable_esm_getComputedStyle(el,":before")).map((function(o,i){var _a=splitUnit(o),value=_a.value,unit=_a.unit;return value*function measureSVGSize(el,unit,isHorizontal){return"%"===unit?getSVGViewBox(el.ownerSVGElement)[isHorizontal?"width":"height"]/100:1}(el,unit,0===i)}))}function getTransformOrigin(style){var transformOrigin=style.transformOrigin;return transformOrigin?transformOrigin.split(" "):["0","0"]}function getOffsetInfo(el,lastParent,isParent){for(var body=document.body,target=!el||isParent?el:el.parentElement,isEnd=el===lastParent||target===lastParent,position="relative";target&&target!==body;){lastParent===target&&(isEnd=!0);var style=moveable_esm_getComputedStyle(target),transform=style.transform;if(position=style.position,"svg"===target.tagName.toLowerCase()||"static"!==position||transform&&"none"!==transform)break;target=target.parentElement,position="relative"}return{isStatic:"static"===position,isEnd:isEnd||!target||target===body,offsetParent:target||body}}function getOffsetPosInfo(el,container,style,isFixed){var _a,tagName=el.tagName.toLowerCase(),offsetLeft=el.offsetLeft,offsetTop=el.offsetTop;if(isFixed){var containerClientRect=(container||document.documentElement).getBoundingClientRect();offsetLeft-=containerClientRect.left,offsetTop-=containerClientRect.top}var origin,targetOrigin,isSVG=isUndefined(offsetLeft),hasOffset=!isSVG;return hasOffset||"svg"===tagName?targetOrigin=(origin=getTransformOrigin(style).map((function(pos){return parseFloat(pos)}))).slice():(targetOrigin=(origin=IS_WEBKIT605?getBeforeTransformOrigin(el):getTransformOrigin(style).map((function(pos){return parseFloat(pos)}))).slice(),hasOffset=!0,offsetLeft=(_a=function getSVGGraphicsOffset(el,origin){if(!el.getBBox)return[0,0];var bbox=el.getBBox(),viewBox=getSVGViewBox(el.ownerSVGElement),left=bbox.x-viewBox.x,top=bbox.y-viewBox.y;return[left,top,origin[0]-left,origin[1]-top]}(el,origin))[0],offsetTop=_a[1],origin[0]=_a[2],origin[1]=_a[3]),{tagName:tagName,isSVG:isSVG,hasOffset:hasOffset,offset:[offsetLeft||0,offsetTop||0],origin:origin,targetOrigin:targetOrigin}}function getBodyOffset(el,isSVG,style){void 0===style&&(style=moveable_esm_getComputedStyle(el));var bodyStyle=moveable_esm_getComputedStyle(document.body),bodyPosition=bodyStyle.position;if(!(isSVG||bodyPosition&&"static"!==bodyPosition))return[0,0];var marginLeft=parseInt(bodyStyle.marginLeft,10),marginTop=parseInt(bodyStyle.marginTop,10);return"absolute"===style.position&&("auto"===style.top&&"auto"===style.bottom||(marginTop=0),"auto"===style.left&&"auto"===style.right||(marginLeft=0)),[marginLeft,marginTop]}function convert3DMatrixes(matrixes){matrixes.forEach((function(info){var matrix=info.matrix;matrix&&(info.matrix=convertDimension(matrix,3,4))}))}function getMatrixStackInfo(target,container){for(var transformOrigin,targetTransformOrigin,targetMatrix,a,is2d,transform,el=target,matrixes=[],isEnd=!1,is3d=!1,n=3,offsetContainer=getOffsetInfo(container,container,!0).offsetParent;el&&!isEnd;){var style=moveable_esm_getComputedStyle(el),position=style.position,isFixed="fixed"===position,matrix=(transform=style.transform,a=transform&&"none"!==transform?isObject(transform)?transform:splitBracket(transform).value.split(/s*,\s*/g).map((function(v){return parseFloat(v)})):[1,0,0,1,0,0],void 0===(is2d=void 0)&&(is2d=6===a.length),is2d?[a[0],a[1],0,a[2],a[3],0,a[4],a[5],1]:a),length=matrix.length;is3d||16!==length||(is3d=!0,n=4,convert3DMatrixes(matrixes)),is3d&&9===length&&(matrix=convertDimension(matrix,3,4));var _a=getOffsetPosInfo(el,container,style,isFixed),tagName=_a.tagName,hasOffset=_a.hasOffset,isSVG=_a.isSVG,origin=_a.origin,targetOrigin=_a.targetOrigin,offsetPos=_a.offset,offsetLeft=offsetPos[0],offsetTop=offsetPos[1];"svg"===tagName&&targetMatrix?(matrixes.push({type:"target",target:el,matrix:getSVGMatrix(el,n)}),matrixes.push({type:"offset",target:el,matrix:createIdentityMatrix(n)})):"g"===tagName&&target!==el&&(offsetLeft=0,offsetTop=0);var _b=getOffsetInfo(el,container),offsetParent=_b.offsetParent,isOffsetEnd=_b.isEnd,isStatic=_b.isStatic;IS_WEBKIT&&hasOffset&&!isSVG&&isStatic&&("relative"===position||"static"===position)&&(offsetLeft-=offsetParent.offsetLeft,offsetTop-=offsetParent.offsetTop,isEnd=isEnd||isOffsetEnd);var parentClientLeft=0,parentClientTop=0;if(hasOffset&&offsetContainer!==offsetParent&&(parentClientLeft=offsetParent.clientLeft,parentClientTop=offsetParent.clientTop),hasOffset&&offsetParent===document.body){var margin=getBodyOffset(el,!1,style);offsetLeft+=margin[0],offsetTop+=margin[1]}if(matrixes.push({type:"target",target:el,matrix:getAbsoluteMatrix(matrix,n,origin)}),hasOffset?matrixes.push({type:"offset",target:el,matrix:createOriginMatrix([offsetLeft-el.scrollLeft+parentClientLeft,offsetTop-el.scrollTop+parentClientTop],n)}):matrixes.push({type:"offset",target:el,origin:origin}),targetMatrix||(targetMatrix=matrix),transformOrigin||(transformOrigin=origin),targetTransformOrigin||(targetTransformOrigin=targetOrigin),isEnd||isFixed)break;el=offsetParent,isEnd=isOffsetEnd}return targetMatrix||(targetMatrix=createIdentityMatrix(n)),transformOrigin||(transformOrigin=[0,0]),targetTransformOrigin||(targetTransformOrigin=[0,0]),{offsetContainer:offsetContainer,matrixes:matrixes,targetMatrix:targetMatrix,transformOrigin:transformOrigin,targetOrigin:targetTransformOrigin,is3d:is3d}}function calculateElementInfo(target,container,rootContainer,isAbsolute3d){var _a;void 0===rootContainer&&(rootContainer=container);var width=0,height=0,rotation=0,allResult={};if(target){var style=moveable_esm_getComputedStyle(target);width=target.offsetWidth,height=target.offsetHeight,isUndefined(width)&&(width=(_a=getSize(target,style,!0))[0],height=_a[1])}if(target){var result=function calculateMatrixStack(target,container,rootContainer,isAbsolute3d){void 0===rootContainer&&(rootContainer=container);var _a=getMatrixStackInfo(target,container),matrixes=_a.matrixes,is3d=_a.is3d,prevTargetMatrix=_a.targetMatrix,transformOrigin=_a.transformOrigin,targetOrigin=_a.targetOrigin,_b=getMatrixStackInfo(_a.offsetContainer,rootContainer),rootMatrixes=_b.matrixes,isRoot3d=_b.is3d,isNext3d=isAbsolute3d||isRoot3d||is3d,n=isNext3d?4:3,isSVGGraphicElement="svg"!==target.tagName.toLowerCase()&&"ownerSVGElement"in target,originalContainer=container||document.body,targetMatrix=prevTargetMatrix,allMatrix=createIdentityMatrix(n),rootMatrix=createIdentityMatrix(n),beforeMatrix=createIdentityMatrix(n),offsetMatrix=createIdentityMatrix(n),length=matrixes.length,endContainer=getOffsetInfo(originalContainer,originalContainer,!0).offsetParent;rootMatrixes.reverse(),matrixes.reverse(),!is3d&&isNext3d&&(targetMatrix=convertDimension(targetMatrix,3,4),convert3DMatrixes(matrixes));!isRoot3d&&isNext3d&&convert3DMatrixes(rootMatrixes);rootMatrixes.forEach((function(info){rootMatrix=multiply(rootMatrix,info.matrix,n)})),matrixes.forEach((function(info,i){if(length-2===i&&(beforeMatrix=allMatrix.slice()),length-1===i&&(offsetMatrix=allMatrix.slice()),!info.matrix){var offset=function getSVGOffset(offsetInfo,targetInfo,container,n,beforeMatrix){var _a,target=offsetInfo.target,origin=offsetInfo.origin,targetMatrix=targetInfo.matrix,_b=getSize(target,void 0,!0),width=_b[0],height=_b[1],containerClientRect=container.getBoundingClientRect(),margin=[0,0];container===document.body&&(margin=getBodyOffset(target,!0));var rect=target.getBoundingClientRect(),rectLeft=rect.left-containerClientRect.left+container.scrollLeft-(container.clientLeft||0)+margin[0],rectTop=rect.top-containerClientRect.top+container.scrollTop-(container.clientTop||0)+margin[1],rectWidth=rect.width,rectHeight=rect.height,mat=multiplies(n,beforeMatrix,targetMatrix),_c=calculateRect(mat,width,height,n),prevLeft=_c.left,prevTop=_c.top,prevWidth=_c.width,prevHeight=_c.height,posOrigin=calculatePosition(mat,origin,n),prevOrigin=minus(posOrigin,[prevLeft,prevTop]),rectOrigin=[rectLeft+prevOrigin[0]*rectWidth/prevWidth,rectTop+prevOrigin[1]*rectHeight/prevHeight],offset=[0,0],count=0;for(;++count<10;){var inverseBeforeMatrix=invert(beforeMatrix,n);_a=minus(calculatePosition(inverseBeforeMatrix,rectOrigin,n),calculatePosition(inverseBeforeMatrix,posOrigin,n)),offset[0]=_a[0],offset[1]=_a[1];var _d=calculateRect(multiplies(n,beforeMatrix,createOriginMatrix(offset,n),targetMatrix),width,height,n),distLeft=_d.left-rectLeft,distTop=_d.top-rectTop;if(Math.abs(distLeft)<2&&Math.abs(distTop)<2)break;rectOrigin[0]-=distLeft,rectOrigin[1]-=distTop}return offset.map((function(p){return Math.round(p)}))}(info,matrixes[i+1],endContainer,n,multiply(rootMatrix,allMatrix,n));info.matrix=createOriginMatrix(offset,n)}allMatrix=multiply(allMatrix,info.matrix,n)}));var isMatrix3d=!isSVGGraphicElement&&is3d;targetMatrix||(targetMatrix=createIdentityMatrix(isMatrix3d?4:3));var targetTransform=makeMatrixCSS(isSVGGraphicElement&&16===targetMatrix.length?convertDimension(targetMatrix,4,3):targetMatrix,isMatrix3d);return{rootMatrix:rootMatrix=ignoreDimension(rootMatrix,n,n),beforeMatrix:beforeMatrix,offsetMatrix:offsetMatrix,allMatrix:allMatrix,targetMatrix:targetMatrix,targetTransform:targetTransform,transformOrigin:transformOrigin,targetOrigin:targetOrigin,is3d:isNext3d}}(target,container,rootContainer,isAbsolute3d),position=calculateMoveablePosition(result.allMatrix,result.transformOrigin,width,height);allResult=moveable_esm_assign(moveable_esm_assign({},result),position);var rotationPosition=calculateMoveablePosition(result.allMatrix,[50,50],100,100);rotation=getRotationRad([rotationPosition.pos1,rotationPosition.pos2],rotationPosition.direction)}var n=isAbsolute3d?4:3;return moveable_esm_assign({width:width,height:height,rotation:rotation,rootMatrix:createIdentityMatrix(n),beforeMatrix:createIdentityMatrix(n),offsetMatrix:createIdentityMatrix(n),allMatrix:createIdentityMatrix(n),targetMatrix:createIdentityMatrix(n),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!isAbsolute3d,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},allResult)}function getElementInfo(target,container,rootContainer){return void 0===rootContainer&&(rootContainer=container),calculateElementInfo(target,container,rootContainer,!0)}function makeMatrixCSS(matrix,is3d){return void 0===is3d&&(is3d=matrix.length>9),(is3d?"matrix3d":"matrix")+"("+convertMatrixtoCSS(matrix,!is3d).join(",")+")"}function getSVGViewBox(el){var clientWidth=el.clientWidth,clientHeight=el.clientHeight;if(!el)return{x:0,y:0,width:0,height:0,clientWidth:clientWidth,clientHeight:clientHeight};var viewBox=el.viewBox,baseVal=viewBox&&viewBox.baseVal||{x:0,y:0,width:0,height:0};return{x:baseVal.x,y:baseVal.y,width:baseVal.width||clientWidth,height:baseVal.height||clientHeight,clientWidth:clientWidth,clientHeight:clientHeight}}function getSVGMatrix(el,n){var _a=getSVGViewBox(el),viewBoxWidth=_a.width,viewBoxHeight=_a.height,clientWidth=_a.clientWidth,clientHeight=_a.clientHeight,scaleX=clientWidth/viewBoxWidth,scaleY=clientHeight/viewBoxHeight,preserveAspectRatio=el.preserveAspectRatio.baseVal,align=preserveAspectRatio.align,meetOrSlice=preserveAspectRatio.meetOrSlice,svgOrigin=[0,0],scale=[scaleX,scaleY],translate=[0,0];if(1!==align){var xAlign=(align-2)%3,yAlign=Math.floor((align-2)/3);svgOrigin[0]=viewBoxWidth*xAlign/2,svgOrigin[1]=viewBoxHeight*yAlign/2;var scaleDimension=2===meetOrSlice?Math.max(scaleY,scaleX):Math.min(scaleX,scaleY);scale[0]=scaleDimension,scale[1]=scaleDimension,translate[0]=(clientWidth-viewBoxWidth)/2*xAlign,translate[1]=(clientHeight-viewBoxHeight)/2*yAlign}var scaleMatrix=createScaleMatrix(scale,n);return scaleMatrix[n*(n-1)]=translate[0],scaleMatrix[n*(n-1)+1]=translate[1],getAbsoluteMatrix(scaleMatrix,n,svgOrigin)}function calculatePosition(matrix,pos,n){return calculate(matrix,convertPositionMatrix(pos,n),n)}function calculatePoses(matrix,width,height,n){return[[0,0],[width,0],[0,height],[width,height]].map((function(pos){return calculatePosition(matrix,pos,n)}))}function getRect(poses){var posesX=poses.map((function(pos){return pos[0]})),posesY=poses.map((function(pos){return pos[1]})),left=Math.min.apply(Math,posesX),top=Math.min.apply(Math,posesY),right=Math.max.apply(Math,posesX),bottom=Math.max.apply(Math,posesY);return{left:left,top:top,right:right,bottom:bottom,width:right-left,height:bottom-top}}function calculateRect(matrix,width,height,n){return getRect(calculatePoses(matrix,width,height,n))}function calculateMoveablePosition(matrix,origin,width,height){var n=16===matrix.length?4:3,poses=calculatePoses(matrix,width,height,n),_a=poses[0],x1=_a[0],y1=_a[1],_b=poses[1],x2=_b[0],y2=_b[1],_c=poses[2],x3=_c[0],y3=_c[1],_d=poses[3],x4=_d[0],y4=_d[1],_e=calculatePosition(matrix,origin,n),originX=_e[0],originY=_e[1],left=Math.min(x1,x2,x3,x4),top=Math.min(y1,y2,y3,y4),right=Math.max(x1,x2,x3,x4);return x1=x1-left||0,{left:left,top:top,right:right,bottom:Math.max(y1,y2,y3,y4),origin:[originX=originX-left||0,originY=originY-top||0],pos1:[x1,y1=y1-top||0],pos2:[x2=x2-left||0,y2=y2-top||0],pos3:[x3=x3-left||0,y3=y3-top||0],pos4:[x4=x4-left||0,y4=y4-top||0],direction:getShapeDirection(poses)}}function getDistSize(vec){return Math.sqrt(vec[0]*vec[0]+vec[1]*vec[1])}function getDiagonalSize(pos1,pos2){return getDistSize([pos2[0]-pos1[0],pos2[1]-pos1[1]])}function getLineStyle(pos1,pos2,zoom,rad){void 0===zoom&&(zoom=1),void 0===rad&&(rad=getRad(pos1,pos2));var width=getDiagonalSize(pos1,pos2);return{transform:"translateY(-50%) translate("+pos1[0]+"px, "+pos1[1]+"px) rotate("+rad+"rad) scaleY("+zoom+")",width:width+"px"}}function getControlTransform(rotation,zoom){for(var poses=[],_i=2;_i<arguments.length;_i++)poses[_i-2]=arguments[_i];var length=poses.length,x=poses.reduce((function(prev,pos){return prev+pos[0]}),0)/length,y=poses.reduce((function(prev,pos){return prev+pos[1]}),0)/length;return{transform:"translateZ(0px) translate("+x+"px, "+y+"px) rotate("+rotation+"rad) scale("+zoom+")"}}function getSize(target,style,isOffset,isBoxSizing){void 0===style&&(style=moveable_esm_getComputedStyle(target)),void 0===isBoxSizing&&(isBoxSizing=isOffset||"border-box"===style.boxSizing);var width=target.offsetWidth,height=target.offsetHeight,hasOffset=!isUndefined(width);if((isOffset||isBoxSizing)&&hasOffset)return[width,height];if(!hasOffset&&"svg"!==target.tagName.toLowerCase()){var bbox=target.getBBox();return[bbox.width,bbox.height]}return width=target.clientWidth,height=target.clientHeight,isOffset||isBoxSizing?[width+(parseFloat(style.borderLeftWidth)||0)+(parseFloat(style.borderRightWidth)||0),height+(parseFloat(style.borderTopWidth)||0)+(parseFloat(style.borderBottomWidth)||0)]:[width-(parseFloat(style.paddingLeft)||0)-(parseFloat(style.paddingRight)||0),height-(parseFloat(style.paddingTop)||0)-(parseFloat(style.paddingBottom)||0)]}function getRotationRad(poses,direction){return getRad(direction>0?poses[0]:poses[1],direction>0?poses[1]:poses[0])}function getTargetInfo(moveableElement,target,container,parentContainer,rootContainer){var beforeDirection=1,beforeOrigin=[0,0],targetClientRect={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},containerClientRect={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},moveableClientRect={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},result=calculateElementInfo(target,container,rootContainer,!1);if(target){var n=result.is3d?4:3,beforePosition=calculateMoveablePosition(result.offsetMatrix,plus(result.transformOrigin,function getOrigin(matrix,n){void 0===n&&(n=Math.sqrt(matrix.length));for(var originMatrix=[],w=matrix[n*n-1],i=0;i<n-1;++i)originMatrix[i]=matrix[n*(n-1)+i]/w;return originMatrix[n-1]=0,originMatrix}(result.targetMatrix,n)),result.width,result.height);beforeDirection=beforePosition.direction,beforeOrigin=plus(beforePosition.origin,[beforePosition.left-result.left,beforePosition.top-result.top]),targetClientRect=getClientRect(target),containerClientRect=getClientRect(getOffsetInfo(parentContainer,parentContainer,!0).offsetParent||document.body,!0),moveableElement&&(moveableClientRect=getClientRect(moveableElement))}return moveable_esm_assign({targetClientRect:targetClientRect,containerClientRect:containerClientRect,moveableClientRect:moveableClientRect,beforeDirection:beforeDirection,beforeOrigin:beforeOrigin,originalBeforeOrigin:beforeOrigin,target:target},result)}function getClientRect(el,isExtends){var left=0,top=0,width=0,height=0;if(el===document.body||el===document.documentElement)width=window.innerWidth,height=window.innerHeight,left=-(document.documentElement.scrollLeft||document.body.scrollLeft),top=-(document.documentElement.scrollTop||document.body.scrollTop);else{var clientRect=el.getBoundingClientRect();left=clientRect.left,top=clientRect.top,width=clientRect.width,height=clientRect.height}var rect={left:left,right:left+width,top:top,bottom:top+height,width:width,height:height};return isExtends&&(rect.clientLeft=el.clientLeft,rect.clientTop=el.clientTop,rect.clientWidth=el.clientWidth,rect.clientHeight=el.clientHeight,rect.scrollWidth=el.scrollWidth,rect.scrollHeight=el.scrollHeight,rect.overflow="visible"!==moveable_esm_getComputedStyle(el).overflow),rect}function getDirection(target){if(target){var direciton=target.getAttribute("data-direction");if(direciton){var dir=[0,0];return direciton.indexOf("w")>-1&&(dir[0]=-1),direciton.indexOf("e")>-1&&(dir[0]=1),direciton.indexOf("n")>-1&&(dir[1]=-1),direciton.indexOf("s")>-1&&(dir[1]=1),dir}}}function getAbsolutePoses(poses,dist){return[plus(dist,poses[0]),plus(dist,poses[1]),plus(dist,poses[2]),plus(dist,poses[3])]}function getAbsolutePosesByState(_a){var left=_a.left,top=_a.top;return getAbsolutePoses([_a.pos1,_a.pos2,_a.pos3,_a.pos4],[left,top])}function moveable_esm_throttle(num,unit){return unit?Math.round(num/unit)*unit:num}function throttleArray(nums,unit){return nums.forEach((function(_,i){nums[i]=moveable_esm_throttle(nums[i],unit)})),nums}function unset(self,name){self[name]&&(self[name].unset(),self[name]=null)}function fillParams(moveable,e,params){var datas=e.datas;datas.datas||(datas.datas={});var nextParams=moveable_esm_assign(moveable_esm_assign({},params),{target:moveable.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:moveable,moveable:moveable,datas:datas.datas});return datas.isStartEvent?datas.lastEvent=nextParams:datas.isStartEvent=!0,nextParams}function fillEndParams(moveable,e,params){var datas=e.datas,isDrag="isDrag"in params?params.isDrag:e.isDrag;return datas.datas||(datas.datas={}),moveable_esm_assign(moveable_esm_assign({isDrag:isDrag},params),{moveable:moveable,target:moveable.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:moveable,lastEvent:datas.lastEvent,isDouble:e.isDouble,datas:datas.datas})}function triggerEvent(moveable,name,params,isManager){return moveable.triggerEvent(name,params,isManager)}function moveable_esm_getComputedStyle(el,pseudoElt){return window.getComputedStyle(el,pseudoElt)}function filterAbles(ables,methods,triggerAblesSimultaneously){var enabledAbles={},ableGroups={};return ables.filter((function(able){var name=able.name;if(enabledAbles[name]||!methods.some((function(method){return able[method]})))return!1;if(!triggerAblesSimultaneously&&able.ableGroup){if(ableGroups[able.ableGroup])return!1;ableGroups[able.ableGroup]=!0}return enabledAbles[name]=!0,!0}))}function equals(a1,a2){return a1===a2||null==a1&&null==a2}function groupBy(arr,func){var groups=[],groupKeys=[];return arr.forEach((function(el,index){var groupKey=func(el,index,arr),keyIndex=groupKeys.indexOf(groupKey),group=groups[keyIndex]||[];-1===keyIndex&&(groupKeys.push(groupKey),groups.push(group)),group.push(el)})),groups}function flat(arr){return arr.reduce((function(prev,cur){return prev.concat(cur)}),[])}function maxOffset(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return args.sort((function(a,b){return Math.abs(b)-Math.abs(a)})),args[0]}function calculateInversePosition(matrix,pos,n){return calculate(invert(matrix,n),convertPositionMatrix(pos,n),n)}function convertDragDist(state,e){var _a,n=state.is3d?4:3;return _a=calculateInversePosition(state.rootMatrix,[e.distX,e.distY],n),e.distX=_a[0],e.distY=_a[1],e}function calculatePadding(matrix,pos,transformOrigin,origin,n){return minus(calculatePosition(matrix,plus(transformOrigin,pos),n),origin)}function convertCSSSize(value,size,isRelative){return isRelative?value/size*100+"%":value+"px"}function getTinyDist(v){return Math.abs(v)<=1e-7?0:v}function directionCondition(moveable,e){return e.isRequest?("resizable"===e.requestAble||"scalable"===e.requestAble)&&e.parentDirection:hasClass(e.inputEvent.target,prefix("direction"))}function invertObject(obj){var nextObj={};for(var name in obj)nextObj[obj[name]]=name;return nextObj}function getRefTarget(target,isSelector){return target?isString(target)?isSelector?document.querySelector(target):target:isFunction(target)?target():"current"in target?target.current:target:null}function getRefTargets(targets,isSelector){return targets?(function isArrayFormat(arr){return!(!arr||!isObject(arr))&&(isArray(arr)||"length"in arr)}(targets)?[].slice.call(targets):[targets]).reduce((function(prev,target){return isString(target)&&isSelector?moveable_esm_spreadArrays(prev,[].slice.call(document.querySelectorAll(target))):(prev.push(getRefTarget(target,isSelector)),prev)}),[]):[]}function getDragDistByState(state,dist){var rootMatrix=state.rootMatrix,is3d=state.is3d,inverseMatrix=invert(rootMatrix,is3d?4:3);return is3d||(inverseMatrix=convertDimension(inverseMatrix,3,4)),inverseMatrix[12]=0,inverseMatrix[13]=0,inverseMatrix[14]=0,function calculateMatrixDist(matrix,pos){var res=calculate(matrix,[pos[0],pos[1]||0,pos[2]||0,1],4),w=res[3]||1;return[res[0]/w,res[1]/w,res[2]/w]}(inverseMatrix,dist)}var Pinchable=makeAble("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(moveable,e){var datas=e.datas,targets=e.targets,angle=e.angle,originalDatas=e.originalDatas,_a=moveable.props,pinchable=_a.pinchable,ables=_a.ables;if(!pinchable)return!1;var eventName="onPinch"+(targets?"Group":"")+"Start",controlEventName="drag"+(targets?"Group":"")+"ControlStart",pinchAbles=(!0===pinchable?moveable.controlAbles:ables.filter((function(able){return pinchable.indexOf(able.name)>-1}))).filter((function(able){return able.canPinch&&able[controlEventName]})),params=fillParams(moveable,e,{});targets&&(params.targets=targets);var result=triggerEvent(moveable,eventName,params);datas.isPinch=!1!==result,datas.ables=pinchAbles;var isPinch=datas.isPinch;return!!isPinch&&(pinchAbles.forEach((function(able){if(originalDatas[able.name]=originalDatas[able.name]||{},able[controlEventName]){var ableEvent=moveable_esm_assign(moveable_esm_assign({},e),{datas:originalDatas[able.name],parentRotate:angle,isPinch:!0});able[controlEventName](moveable,ableEvent)}})),moveable.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},isPinch)},pinch:function(moveable,e){var datas=e.datas,pinchScale=e.scale,distance=e.distance,originalDatas=e.originalDatas,inputEvent=e.inputEvent,targets=e.targets,angle=e.angle;if(datas.isPinch){var parentDistance=distance*(1-1/pinchScale),params=fillParams(moveable,e,{});targets&&(params.targets=targets),triggerEvent(moveable,"onPinch"+(targets?"Group":""),params);var ables=datas.ables,controlEventName="drag"+(targets?"Group":"")+"Control";return ables.forEach((function(able){able[controlEventName]&&able[controlEventName](moveable,moveable_esm_assign(moveable_esm_assign({},e),{datas:originalDatas[able.name],inputEvent:inputEvent,parentDistance:parentDistance,parentRotate:angle,isPinch:!0}))})),params}},pinchEnd:function(moveable,e){var datas=e.datas,isPinch=e.isPinch,inputEvent=e.inputEvent,targets=e.targets,originalDatas=e.originalDatas;if(datas.isPinch){var eventName="onPinch"+(targets?"Group":"")+"End",params=fillEndParams(moveable,e,{isDrag:isPinch});targets&&(params.targets=targets),triggerEvent(moveable,eventName,params);var ables=datas.ables,controlEventName="drag"+(targets?"Group":"")+"ControlEnd";return ables.forEach((function(able){able[controlEventName]&&able[controlEventName](moveable,moveable_esm_assign(moveable_esm_assign({},e),{isDrag:isPinch,datas:originalDatas[able.name],inputEvent:inputEvent,isPinch:!0}))})),isPinch}},pinchGroupStart:function(moveable,e){return this.pinchStart(moveable,moveable_esm_assign(moveable_esm_assign({},e),{targets:moveable.props.targets}))},pinchGroup:function(moveable,e){return this.pinch(moveable,moveable_esm_assign(moveable_esm_assign({},e),{targets:moveable.props.targets}))},pinchGroupEnd:function(moveable,e){return this.pinchEnd(moveable,moveable_esm_assign(moveable_esm_assign({},e),{targets:moveable.props.targets}))}});function setCustomDrag(e,state,delta,isPinch,isConvert){var result=state.gesto.move(delta,e.inputEvent),datas=result.originalDatas||result.datas,draggableDatas=datas.draggable||(datas.draggable={});return moveable_esm_assign(moveable_esm_assign({},isConvert?convertDragDist(state,result):result),{isDrag:!0,isPinch:!!isPinch,parentEvent:!0,datas:draggableDatas,originalDatas:e.originalDatas})}var CustomGesto=function(){function CustomGesto(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var __proto=CustomGesto.prototype;return __proto.dragStart=function(client,e){this.isDrag=!1,this.isFlag=!1;var originalDatas=e.originalDatas;return this.datas=originalDatas,originalDatas.draggable||(originalDatas.draggable={}),moveable_esm_assign(moveable_esm_assign({},this.move(client,e.inputEvent)),{type:"dragstart"})},__proto.drag=function(client,inputEvent){return this.move([client[0]-this.prevX,client[1]-this.prevY],inputEvent)},__proto.move=function(delta,inputEvent){var clientX,clientY;return this.isFlag?(clientX=this.prevX+delta[0],clientY=this.prevY+delta[1],this.isDrag=!0):(this.prevX=delta[0],this.prevY=delta[1],this.startX=delta[0],this.startY=delta[1],clientX=delta[0],clientY=delta[1],this.isFlag=!0),this.prevX=clientX,this.prevY=clientY,{type:"drag",clientX:clientX,clientY:clientY,inputEvent:inputEvent,isDrag:this.isDrag,distX:clientX-this.startX,distY:clientY-this.startY,deltaX:delta[0],deltaY:delta[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},CustomGesto}();function fillChildEvents(moveable,name,e){var datas=e.originalDatas;datas.groupable=datas.groupable||{};var groupableDatas=datas.groupable;groupableDatas.childDatas=groupableDatas.childDatas||[];var childDatas=groupableDatas.childDatas;return moveable.moveables.map((function(_,i){return childDatas[i]=childDatas[i]||{},childDatas[i][name]=childDatas[i][name]||{},moveable_esm_assign(moveable_esm_assign({},e),{datas:childDatas[i][name],originalDatas:childDatas[i]})}))}function triggerChildGesto(moveable,able,type,delta,e,isConvert){var isStart=!!type.match(/Start$/g),isEnd=!!type.match(/End$/g),isPinch=e.isPinch,datas=e.datas,events=fillChildEvents(moveable,able.name,e),moveables=moveable.moveables,childs=events.map((function(ev,i){var childMoveable=moveables[i],childEvent=ev;isStart?childEvent=(new CustomGesto).dragStart(delta,ev):(childMoveable.state.gesto||(childMoveable.state.gesto=datas.childGestos[i]),childEvent=setCustomDrag(ev,childMoveable.state,delta,isPinch,isConvert));var result=able[type](childMoveable,moveable_esm_assign(moveable_esm_assign({},childEvent),{parentFlag:!0}));return isEnd&&(childMoveable.state.gesto=null),result}));return isStart&&(datas.childGestos=moveables.map((function(child){return child.state.gesto}))),childs}function triggerChildAbles(moveable,able,type,e,eachEvent,callback){void 0===eachEvent&&(eachEvent=function(_,ev){return ev});var isEnd=!!type.match(/End$/g),events=fillChildEvents(moveable,able.name,e),moveables=moveable.moveables;return events.map((function(ev,i){var childEvent,childMoveable=moveables[i];childEvent=eachEvent(childMoveable,ev);var result=able[type](childMoveable,moveable_esm_assign(moveable_esm_assign({},childEvent),{parentFlag:!0}));return result&&callback&&callback(childMoveable,ev,result,i),isEnd&&(childMoveable.state.gesto=null),result}))}function calculatePointerDist(moveable,e){var clientX=e.clientX,clientY=e.clientY,datas=e.datas,_a=moveable.state,moveableClientRect=_a.moveableClientRect,rootMatrix=_a.rootMatrix,is3d=_a.is3d,pos1=_a.pos1,_b=minus(calculateInversePosition(rootMatrix,[clientX-moveableClientRect.left,clientY-moveableClientRect.top],is3d?4:3),pos1),_c=getDragDist({datas:datas,distX:_b[0],distY:_b[1]});return[_c[0],_c[1]]}function setDragStart(moveable,_a){var datas=_a.datas,_b=moveable.state,allMatrix=_b.allMatrix,beforeMatrix=_b.beforeMatrix,is3d=_b.is3d,left=_b.left,top=_b.top,origin=_b.origin,offsetMatrix=_b.offsetMatrix,targetMatrix=_b.targetMatrix,transformOrigin=_b.transformOrigin,n=is3d?4:3;datas.is3d=is3d,datas.matrix=allMatrix,datas.targetMatrix=targetMatrix,datas.beforeMatrix=beforeMatrix,datas.offsetMatrix=offsetMatrix,datas.transformOrigin=transformOrigin,datas.inverseMatrix=invert(allMatrix,n),datas.inverseBeforeMatrix=invert(beforeMatrix,n),datas.absoluteOrigin=convertPositionMatrix(plus([left,top],origin),n),datas.startDragBeforeDist=calculate(datas.inverseBeforeMatrix,datas.absoluteOrigin,n),datas.startDragDist=calculate(datas.inverseMatrix,datas.absoluteOrigin,n)}function resolveTransformEvent(event,functionName){var datas=event.datas,originalDatas=event.originalDatas.beforeRenderable,index=datas.transformIndex,nextTransforms=originalDatas.nextTransforms,nextTransformAppendedIndexes=originalDatas.nextTransformAppendedIndexes,nextIndex=-1===index?nextTransforms.length:index+nextTransformAppendedIndexes.filter((function(i){return i<index})).length,result=function getTransform(transforms,index){var beforeFunctionTexts=transforms.slice(0,index<0?void 0:index),beforeFunctionTexts2=transforms.slice(0,index<0?void 0:index+1),targetFunctionText=transforms[index]||"",afterFunctionTexts=index<0?[]:transforms.slice(index),afterFunctionTexts2=index<0?[]:transforms.slice(index+1),beforeFunctions=parse(beforeFunctionTexts),beforeFunctions2=parse(beforeFunctionTexts2),targetFunctions=parse([targetFunctionText]),afterFunctions=parse(afterFunctionTexts),afterFunctions2=parse(afterFunctionTexts2),beforeFunctionMatrix=toMat(beforeFunctions),beforeFunctionMatrix2=toMat(beforeFunctions2),afterFunctionMatrix=toMat(afterFunctions),afterFunctionMatrix2=toMat(afterFunctions2),allFunctionMatrix=multiply(beforeFunctionMatrix,afterFunctionMatrix,4);return{transforms:transforms,beforeFunctionMatrix:beforeFunctionMatrix,beforeFunctionMatrix2:beforeFunctionMatrix2,targetFunctionMatrix:toMat(targetFunctions),afterFunctionMatrix:afterFunctionMatrix,afterFunctionMatrix2:afterFunctionMatrix2,allFunctionMatrix:allFunctionMatrix,beforeFunctions:beforeFunctions,beforeFunctions2:beforeFunctions2,targetFunction:targetFunctions[0],afterFunctions:afterFunctions,afterFunctions2:afterFunctions2,beforeFunctionTexts:beforeFunctionTexts,beforeFunctionTexts2:beforeFunctionTexts2,targetFunctionText:targetFunctionText,afterFunctionTexts:afterFunctionTexts,afterFunctionTexts2:afterFunctionTexts2}}(nextTransforms,nextIndex),targetFunction=result.targetFunction,matFunctionName="rotate"===functionName?"rotateZ":functionName;datas.beforeFunctionTexts=result.beforeFunctionTexts,datas.afterFunctionTexts=result.afterFunctionTexts,datas.beforeTransform=result.beforeFunctionMatrix,datas.beforeTransform2=result.beforeFunctionMatrix2,datas.targetTansform=result.targetFunctionMatrix,datas.afterTransform=result.afterFunctionMatrix,datas.afterTransform2=result.afterFunctionMatrix2,datas.targetAllTransform=result.allFunctionMatrix,targetFunction.functionName===matFunctionName?(datas.afterFunctionTexts.splice(0,1),datas.isAppendTransform=!1):(datas.isAppendTransform=!0,originalDatas.nextTransformAppendedIndexes=moveable_esm_spreadArrays(nextTransformAppendedIndexes,[nextIndex]))}function convertTransformFormat(datas,value,dist){return datas.beforeFunctionTexts.join(" ")+" "+(datas.isAppendTransform?dist:value)+" "+datas.afterFunctionTexts.join(" ")}function getTransformDist(_a){var datas=_a.datas,_b=getBeforeDragDist({datas:datas,distX:_a.distX,distY:_a.distY});return calculate(getTransfromMatrix(datas,function fromTranslation(pos,n){for(var newMatrix=createIdentityMatrix(n),i=0;i<n-1;++i)newMatrix[n*(n-1)+i]=pos[i]||0;return newMatrix}([_b[0],_b[1]],4)),convertPositionMatrix([0,0,0],4),4)}function getTransfromMatrix(datas,targetMatrix,isAfter){var beforeTransform=datas.beforeTransform,afterTransform=datas.afterTransform,beforeTransform2=datas.beforeTransform2,afterTransform2=datas.afterTransform2,targetAllTransform=datas.targetAllTransform,nextTargetMatrix=isAfter?multiply(targetAllTransform,targetMatrix,4):multiply(targetMatrix,targetAllTransform,4),res1=multiply(invert(isAfter?beforeTransform2:beforeTransform,4),nextTargetMatrix,4);return multiply(res1,invert(isAfter?afterTransform2:afterTransform,4),4)}function getBeforeDragDist(_a){var datas=_a.datas,distX=_a.distX,distY=_a.distY,inverseBeforeMatrix=datas.inverseBeforeMatrix,is3d=datas.is3d,startDragBeforeDist=datas.startDragBeforeDist,n=is3d?4:3;return minus(calculate(inverseBeforeMatrix,plus(datas.absoluteOrigin,[distX,distY]),n),startDragBeforeDist)}function getDragDist(_a,isBefore){var datas=_a.datas,distX=_a.distX,distY=_a.distY,inverseBeforeMatrix=datas.inverseBeforeMatrix,inverseMatrix=datas.inverseMatrix,is3d=datas.is3d,startDragBeforeDist=datas.startDragBeforeDist,startDragDist=datas.startDragDist,n=is3d?4:3;return minus(calculate(isBefore?inverseBeforeMatrix:inverseMatrix,plus(datas.absoluteOrigin,[distX,distY]),n),isBefore?startDragBeforeDist:startDragDist)}function getPosIndexesByDirection(direction){var indexes=[];return direction[1]>=0&&(direction[0]>=0&&indexes.push(3),direction[0]<=0&&indexes.push(2)),direction[1]<=0&&(direction[0]>=0&&indexes.push(1),direction[0]<=0&&indexes.push(0)),indexes}function getPosesByDirection(poses,direction){return getPosIndexesByDirection(direction).map((function(index){return poses[index]}))}function getPosByDirection(poses,direction){var nextPoses=getPosesByDirection(poses,direction);return[average(nextPoses.map((function(pos){return pos[0]}))),average(nextPoses.map((function(pos){return pos[1]})))]}function getNextMatrix(offsetMatrix,targetMatrix,origin,n){return multiply(offsetMatrix,getAbsoluteMatrix(targetMatrix,n,origin),n)}function fillTransformStartEvent(e){var originalDatas=e.originalDatas.beforeRenderable;return{setTransform:function(transform,index){void 0===index&&(index=-1),originalDatas.startTransforms=isArray(transform)?transform:splitSpace(transform),setTransformIndex(e,index)},setTransformIndex:function(index){setTransformIndex(e,index)}}}function setDefaultTransformIndex(e,property){setTransformIndex(e,findIndex(e.originalDatas.beforeRenderable.startTransforms,(function(func){return 0===func.indexOf(property+"(")})))}function setTransformIndex(e,index){var originalDatas=e.originalDatas.beforeRenderable,datas=e.datas;if(datas.transformIndex=index,-1!==index){var transform=originalDatas.startTransforms[index];if(transform){var info=parse([transform]);datas.startValue=info[0].functionValue}}}function fillOriginalTransform(e,transform){e.originalDatas.beforeRenderable.nextTransforms=splitSpace(transform)}function fillTransformEvent(moveable,nextTransform,delta,isPinch,e){return fillOriginalTransform(e,nextTransform),{transform:nextTransform,drag:Draggable.drag(moveable,setCustomDrag(e,moveable.state,delta,isPinch,!1))}}function getTranslateDist(moveable,transform,fixedDirection,fixedPosition,datas){var state=moveable.state,left=state.left,top=state.top,groupable=moveable.props.groupable,groupLeft=groupable?left:0,groupTop=groupable?top:0,dist=minus(fixedPosition,getDirectionOffset(moveable,fixedDirection,function getNextTransformMatrix(state,datas,transform){var transformOrigin=state.transformOrigin,offsetMatrix=state.offsetMatrix,is3d=state.is3d,beforeTransform=datas.beforeTransform,afterTransform=datas.afterTransform,n=is3d?4:3;return getNextMatrix(offsetMatrix,convertDimension(multiply(multiply(beforeTransform,parseMat([transform]),4),afterTransform,4),4,n),transformOrigin,n)}(moveable.state,datas,transform)));return minus(dist,[groupLeft,groupTop])}function getOriginDirection(moveable){var _a=moveable.state,width=_a.width,height=_a.height,transformOrigin=_a.transformOrigin;return[transformOrigin[0]/(width/2)-1,transformOrigin[1]/(height/2)-1]}function getDirectionOffset(moveable,direction,nextMatrix){void 0===nextMatrix&&(nextMatrix=moveable.state.allMatrix);var _a=moveable.state,width=_a.width,height=_a.height,n=_a.is3d?4:3;return calculatePosition(nextMatrix,[width/2*(1+direction[0]),height/2*(1+direction[1])],n)}function getResizeDist(moveable,width,height,fixedDirection,fixedPosition,transformOrigin){var groupable=moveable.props.groupable,_a=moveable.state,prevOrigin=_a.transformOrigin,targetMatrix=_a.targetMatrix,offsetMatrix=_a.offsetMatrix,is3d=_a.is3d,prevWidth=_a.width,prevHeight=_a.height,left=_a.left,top=_a.top,n=is3d?4:3,groupLeft=groupable?left:0,groupTop=groupable?top:0;return minus(function moveable_esm_getDist(startPos,matrix,width,height,n,fixedDirection){var fixedPos=getPosByDirection(calculatePoses(matrix,width,height,n),fixedDirection);return[startPos[0]-fixedPos[0],startPos[1]-fixedPos[1]]}(fixedPosition,getNextMatrix(offsetMatrix,targetMatrix,function calculateTransformOrigin(transformOrigin,width,height,prevWidth,prevHeight,prevOrigin){return void 0===prevWidth&&(prevWidth=width),void 0===prevHeight&&(prevHeight=height),void 0===prevOrigin&&(prevOrigin=[0,0]),transformOrigin?transformOrigin.map((function(pos,i){var _a=splitUnit(pos),value=_a.value,unit=_a.unit,prevSize=i?prevHeight:prevWidth,size=i?height:width;return"%"===pos||isNaN(value)?size*(prevSize?prevOrigin[i]/prevSize:0):"%"!==unit?value:size*value/100})):prevOrigin}(transformOrigin,width,height,prevWidth,prevHeight,prevOrigin),n),width,height,n,fixedDirection),[groupLeft,groupTop])}function getAbsolutePosition(moveable,direction){return getPosByDirection(getAbsolutePosesByState(moveable.state),direction)}function calculateContainerPos(rootMatrix,containerRect,n){var clientPos=calculatePosition(rootMatrix,[containerRect.clientLeft,containerRect.clientTop],n);return[containerRect.left+clientPos[0],containerRect.top+clientPos[1]]}function getGapGuidelines(guidelines,type,snapThreshold,index,_a,_b){var start=_a[0],end=_a[1],otherStart=_b[0],otherEnd=_b[1],totalGuidelines=[],otherIndex=index?0:1,otherType="vertical"===type?"horizontal":"vertical",elementGuidelines=groupBy(guidelines.filter((function(_a){return _a.type===type})),(function(_a){return _a.element})).map((function(group){return group[0]})).filter((function(_a){var pos=_a.pos,sizes=_a.sizes;return pos[otherIndex]<=otherEnd&&otherStart<=pos[otherIndex]+sizes[otherIndex]}));return elementGuidelines.forEach((function(guideline1){var elementStart=guideline1.pos[index],elementEnd=elementStart+guideline1.sizes[index];elementGuidelines.forEach((function(guideline2){var guideline2Pos=guideline2.pos,guideline2Sizes=guideline2.sizes,guideline2Element=guideline2.element,guidline2ClassName=guideline2.className,targetStart=guideline2Pos[index],targetEnd=targetStart+guideline2Sizes[index],pos=0,gap=0,canSnap=!0;if(elementEnd<=targetStart)start<(pos=targetEnd-(gap=elementEnd-targetStart))-snapThreshold&&(canSnap=!1);else{if(!(targetEnd<=elementStart))return;end>(pos=targetStart-(gap=elementStart-targetEnd))+snapThreshold&&(canSnap=!1)}if(canSnap&&totalGuidelines.push({pos:"vertical"===otherType?[pos,guideline2Pos[1]]:[guideline2Pos[0],pos],element:guideline2Element,sizes:guideline2Sizes,size:0,type:otherType,gap:gap,className:guidline2ClassName,gapGuidelines:elementGuidelines}),elementEnd<=start&&end<=targetStart){var centerPos=(targetStart+elementEnd-(end-start))/2;moveable_esm_throttle(start-(centerPos-snapThreshold),.1)>=0&&totalGuidelines.push({pos:"vertical"===otherType?[centerPos,guideline2Pos[1]]:[guideline2Pos[0],centerPos],className:guidline2ClassName,element:guideline2Element,sizes:guideline2Sizes,size:0,type:otherType,gap:elementEnd-start,gapGuidelines:elementGuidelines})}}))})),totalGuidelines}function getDefaultGuidelines(horizontalGuidelines,verticalGuidelines,width,height,clientLeft,clientTop,snapOffset){void 0===clientLeft&&(clientLeft=0),void 0===clientTop&&(clientTop=0),void 0===snapOffset&&(snapOffset={left:0,top:0,right:0,bottom:0});var guidelines=[],snapOffsetLeft=snapOffset.left,snapOffsetTop=snapOffset.top,snapOffsetBottom=snapOffset.bottom,snapWidth=width+snapOffset.right-snapOffsetLeft,snapHeight=height+snapOffsetBottom-snapOffsetTop;return horizontalGuidelines&&horizontalGuidelines.forEach((function(pos){guidelines.push({type:"horizontal",pos:[snapOffsetLeft,moveable_esm_throttle(pos-clientTop+snapOffsetTop,.1)],size:snapWidth})})),verticalGuidelines&&verticalGuidelines.forEach((function(pos){guidelines.push({type:"vertical",pos:[moveable_esm_throttle(pos-clientLeft+snapOffsetLeft,.1),snapOffsetTop],size:snapHeight})})),guidelines}function calculateElementGuidelines(moveable,values){var guidelines=[];if(!values.length)return guidelines;var state=moveable.state,snapCenter=moveable.props.snapCenter,containerClientRect=state.containerClientRect,_a=state.targetClientRect,clientTop=_a.top,clientLeft=_a.left,rootMatrix=state.rootMatrix,n=state.is3d?4:3,_b=calculateContainerPos(rootMatrix,containerClientRect,n),containerLeft=_b[0],containerTop=_b[1],_c=getMinMaxs(getAbsolutePosesByState(state)),_d=minus([_c.minX,_c.minY],calculateInversePosition(rootMatrix,[clientLeft-containerLeft,clientTop-containerTop],n)).map((function(pos){return function roundSign(num){return Math.round(num%1==-.5?num-1:num)}(pos)})),distLeft=_d[0],distTop=_d[1];return values.forEach((function(value){var element=value.element,topValue=value.top,leftValue=value.left,rightValue=value.right,bottomValue=value.bottom,className=value.className,rect=element.getBoundingClientRect(),left=rect.left-containerLeft,top=rect.top-containerTop,bottom=top+rect.height,right=left+rect.width,_a=calculateInversePosition(rootMatrix,[left,top],n),elementLeft=_a[0],elementTop=_a[1],_b=calculateInversePosition(rootMatrix,[right,bottom],n),elementRight=_b[0],elementBottom=_b[1],width=elementRight-elementLeft,height=elementBottom-elementTop,sizes=[width,height];!1!==topValue&&guidelines.push({type:"vertical",element:element,pos:[moveable_esm_throttle(elementLeft+distLeft,.1),elementTop],size:height,sizes:sizes,className:className}),!1!==bottomValue&&guidelines.push({type:"vertical",element:element,pos:[moveable_esm_throttle(elementRight+distLeft,.1),elementTop],size:height,sizes:sizes,className:className}),!1!==leftValue&&guidelines.push({type:"horizontal",element:element,pos:[elementLeft,moveable_esm_throttle(elementTop+distTop,.1)],size:width,sizes:sizes,className:className}),!1!==rightValue&&guidelines.push({type:"horizontal",element:element,pos:[elementLeft,moveable_esm_throttle(elementBottom+distTop,.1)],size:width,sizes:sizes,className:className}),snapCenter&&(guidelines.push({type:"vertical",element:element,pos:[moveable_esm_throttle((elementLeft+elementRight)/2+distLeft,.1),elementTop],size:height,sizes:sizes,center:!0,className:className}),guidelines.push({type:"horizontal",element:element,pos:[elementLeft,moveable_esm_throttle((elementTop+elementBottom)/2+distTop,.1)],size:width,sizes:sizes,center:!0,className:className}))})),guidelines}function getElementGuidelines(moveable,isRefresh,prevGuidelines){void 0===prevGuidelines&&(prevGuidelines=[]);var guidelines=[],state=moveable.state;if(isRefresh&&state.guidelines&&state.guidelines.length)return guidelines;var _a=moveable.props.elementGuidelines,elementGuidelines=void 0===_a?[]:_a;if(!elementGuidelines.length)return guidelines;var prevValues=state.elementGuidelineValues||[],nextValues=elementGuidelines.map((function(el){return isObject(el)&&"element"in el?el:{element:getRefTarget(el,!0)}})).filter((function(value){return value.element}));state.elementGuidelineValues=nextValues;var _b=function children_differ_esm_diff(prevList,list){return diff(prevList,list,findKeyCallback)}(prevValues.map((function(v){return v.element})),nextValues.map((function(v){return v.element}))),added=_b.added,removedElements=_b.removed.map((function(index){return prevValues[index].element})),addedGuidelines=calculateElementGuidelines(moveable,added.map((function(index){return nextValues[index]})).filter((function(value){return value.refresh&&isRefresh||!value.refresh&&!isRefresh})));return moveable_esm_spreadArrays(prevGuidelines.filter((function(guideline){return-1===removedElements.indexOf(guideline.element)})),addedGuidelines)}function getTotalGuidelines(moveable){var _a=moveable.state,snapOffset=_a.snapOffset,staticGuidelines=_a.staticGuidelines,_b=_a.containerClientRect,overflow=_b.overflow,containerHeight=_b.scrollHeight,containerWidth=_b.scrollWidth,containerClientHeight=_b.clientHeight,containerClientWidth=_b.clientWidth,clientLeft=_b.clientLeft,clientTop=_b.clientTop,_c=moveable.props,_d=_c.snapHorizontal,snapHorizontal=void 0===_d||_d,_e=_c.snapVertical,snapVertical=void 0===_e||_e,_f=_c.snapGap,snapGap=void 0===_f||_f,verticalGuidelines=_c.verticalGuidelines,horizontalGuidelines=_c.horizontalGuidelines,_g=_c.snapThreshold,snapThreshold=void 0===_g?5:_g,_h=_c.snapGridWidth,snapGridWidth=void 0===_h?0:_h,_j=_c.snapGridHeight,snapGridHeight=void 0===_j?0:_j,totalGuidelines=moveable_esm_spreadArrays(staticGuidelines,getElementGuidelines(moveable,!0));if(snapGap){var _k=getRect(getAbsolutePosesByState(moveable.state)),top=_k.top,left=_k.left,bottom=_k.bottom,right=_k.right,elementGuidelines=staticGuidelines.filter((function(_a){return _a.element}));totalGuidelines.push.apply(totalGuidelines,moveable_esm_spreadArrays(getGapGuidelines(elementGuidelines,"horizontal",snapThreshold,0,[left,right],[top,bottom]),getGapGuidelines(elementGuidelines,"vertical",snapThreshold,1,[top,bottom],[left,right])))}return totalGuidelines.push.apply(totalGuidelines,function getGridGuidelines(snapGridWidth,snapGridHeight,containerWidth,containerHeight,clientLeft,clientTop){void 0===clientLeft&&(clientLeft=0);void 0===clientTop&&(clientTop=0);var guidelines=[];if(snapGridHeight)for(var pos=0;pos<=containerHeight;pos+=snapGridHeight)guidelines.push({type:"horizontal",pos:[0,moveable_esm_throttle(pos-clientTop,.1)],size:containerWidth,hide:!0});if(snapGridWidth)for(pos=0;pos<=containerWidth;pos+=snapGridWidth)guidelines.push({type:"vertical",pos:[moveable_esm_throttle(pos-clientLeft,.1),0],size:containerHeight,hide:!0});return guidelines}(snapGridWidth,snapGridHeight,overflow?containerWidth:containerClientWidth,overflow?containerHeight:containerClientHeight,clientLeft,clientTop)),totalGuidelines.push.apply(totalGuidelines,getDefaultGuidelines(snapHorizontal&&horizontalGuidelines||!1,snapVertical&&verticalGuidelines||!1,overflow?containerWidth:containerClientWidth,overflow?containerHeight:containerClientHeight,clientLeft,clientTop,snapOffset)),totalGuidelines}function checkMoveableSnapPoses(moveable,posesX,posesY,snapCenter,customSnapThreshold){var props=moveable.props,_a=props.snapElement,snapElement=void 0===_a||_a,snapThreshold=function selectValue(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];for(var length=values.length-1,i=0;i<length;++i){var value=values[i];if(!isUndefined(value))return value}return values[length]}(customSnapThreshold,props.snapThreshold,5);return checkSnapPoses(moveable.state.guidelines,posesX,posesY,{snapThreshold:snapThreshold,snapCenter:snapCenter,snapElement:snapElement})}function checkSnapPoses(guidelines,posesX,posesY,options){return{vertical:checkSnap(guidelines,"vertical",posesX,options),horizontal:checkSnap(guidelines,"horizontal",posesY,options)}}function checkSnaps(moveable,rect,isCenter,customSnapThreshold){var isSnapCenter=moveable.props.snapCenter&&isCenter,verticalNames=["left","right"],horizontalNames=["top","bottom"];return isSnapCenter&&(verticalNames.push("center"),horizontalNames.push("middle")),verticalNames=verticalNames.filter((function(name){return name in rect})),horizontalNames=horizontalNames.filter((function(name){return name in rect})),checkMoveableSnapPoses(moveable,verticalNames.map((function(name){return rect[name]})),horizontalNames.map((function(name){return rect[name]})),isSnapCenter,customSnapThreshold)}function getNearestSnapGuidelineInfo(snapInfo){var isSnap=snapInfo.isSnap;if(!isSnap)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var posInfo=snapInfo.posInfos[0],guidelineInfo=posInfo.guidelineInfos[0],offset=guidelineInfo.offset,dist=guidelineInfo.dist,guideline=guidelineInfo.guideline;return{isSnap:isSnap,offset:offset,dist:dist,pos:posInfo.pos,guideline:guideline}}function checkSnap(guidelines,targetType,targetPoses,_a){var _b=void 0===_a?{}:_a,_c=_b.snapThreshold,snapThreshold=void 0===_c?5:_c,snapElement=_b.snapElement,snapCenter=_b.snapCenter;if(!guidelines||!guidelines.length)return{isSnap:!1,index:-1,posInfos:[]};var posType="vertical"===targetType?0:1,snapPosInfos=targetPoses.map((function(targetPos,index){var guidelineInfos=guidelines.map((function(guideline){var pos=guideline.pos,offset=targetPos-pos[posType];return{offset:offset,dist:Math.abs(offset),guideline:guideline}})).filter((function(_a){var guideline=_a.guideline,dist=_a.dist,type=guideline.type,center=guideline.center,element=guideline.element;return!(!snapElement&&element||!snapCenter&&center||type!==targetType||dist>snapThreshold)})).sort((function(a,b){return a.dist-b.dist}));return{pos:targetPos,index:index,guidelineInfos:guidelineInfos}})).filter((function(snapPosInfo){return snapPosInfo.guidelineInfos.length>0})).sort((function(a,b){return a.guidelineInfos[0].dist-b.guidelineInfos[0].dist})),isSnap=snapPosInfos.length>0;return{isSnap:isSnap,index:isSnap?snapPosInfos[0].index:-1,posInfos:snapPosInfos}}function checkSnapBoundPriority(a,b){var aDist=Math.abs(a.offset),bDist=Math.abs(b.offset);return a.isBound&&b.isBound?bDist-aDist:a.isBound?-1:b.isBound?1:a.isSnap&&b.isSnap?bDist-aDist:a.isSnap?-1:b.isSnap||aDist<1e-7?1:bDist<1e-7?-1:aDist-bDist}function getNearOffsetInfo(offsets,index){return offsets.slice().sort((function(a,b){var aSign=a.sign[index],bSign=b.sign[index],aOffset=a.offset[index],bOffset=b.offset[index];return aSign?bSign?checkSnapBoundPriority({isBound:a.isBound,isSnap:a.isSnap,offset:aOffset},{isBound:b.isBound,isSnap:b.isSnap,offset:bOffset}):-1:1}))[0]}function isStartLine(dot,line){var cx=average([line[0][0],line[1][0]]),cy=average([line[0][1],line[1][1]]);return{vertical:cx<=dot[0],horizontal:cy<=dot[1]}}function hitTestLine(dot,_a){var test1,test2,pos1=_a[0],pos2=_a[1],dx=pos2[0]-pos1[0],dy=pos2[1]-pos1[1];if(Math.abs(dx)<1e-7&&(dx=0),Math.abs(dy)<1e-7&&(dy=0),dx)if(dy){test1=dy/dx*(dot[0]-pos1[0])+pos1[1],test2=dot[1]}else test1=pos1[1],test2=dot[1];else test1=pos1[0],test2=dot[0];return test1-test2}function isSameStartLine(dots,line,error){void 0===error&&(error=1e-7);var centerSign=hitTestLine(dots[0],line)<=0;return dots.slice(1).every((function(dot){var value=hitTestLine(dot,line);return value<=0===centerSign||Math.abs(value)<=error}))}function checkInnerBoundDot(pos,start,end,isStart,threshold){return void 0===threshold&&(threshold=0),isStart&&start-threshold<=pos||!isStart&&pos<=end+threshold?{isBound:!0,offset:isStart?start-pos:end-pos}:{isBound:!1,offset:0}}function checkLineBoundCollision(line,boundLine,isStart,threshold,isRender){var dot1=line[0],dot2=line[1],boundDot1=boundLine[0],boundDot2=boundLine[1],dy1=getTinyDist(dot2[1]-dot1[1]),dx1=getTinyDist(dot2[0]-dot1[0]),dy2=getTinyDist(boundDot2[1]-boundDot1[1]);if(!getTinyDist(boundDot2[0]-boundDot1[0])){if(isRender&&!dy1)return{isBound:!1,offset:0};if(dx1)return checkInnerBoundDot(dy1/dx1*(boundDot1[0]-dot1[0])+dot1[1],boundDot1[1],boundDot2[1],isStart,threshold);var offset=boundDot1[0]-dot1[0];return{isBound:isBound=Math.abs(offset)<=(threshold||0),offset:isBound?offset:0}}if(!dy2){if(isRender&&!dx1)return{isBound:!1,offset:0};if(dy1)return checkInnerBoundDot((boundDot1[1]-dot1[1])/(dy1/dx1)+dot1[0],boundDot1[0],boundDot2[0],isStart,threshold);var isBound;offset=boundDot1[1]-dot1[1];return{isBound:isBound=Math.abs(offset)<=(threshold||0),offset:isBound?offset:0}}return{isBound:!1,offset:0}}function getInnerBoundInfo(moveable,lines,center,datas){return lines.map((function(_a){var multiple=_a[0],pos1=_a[1],pos2=_a[2],_b=function checkInnerBound(moveable,line,center){var bounds=moveable.props.innerBounds;if(!bounds)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var left=bounds.left,top=bounds.top,width=bounds.width,height=bounds.height,leftLine=[[left,top],[left,top+height]],topLine=[[left,top],[left+width,top]],rightLine=[[left+width,top],[left+width,top+height]],bottomLine=[[left,top+height],[left+width,top+height]],_a=isStartLine(center,line),isHorizontalStart=_a.horizontal,isVerticalStart=_a.vertical;if(isSameStartLine([center,[left,top],[left+width,top],[left,top+height],[left+width,top+height]],line))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var topBoundInfo=checkLineBoundCollision(line,topLine,isVerticalStart),bottomBoundInfo=checkLineBoundCollision(line,bottomLine,isVerticalStart),leftBoundInfo=checkLineBoundCollision(line,leftLine,isHorizontalStart),rightBoundInfo=checkLineBoundCollision(line,rightLine,isHorizontalStart),isAllVerticalBound=topBoundInfo.isBound&&bottomBoundInfo.isBound,isVerticalBound=topBoundInfo.isBound||bottomBoundInfo.isBound,isAllHorizontalBound=leftBoundInfo.isBound&&rightBoundInfo.isBound,isHorizontalBound=leftBoundInfo.isBound||rightBoundInfo.isBound,verticalOffset=maxOffset(topBoundInfo.offset,bottomBoundInfo.offset),horizontalOffset=maxOffset(leftBoundInfo.offset,rightBoundInfo.offset),offset=[0,0],isBound=!1,isAllBound=!1;return Math.abs(horizontalOffset)<Math.abs(verticalOffset)?(offset=[verticalOffset,0],isBound=isVerticalBound,isAllBound=isAllVerticalBound):(offset=[0,horizontalOffset],isBound=isHorizontalBound,isAllBound=isAllHorizontalBound),{isAllBound:isAllBound,isVerticalBound:isVerticalBound,isHorizontalBound:isHorizontalBound,isBound:isBound,offset:offset}}(moveable,[pos1,pos2],center),isBound=_b.isBound,offset=_b.offset,isVerticalBound=_b.isVerticalBound,isHorizontalBound=_b.isHorizontalBound,sizeOffset=getDragDist({datas:datas,distX:offset[0],distY:offset[1]}).map((function(size,i){return size*(multiple[i]?2/multiple[i]:0)}));return{sign:multiple,isBound:isBound,isVerticalBound:isVerticalBound,isHorizontalBound:isHorizontalBound,isSnap:!1,offset:sizeOffset}}))}function getInnerBoundDragInfo(moveable,poses,datas){var _a,innerBoundInfo=getInnerBoundInfo(moveable,getCheckInnerBoundLines(poses,[0,0],!1).map((function(_a){var sign=_a[0],pos1=_a[1],pos2=_a[2];return[sign.map((function(dir){return 2*Math.abs(dir)})),pos1,pos2]})),getPosByDirection(poses,[0,0]),datas),widthOffsetInfo=getNearOffsetInfo(innerBoundInfo,0),heightOffsetInfo=getNearOffsetInfo(innerBoundInfo,1),verticalOffset=0,horizontalOffset=0,isVerticalBound=widthOffsetInfo.isVerticalBound||heightOffsetInfo.isVerticalBound,isHorizontalBound=widthOffsetInfo.isHorizontalBound||heightOffsetInfo.isHorizontalBound;return(isVerticalBound||isHorizontalBound)&&(verticalOffset=(_a=function getInverseDragDist(_a,isBefore){var datas=_a.datas,distX=_a.distX,distY=_a.distY,beforeMatrix=datas.beforeMatrix,matrix=datas.matrix,is3d=datas.is3d,startDragBeforeDist=datas.startDragBeforeDist,startDragDist=datas.startDragDist,absoluteOrigin=datas.absoluteOrigin,n=is3d?4:3;return minus(calculate(isBefore?beforeMatrix:matrix,plus(isBefore?startDragBeforeDist:startDragDist,[distX,distY]),n),absoluteOrigin)}({datas:datas,distX:-widthOffsetInfo.offset[0],distY:-heightOffsetInfo.offset[1]}))[0],horizontalOffset=_a[1]),{vertical:{isBound:isVerticalBound,offset:verticalOffset},horizontal:{isBound:isHorizontalBound,offset:horizontalOffset}}}function getCheckInnerBoundLines(poses,direction,keepRatio){return function getCheckSnapLineDirections(direction,keepRatio){var lineDirections=[],x=direction[0],y=direction[1];return x&&y?lineDirections.push([[0,2*y],direction,[-x,y]],[[2*x,0],direction,[x,-y]]):x?(lineDirections.push([[2*x,0],[x,1],[x,-1]]),keepRatio&&lineDirections.push([[0,-1],[x,-1],[-x,-1]],[[0,1],[x,1],[-x,1]])):y?(lineDirections.push([[0,2*y],[1,y],[-1,y]]),keepRatio&&lineDirections.push([[-1,0],[-1,y],[-1,-y]],[[1,0],[1,y],[1,-y]])):lineDirections.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),lineDirections}(direction,keepRatio).map((function(_a){var sign=_a[0],dir1=_a[1],dir2=_a[2];return[sign,getPosByDirection(poses,dir1),getPosByDirection(poses,dir2)]}))}function isBoundRotate(relativePoses,boundDots,center,rad){var nextPoses=rad?relativePoses.map((function(pos){return matrix_esm_rotate(pos,rad)})):relativePoses,dots=moveable_esm_spreadArrays([center],boundDots);return[[nextPoses[0],nextPoses[1]],[nextPoses[1],nextPoses[3]],[nextPoses[3],nextPoses[2]],[nextPoses[2],nextPoses[0]]].some((function(line){return!isSameStartLine(dots,line)}))}function checkRotateInnerBounds(moveable,prevPoses,nextPoses,origin,rotation){var bounds=moveable.props.innerBounds,rad=rotation*Math.PI/180;if(!bounds)return[];var left=bounds.left,top=bounds.top,width=bounds.width,height=bounds.height,relativeLeft=left-origin[0],relativeRight=left+width-origin[0],relativeTop=top-origin[1],relativeBottom=top+height-origin[1],dots=[[relativeLeft,relativeTop],[relativeRight,relativeTop],[relativeLeft,relativeBottom],[relativeRight,relativeBottom]],center=getPosByDirection(nextPoses,[0,0]);if(!isBoundRotate(nextPoses,dots,center,0))return[];var result=[],dotInfos=dots.map((function(dot){return[getDistSize(dot),getRad([0,0],dot)]}));return[[nextPoses[0],nextPoses[1]],[nextPoses[1],nextPoses[3]],[nextPoses[3],nextPoses[2]],[nextPoses[2],nextPoses[0]]].forEach((function(line){var lineRad=getRad([0,0],function solveReverseLine(_a){var pos1=_a[0],pos2=_a[1],dx=pos2[0]-pos1[0],dy=pos2[1]-pos1[1];if(!dx)return[pos1[0],0];if(!dy)return[0,pos1[1]];var a=dy/dx,b=-a*pos1[0]+pos1[1];return[-b/(a+1/a),b/(a*a+1)]}(line)),lineDist=function getDistPointLine(_a){var pos1=_a[0],pos2=_a[1],dx=pos2[0]-pos1[0],dy=pos2[1]-pos1[1];if(!dx)return Math.abs(pos1[0]);if(!dy)return Math.abs(pos1[1]);var a=dy/dx;return Math.abs((-a*pos1[0]+pos1[1])/Math.sqrt(Math.pow(a,2)+1))}(line);result.push.apply(result,dotInfos.filter((function(_a){var dotDist=_a[0];return dotDist&&lineDist<=dotDist})).map((function(_a){var dotDist=_a[0],dotRad=_a[1],distRad=Math.acos(dotDist?lineDist/dotDist:0);return[rad+(dotRad+distRad)-lineRad,rad+(dotRad-distRad)-lineRad]})).reduce((function(prev,cur){return prev.push.apply(prev,cur),prev}),[]).filter((function(nextRad){return!isBoundRotate(prevPoses,dots,center,nextRad)})).map((function(nextRad){return moveable_esm_throttle(180*nextRad/Math.PI,1e-7)})))})),result}function checkBoundPoses(bounds,verticalPoses,horizontalPoses){var _a=bounds||{},_b=_a.position,position=void 0===_b?"client":_b,_c=_a.left,left=void 0===_c?-1/0:_c,_d=_a.top,top=void 0===_d?-1/0:_d,_e=_a.right,right=void 0===_e?1/0:_e,_f=_a.bottom,nextBounds={position:position,left:left,top:top,right:right,bottom:void 0===_f?1/0:_f};return{vertical:checkBounds(nextBounds,verticalPoses,!0),horizontal:checkBounds(nextBounds,horizontalPoses,!1)}}function getBounds(moveable,externalBounds){var _a=moveable.state,_b=_a.containerClientRect,containerHeight=_b.clientHeight,containerWidth=_b.clientWidth,clientLeft=_b.clientLeft,clientTop=_b.clientTop,_c=_a.snapOffset,snapOffsetLeft=_c.left,snapOffsetTop=_c.top,snapOffsetRight=_c.right,snapOffsetBottom=_c.bottom,bounds=externalBounds||moveable.props.bounds||{},isCSS="css"===(bounds.position||"client"),_d=bounds.left,left=void 0===_d?-1/0:_d,_e=bounds.top,top=void 0===_e?-1/0:_e,_f=bounds.right,right=void 0===_f?isCSS?-1/0:1/0:_f,_g=bounds.bottom,bottom=void 0===_g?isCSS?-1/0:1/0:_g;return isCSS&&(right=containerWidth+snapOffsetRight-snapOffsetLeft-right,bottom=containerHeight+snapOffsetBottom-snapOffsetTop-bottom),{left:left+snapOffsetLeft-clientLeft,right:right+snapOffsetLeft-clientLeft,top:top+snapOffsetTop-clientTop,bottom:bottom+snapOffsetTop-clientTop}}function checkBounds(bounds,poses,isVertical){var startBoundPos=bounds[isVertical?"left":"top"],endBoundPos=bounds[isVertical?"right":"bottom"],minPos=Math.min.apply(Math,poses),maxPos=Math.max.apply(Math,poses),boundInfos=[];return startBoundPos+1>minPos&&boundInfos.push({isBound:!0,offset:minPos-startBoundPos,pos:startBoundPos}),endBoundPos-1<maxPos&&boundInfos.push({isBound:!0,offset:maxPos-endBoundPos,pos:endBoundPos}),boundInfos.length||boundInfos.push({isBound:!1,offset:0,pos:0}),boundInfos.sort((function(a,b){return Math.abs(b.offset)-Math.abs(a.offset)}))}function isBoundRotate$1(relativePoses,boundRect,rad){return(rad?relativePoses.map((function(pos){return matrix_esm_rotate(pos,rad)})):relativePoses).some((function(pos){return pos[0]<boundRect.left&&Math.abs(pos[0]-boundRect.left)>.1||pos[0]>boundRect.right&&Math.abs(pos[0]-boundRect.right)>.1||pos[1]<boundRect.top&&Math.abs(pos[1]-boundRect.top)>.1||pos[1]>boundRect.bottom&&Math.abs(pos[1]-boundRect.bottom)>.1}))}function checkRotateBounds(moveable,prevPoses,nextPoses,origin,rotation){if(!moveable.props.bounds)return[];var rad=rotation*Math.PI/180,_a=getBounds(moveable),left=_a.left,top=_a.top,right=_a.right,bottom=_a.bottom,relativeLeft=left-origin[0],relativeRight=right-origin[0],relativeTop=top-origin[1],relativeBottom=bottom-origin[1],boundRect={left:relativeLeft,top:relativeTop,right:relativeRight,bottom:relativeBottom};if(!isBoundRotate$1(nextPoses,boundRect,0))return[];var result=[];return[[relativeLeft,0],[relativeRight,0],[relativeTop,1],[relativeBottom,1]].forEach((function(_a){var boundPos=_a[0],index=_a[1];nextPoses.forEach((function(nextPos){var relativeRad1=getRad([0,0],nextPos);result.push.apply(result,function boundRotate(vec,boundPos,index){var r=getDistSize(vec),nextPos=Math.sqrt(r*r-boundPos*boundPos)||0;return[nextPos,-nextPos].sort((function(a,b){return Math.abs(a-vec[index?0:1])-Math.abs(b-vec[index?0:1])})).map((function(pos){return getRad([0,0],index?[pos,boundPos]:[boundPos,pos])}))}(nextPos,boundPos,index).map((function(relativeRad2){return rad+relativeRad2-relativeRad1})).filter((function(nextRad){return!isBoundRotate$1(prevPoses,boundRect,nextRad)})).map((function(nextRad){return moveable_esm_throttle(180*nextRad/Math.PI,1e-7)})))}))})),result}var DIRECTION_NAMES={horizontal:["left","top","width","Y","X"],vertical:["top","left","height","X","Y"]};function groupByElementGuidelines(guidelines,clientPos,size,index){var groupInfos=[],group=groupBy(guidelines.filter((function(_a){var element=_a.element,gap=_a.gap;return element&&!gap})),(function(_a){var element=_a.element,pos=_a.pos,elementPos=pos[index],groupKey=(Math.min(0,elementPos-clientPos)<0?-1:1)+"_"+pos[index?0:1],groupInfo=function utils_esm_find(arr,callback,defalutValue){var index=findIndex(arr,callback);return index>-1?arr[index]:defalutValue}(groupInfos,(function(_a){var groupElement=_a[0],groupPos=_a[1];return element===groupElement&&elementPos===groupPos}));return groupInfo?groupInfo[2]:(groupInfos.push([element,elementPos,groupKey]),groupKey)}));return group.forEach((function(elementGuidelines){elementGuidelines.sort((function(a,b){return getElementGuidelineDist(a.pos[index],a.size,clientPos,size).size-getElementGuidelineDist(b.pos[index],a.size,clientPos,size).size||a.pos[index?0:1]-b.pos[index?0:1]}))})),group}function getElementGuidelineDist(elementPos,elementSize,targetPos,targetSize){var relativePos=elementPos-targetPos,startPos=relativePos<0?relativePos+elementSize:targetSize;return{size:(relativePos<0?0:relativePos)-startPos,pos:startPos}}function renderInnerGuideline(info,React){return function renderGuideline(info,React){var _a,direction=info.direction,classNames=info.classNames,size=info.size,pos=info.pos,zoom=info.zoom,key=info.key,isHorizontal="horizontal"===direction,scaleDirection=isHorizontal?"Y":"X";return React.createElement("div",{key:key,className:classNames.join(" "),style:(_a={},_a[isHorizontal?"width":"height"]=""+size,_a.transform="translate("+pos[0]+", "+pos[1]+") translate"+scaleDirection+"(-50%) scale"+scaleDirection+"("+zoom+")",_a)})}(moveable_esm_assign(moveable_esm_assign({},info),{classNames:moveable_esm_spreadArrays([prefix("line","guideline",info.direction)],info.classNames).filter((function(className){return className})),size:info.size||info.sizeValue+"px",pos:info.pos||info.posValue.map((function(v){return moveable_esm_throttle(v,.1)+"px"}))}),React)}function renderElementGroups(moveable,direction,groups,minPos,clientPos,clientSize,targetPos,snapThreshold,snapDigit,index,snapDistFormat,React){var _a=moveable.props,zoom=_a.zoom,_b=_a.isDisplaySnapDigit,isDisplaySnapDigit=void 0===_b||_b,_c=DIRECTION_NAMES[direction],posName1=_c[0],posName2=_c[1],sizeName=_c[2],scaleDirection=_c[4];return flat(groups.map((function(elementGuidelines,i){var isFirstRenderSize=!0;return elementGuidelines.map((function(_a,j){var _b,pos=_a.pos,size=_a.size,_c=getElementGuidelineDist(pos[index],size,clientPos,clientSize),linePos=_c.pos,lineSize=_c.size;if(lineSize<snapThreshold)return null;var isRenderSize=isFirstRenderSize;isFirstRenderSize=!1;var snapSize=isDisplaySnapDigit&&isRenderSize?parseFloat(lineSize.toFixed(snapDigit)):0;return React.createElement("div",{key:direction+"LinkGuideline"+i+"-"+j,className:prefix("guideline-group",direction),style:(_b={},_b[posName1]=minPos+linePos+"px",_b[posName2]=-targetPos+pos[index?0:1]+"px",_b[sizeName]=lineSize+"px",_b)},renderInnerGuideline({direction:direction,classNames:[prefix("dashed")],size:"100%",posValue:[0,0],sizeValue:lineSize,zoom:zoom},React),React.createElement("div",{className:prefix("size-value"),style:{transform:"translate"+scaleDirection+"(-50%) scale("+zoom+")"}},snapSize>0?snapDistFormat(snapSize):""))}))})))}function renderSnapPoses(moveable,direction,snapPoses,minPos,targetPos,size,index,React){var zoom=moveable.props.zoom;return snapPoses.map((function(_a,i){var type=_a.type,pos=_a.pos,renderPos=[0,0];return renderPos[index]=minPos,renderPos[index?0:1]=-targetPos+pos,renderInnerGuideline({key:direction+"TargetGuideline"+i,classNames:[prefix("target","bold",type)],posValue:renderPos,sizeValue:size,zoom:zoom,direction:direction},React)}))}function filterElementInnerGuidelines(moveable,guidelines,index,targetPos,clientPos,targetSizes){var isDisplayInnerSnapDigit=moveable.props.isDisplayInnerSnapDigit,otherIndex=index?0:1,targetContentPos=targetPos[index],targetContentSize=targetSizes[index],gapGuidelines=[],nextGuidelines=guidelines.filter((function(guideline){var element=guideline.element,pos=guideline.pos,size=guideline.size;if(isDisplayInnerSnapDigit&&element&&pos[index]<targetContentPos&&targetContentPos+targetContentSize<pos[index]+size){var contentPos=pos[index]-targetContentPos,inlinePos=pos[otherIndex]-targetPos[otherIndex];return gapGuidelines.push(moveable_esm_assign(moveable_esm_assign({},guideline),{inner:!0,gap:contentPos,renderPos:index?[inlinePos,contentPos]:[contentPos,inlinePos]})),gapGuidelines.push(moveable_esm_assign(moveable_esm_assign({},guideline),{inner:!0,gap:pos[index]+size-targetContentPos-targetContentSize,renderPos:index?[inlinePos,targetContentSize]:[targetContentSize,inlinePos]})),!1}return!0})),groups=groupByElementGuidelines(nextGuidelines=nextGuidelines.filter((function(guideline1){var element1=guideline1.element,pos1=guideline1.pos,size1=guideline1.size,contentPos1=pos1[index];return!element1||nextGuidelines.every((function(guideline2){var element2=guideline2.element,pos2=guideline2.pos,size2=guideline2.size,contentPos2=pos2[index];return!element2||guideline1===guideline2||(contentPos1+size1<=contentPos2||contentPos2+size2<=contentPos1||contentPos1<contentPos2&&contentPos2+size2<contentPos1+size1)}))})),clientPos[index],targetContentSize,index);return gapGuidelines=gapGuidelines.filter((function(guideline){var gap=guideline.gap,inlinePos=guideline.pos[otherIndex];return groups.every((function(group){return group.every((function(groupGuideline){var groupPos=groupGuideline.pos,renderPos=-targetContentPos+groupPos[index];return groupPos[otherIndex]!==inlinePos||!(gap<0&&renderPos<0)&&!(gap>0&&renderPos>targetSizes[index])}))}))})),{guidelines:nextGuidelines,groups:groups,gapGuidelines:gapGuidelines}}function renderGuidelines(moveable,direction,guidelines,targetPos,React){var zoom=moveable.props.zoom;return guidelines.filter((function(_a){return!_a.hide})).map((function(guideline,i){var pos=guideline.pos,size=guideline.size,element=guideline.element,renderPos=[-targetPos[0]+pos[0],-targetPos[1]+pos[1]];return renderInnerGuideline({key:direction+"Guideline"+i,classNames:element?[prefix("bold")]:[],direction:direction,posValue:renderPos,sizeValue:size,zoom:zoom},React)}))}function renderGapGuidelines(moveable,direction,gapGuidelines,snapDistFormat,React){var _a=moveable.props,_b=_a.snapDigit,snapDigit=void 0===_b?0:_b,_c=_a.isDisplaySnapDigit,isDisplaySnapDigit=void 0===_c||_c,zoom=_a.zoom,scaleDirection="horizontal"===direction?"X":"Y",sizeName="horizontal"===direction?"width":"height";return gapGuidelines.map((function(_a,i){var _b,renderPos=_a.renderPos,gap=_a.gap,className=_a.className,inner=_a.inner,absGap=Math.abs(gap),snapSize=isDisplaySnapDigit?parseFloat(absGap.toFixed(snapDigit)):0;return React.createElement("div",{key:direction+"GapGuideline"+i,className:prefix("guideline-group",direction),style:(_b={left:renderPos[0]+"px",top:renderPos[1]+"px"},_b[sizeName]=absGap+"px",_b)},renderInnerGuideline({direction:direction,classNames:[prefix(inner?"dashed":"gap"),className],size:"100%",posValue:[0,0],sizeValue:absGap,zoom:zoom},React),React.createElement("div",{className:prefix("size-value","gap"),style:{transform:"translate"+scaleDirection+"(-50%) scale("+zoom+")"}},snapSize>0?snapDistFormat(snapSize):""))}))}function snapStart(moveable){var state=moveable.state;if(!state.guidelines||!state.guidelines.length){var container=moveable.state.container,snapContainer=moveable.props.snapContainer||container,containerClientRect=state.containerClientRect,snapOffset={left:0,top:0,bottom:0,right:0};if(container!==snapContainer){var snapContainerTarget=getRefTarget(snapContainer,!0);if(snapContainerTarget){var snapContainerRect=getClientRect(snapContainerTarget),offset1=getDragDistByState(state,[snapContainerRect.left-containerClientRect.left,snapContainerRect.top-containerClientRect.top]),offset2=getDragDistByState(state,[snapContainerRect.right-containerClientRect.right,snapContainerRect.bottom-containerClientRect.bottom]);snapOffset.left=moveable_esm_throttle(offset1[0],.1),snapOffset.top=moveable_esm_throttle(offset1[1],.1),snapOffset.right=moveable_esm_throttle(offset2[0],.1),snapOffset.bottom=moveable_esm_throttle(offset2[1],.1)}}state.snapOffset=snapOffset,state.elementGuidelineValues=[],state.staticGuidelines=getElementGuidelines(moveable,!1),state.guidelines=getTotalGuidelines(moveable),state.enableSnap=!0}}function hasGuidelines(moveable,ableName){var _a=moveable.props,snappable=_a.snappable,bounds=_a.bounds,innerBounds=_a.innerBounds,verticalGuidelines=_a.verticalGuidelines,horizontalGuidelines=_a.horizontalGuidelines,snapGridWidth=_a.snapGridWidth,snapGridHeight=_a.snapGridHeight,_b=moveable.state,guidelines=_b.guidelines,enableSnap=_b.enableSnap;return!(!snappable||!enableSnap||ableName&&!0!==snappable&&snappable.indexOf(ableName)<0)&&!!(snapGridWidth||snapGridHeight||bounds||innerBounds||guidelines&&guidelines.length||verticalGuidelines&&verticalGuidelines.length||horizontalGuidelines&&horizontalGuidelines.length)}function solveNextOffset(pos1,pos2,offset,isVertical,datas){var sizeOffset=function solveEquation(pos1,pos2,snapOffset,isVertical){var dx=pos2[0]-pos1[0],dy=pos2[1]-pos1[1];Math.abs(dx)<1e-7&&(dx=0);Math.abs(dy)<1e-7&&(dy=0);if(!dx)return isVertical?[0,0]:[0,snapOffset];if(!dy)return isVertical?[snapOffset,0]:[0,0];var a=dy/dx,b=pos1[1]-a*pos1[0];return isVertical?[snapOffset,a*(pos2[0]+snapOffset)+b-pos2[1]]:[(pos2[1]+snapOffset-b)/a-pos2[0],snapOffset]}(pos1,pos2,offset,isVertical);if(!sizeOffset)return{isOutside:!1,offset:[0,0]};var size=getDist(pos1,pos2),dist1=getDist(sizeOffset,pos1),dist2=getDist(sizeOffset,pos2),isOutside=dist1>size||dist2>size,_a=getDragDist({datas:datas,distX:sizeOffset[0],distY:sizeOffset[1]});return{offset:[_a[0],_a[1]],isOutside:isOutside}}function getNextFixedPoses(matrix,width,height,fixedPos,direction,is3d){var nextPoses=calculatePoses(matrix,width,height,is3d?4:3);return getAbsolutePoses(nextPoses,minus(fixedPos,function getPosByReverseDirection(poses,direction){return getPosByDirection(poses,direction.map((function(dir){return-dir})))}(nextPoses,direction)))}function getSnapBoundOffset(boundInfo,snapInfo){return boundInfo.isBound?boundInfo.offset:snapInfo.isSnap?snapInfo.offset:0}function getSnapBound(boundInfo,snapInfo){return boundInfo.isBound?boundInfo.offset:snapInfo.isSnap?getNearestSnapGuidelineInfo(snapInfo).offset:0}function checkSnapBoundsKeepRatio(moveable,startPos,endPos,isRequest){var _a=function checkBoundKeepRatio(moveable,startPos,endPos){var _a=getBounds(moveable),left=_a.left,top=_a.top,right=_a.right,bottom=_a.bottom,endX=endPos[0],endY=endPos[1],_b=minus(endPos,startPos),dx=_b[0],dy=_b[1];Math.abs(dx)<1e-7&&(dx=0),Math.abs(dy)<1e-7&&(dy=0);var isBottom=dy>0,isRight=dx>0,verticalInfo={isBound:!1,offset:0,pos:0},horizontalInfo={isBound:!1,offset:0,pos:0};if(0===dx&&0===dy)return{vertical:verticalInfo,horizontal:horizontalInfo};if(0===dx)isBottom?bottom<endY&&(horizontalInfo.pos=bottom,horizontalInfo.offset=endY-bottom):top>endY&&(horizontalInfo.pos=top,horizontalInfo.offset=endY-top);else if(0===dy)isRight?right<endX&&(verticalInfo.pos=right,verticalInfo.offset=endX-right):left>endX&&(verticalInfo.pos=left,verticalInfo.offset=endX-left);else{var a=dy/dx,b=endPos[1]-a*endX,y=0,x=0,isBound=!1;isRight&&right<=endX?(y=a*right+b,x=right,isBound=!0):!isRight&&endX<=left&&(y=a*left+b,x=left,isBound=!0),isBound&&(y<top||y>bottom)&&(isBound=!1),isBound||(isBottom&&bottom<=endY?(x=((y=bottom)-b)/a,isBound=!0):!isBottom&&endY<=top&&(x=((y=top)-b)/a,isBound=!0)),isBound&&(verticalInfo.isBound=!0,verticalInfo.pos=x,verticalInfo.offset=endX-x,horizontalInfo.isBound=!0,horizontalInfo.pos=y,horizontalInfo.offset=endY-y)}return{vertical:verticalInfo,horizontal:horizontalInfo}}(moveable,startPos,endPos),horizontalBoundInfo=_a.horizontal,verticalBoundInfo=_a.vertical,_b=isRequest?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function checkSnapKeepRatio(moveable,startPos,endPos){var endX=endPos[0],endY=endPos[1],startX=startPos[0],startY=startPos[1],_a=minus(endPos,startPos),dx=_a[0],dy=_a[1],isBottom=dy>0,isRight=dx>0;dx=getTinyDist(dx),dy=getTinyDist(dy);var verticalInfo={isSnap:!1,offset:0,pos:0},horizontalInfo={isSnap:!1,offset:0,pos:0};if(0===dx&&0===dy)return{vertical:verticalInfo,horizontal:horizontalInfo};var _b=checkMoveableSnapPoses(moveable,dx?[endX]:[],dy?[endY]:[]),verticalSnapInfo=_b.vertical,horizontalSnapInfo=_b.horizontal;verticalSnapInfo.posInfos.filter((function(_a){var pos=_a.pos;return isRight?pos>=startX:pos<=startX})),horizontalSnapInfo.posInfos.filter((function(_a){var pos=_a.pos;return isBottom?pos>=startY:pos<=startY})),verticalSnapInfo.isSnap=verticalSnapInfo.posInfos.length>0,horizontalSnapInfo.isSnap=horizontalSnapInfo.posInfos.length>0;var _c=getNearestSnapGuidelineInfo(verticalSnapInfo),isVerticalSnap=_c.isSnap,verticalGuideline=_c.guideline,_d=getNearestSnapGuidelineInfo(horizontalSnapInfo),isHorizontalSnap=_d.isSnap,horizontalGuideline=_d.guideline,horizontalPos=isHorizontalSnap?horizontalGuideline.pos[1]:0,verticalPos=isVerticalSnap?verticalGuideline.pos[0]:0;if(0===dx)isHorizontalSnap&&(horizontalInfo.isSnap=!0,horizontalInfo.pos=horizontalGuideline.pos[1],horizontalInfo.offset=endY-horizontalInfo.pos);else if(0===dy)isVerticalSnap&&(verticalInfo.isSnap=!0,verticalInfo.pos=verticalPos,verticalInfo.offset=endX-verticalPos);else{var a=dy/dx,b=endPos[1]-a*endX,y=0,x=0,isSnap=!1;isVerticalSnap?(y=a*(x=verticalPos)+b,isSnap=!0):isHorizontalSnap&&(x=((y=horizontalPos)-b)/a,isSnap=!0),isSnap&&(verticalInfo.isSnap=!0,verticalInfo.pos=x,verticalInfo.offset=endX-x,horizontalInfo.isSnap=!0,horizontalInfo.pos=y,horizontalInfo.offset=endY-y)}return{vertical:verticalInfo,horizontal:horizontalInfo}}(moveable,startPos,endPos),horizontalSnapInfo=_b.horizontal,verticalSnapInfo=_b.vertical,horizontalOffset=getSnapBoundOffset(horizontalBoundInfo,horizontalSnapInfo),verticalOffset=getSnapBoundOffset(verticalBoundInfo,verticalSnapInfo),horizontalDist=Math.abs(horizontalOffset),verticalDist=Math.abs(verticalOffset);return{horizontal:{isBound:horizontalBoundInfo.isBound,isSnap:horizontalSnapInfo.isSnap,offset:horizontalOffset,dist:horizontalDist},vertical:{isBound:verticalBoundInfo.isBound,isSnap:verticalSnapInfo.isSnap,offset:verticalOffset,dist:verticalDist}}}function checkMoveableSnapBounds(moveable,isRequest,poses,boundPoses){void 0===boundPoses&&(boundPoses=poses);var _a=checkBoundPoses(getBounds(moveable),boundPoses.map((function(pos){return pos[0]})),boundPoses.map((function(pos){return pos[1]}))),horizontalBoundInfos=_a.horizontal,verticalBoundInfos=_a.vertical,_b=isRequest?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:checkMoveableSnapPoses(moveable,poses.map((function(pos){return pos[0]})),poses.map((function(pos){return pos[1]})),moveable.props.snapCenter),horizontalSnapInfo=_b.horizontal,verticalSnapInfo=_b.vertical,horizontalOffset=getSnapBound(horizontalBoundInfos[0],horizontalSnapInfo),verticalOffset=getSnapBound(verticalBoundInfos[0],verticalSnapInfo),horizontalDist=Math.abs(horizontalOffset),verticalDist=Math.abs(verticalOffset);return{horizontal:{isBound:horizontalBoundInfos[0].isBound,isSnap:horizontalSnapInfo.isSnap,snapIndex:horizontalSnapInfo.index,offset:horizontalOffset,dist:horizontalDist,bounds:horizontalBoundInfos,snap:horizontalSnapInfo},vertical:{isBound:verticalBoundInfos[0].isBound,isSnap:verticalSnapInfo.isSnap,snapIndex:verticalSnapInfo.index,offset:verticalOffset,dist:verticalDist,bounds:verticalBoundInfos,snap:verticalSnapInfo}}}function checkSnapBounds(guideines,bounds,posesX,posesY,options){void 0===options&&(options={});var _a=checkBoundPoses(bounds,posesX,posesY),horizontalBoundInfos=_a.horizontal,verticalBoundInfos=_a.vertical,_b=options.isRequest?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:checkSnapPoses(guideines,posesX,posesY,options),horizontalSnapInfo=_b.horizontal,verticalSnapInfo=_b.vertical,horizontalOffset=getSnapBound(horizontalBoundInfos[0],horizontalSnapInfo),verticalOffset=getSnapBound(verticalBoundInfos[0],verticalSnapInfo),horizontalDist=Math.abs(horizontalOffset),verticalDist=Math.abs(verticalOffset);return{horizontal:{isBound:horizontalBoundInfos[0].isBound,isSnap:horizontalSnapInfo.isSnap,snapIndex:horizontalSnapInfo.index,offset:horizontalOffset,dist:horizontalDist,bounds:horizontalBoundInfos,snap:horizontalSnapInfo},vertical:{isBound:verticalBoundInfos[0].isBound,isSnap:verticalSnapInfo.isSnap,snapIndex:verticalSnapInfo.index,offset:verticalOffset,dist:verticalDist,bounds:verticalBoundInfos,snap:verticalSnapInfo}}}function getSnapBoundInfo(moveable,poses,directions,keepRatio,isRequest,datas){return directions.map((function(_a){var startDirection=_a[0],endDirection=_a[1],otherStartPos=getPosByDirection(poses,startDirection),otherEndPos=getPosByDirection(poses,endDirection),snapBoundInfo=keepRatio?checkSnapBoundsKeepRatio(moveable,otherStartPos,otherEndPos,isRequest):checkMoveableSnapBounds(moveable,isRequest,[otherEndPos]),_b=snapBoundInfo.horizontal,otherHorizontalOffset=_b.offset,isOtherHorizontalBound=_b.isBound,isOtherHorizontalSnap=_b.isSnap,_c=snapBoundInfo.vertical,otherVerticalOffset=_c.offset,isOtherVerticalBound=_c.isBound,isOtherVerticalSnap=_c.isSnap,multiple=minus(endDirection,startDirection);if(!otherVerticalOffset&&!otherHorizontalOffset)return{isBound:isOtherVerticalBound||isOtherHorizontalBound,isSnap:isOtherVerticalSnap||isOtherHorizontalSnap,sign:multiple,offset:[0,0]};var snapLine=function checkSnapRightLine(startPos,endPos,snapBoundInfo,keepRatio){var rad=getRad(startPos,endPos)/Math.PI*180,_a=snapBoundInfo.vertical,isVerticalBound=_a.isBound,isVerticalSnap=_a.isSnap,verticalDist=_a.dist,_b=snapBoundInfo.horizontal,isHorizontalBound=_b.isBound,isHorizontalSnap=_b.isSnap,rad180=rad%180,isHorizontalLine=rad180<3||rad180>177,isVerticalLine=rad180>87&&rad180<93;return _b.dist<verticalDist&&(isVerticalBound||isVerticalSnap&&!isVerticalLine&&(!keepRatio||!isHorizontalLine))?"vertical":!isHorizontalBound&&(!isHorizontalSnap||isHorizontalLine||keepRatio&&isVerticalLine)?"":"horizontal"}(otherStartPos,otherEndPos,snapBoundInfo,keepRatio);if(!snapLine)return{sign:multiple,isBound:!1,isSnap:!1,offset:[0,0]};var isVertical="vertical"===snapLine,sizeOffset=solveNextOffset(otherStartPos,otherEndPos,-(isVertical?otherVerticalOffset:otherHorizontalOffset),isVertical,datas).offset.map((function(size,i){return size*(multiple[i]?2/multiple[i]:0)}));return{sign:multiple,isBound:isVertical?isOtherVerticalBound:isOtherHorizontalBound,isSnap:isVertical?isOtherVerticalSnap:isOtherHorizontalSnap,offset:sizeOffset}}))}function getSizeOffsetInfo(moveable,poses,direction,keepRatio,isRequest,datas){var directions=function getCheckSnapDirections(direction,keepRatio){var directions=[],fixedDirection=[-direction[0],-direction[1]];return direction[0]&&direction[1]?(directions.push([fixedDirection,[direction[0],-direction[1]]],[fixedDirection,[-direction[0],direction[1]]]),keepRatio&&directions.push([fixedDirection,direction])):direction[0]?keepRatio?directions.push([fixedDirection,[fixedDirection[0],-1]],[fixedDirection,[fixedDirection[0],1]],[fixedDirection,[direction[0],-1]],[fixedDirection,direction],[fixedDirection,[direction[0],1]]):directions.push([[fixedDirection[0],-1],[direction[0],-1]],[[fixedDirection[0],0],[direction[0],0]],[[fixedDirection[0],1],[direction[0],1]]):direction[1]?keepRatio?directions.push([fixedDirection,[-1,fixedDirection[1]]],[fixedDirection,[1,fixedDirection[1]]],[fixedDirection,[-1,direction[1]]],[fixedDirection,[1,direction[1]]],[fixedDirection,direction]):directions.push([[-1,fixedDirection[1]],[-1,direction[1]]],[[0,fixedDirection[1]],[0,direction[1]]],[[1,fixedDirection[1]],[1,direction[1]]]):directions.push([fixedDirection,[1,0]],[fixedDirection,[-1,0]],[fixedDirection,[0,-1]],[fixedDirection,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),directions}(direction,keepRatio),lines=getCheckInnerBoundLines(poses,direction,keepRatio),offsets=moveable_esm_spreadArrays(getSnapBoundInfo(moveable,poses,directions,keepRatio,isRequest,datas),getInnerBoundInfo(moveable,lines,getPosByDirection(poses,[0,0]),datas)),widthOffsetInfo=getNearOffsetInfo(offsets,0),heightOffsetInfo=getNearOffsetInfo(offsets,1);return{width:{isBound:widthOffsetInfo.isBound,offset:widthOffsetInfo.offset[0]},height:{isBound:heightOffsetInfo.isBound,offset:heightOffsetInfo.offset[1]}}}function checkSizeDist(moveable,getNextPoses,width,height,direction,fixedPosition,isRequest,datas){for(var poses=getAbsolutePosesByState(moveable.state),keepRatio=moveable.props.keepRatio,widthOffset=0,heightOffset=0,i=0;i<2;++i){var _a=getSizeOffsetInfo(moveable,getNextPoses(widthOffset,heightOffset),direction,keepRatio,isRequest,datas),widthOffsetInfo=_a.width,heightOffsetInfo=_a.height,isWidthBound=widthOffsetInfo.isBound,isHeightBound=heightOffsetInfo.isBound,nextWidthOffset=widthOffsetInfo.offset,nextHeightOffset=heightOffsetInfo.offset;if(1===i&&(isWidthBound||(nextWidthOffset=0),isHeightBound||(nextHeightOffset=0)),0===i&&isRequest&&!isWidthBound&&!isHeightBound)return[0,0];if(keepRatio){var widthDist=Math.abs(nextWidthOffset)*(width?1/width:1),heightDist=Math.abs(nextHeightOffset)*(height?1/height:1);(isWidthBound&&isHeightBound?widthDist<heightDist:isHeightBound||!isWidthBound&&widthDist<heightDist)?nextWidthOffset=width*nextHeightOffset/height:nextHeightOffset=height*nextWidthOffset/width}widthOffset+=nextWidthOffset,heightOffset+=nextHeightOffset}if(direction[0]&&direction[1]){var _b=function checkMaxBounds(moveable,poses,direction,fixedPosition,datas){var fixedDirection=[-direction[0],-direction[1]],_a=moveable.state,width=_a.width,height=_a.height,bounds=moveable.props.bounds,maxWidth=1/0,maxHeight=1/0;if(bounds){var directions=[[direction[0],-direction[1]],[-direction[0],direction[1]]],_b=bounds.left,left_1=void 0===_b?-1/0:_b,_c=bounds.top,top_1=void 0===_c?-1/0:_c,_d=bounds.right,right_1=void 0===_d?1/0:_d,_e=bounds.bottom,bottom_1=void 0===_e?1/0:_e;directions.forEach((function(otherDirection){var isCheckVertical=otherDirection[0]!==fixedDirection[0],isCheckHorizontal=otherDirection[1]!==fixedDirection[1],otherPos=getPosByDirection(poses,otherDirection),deg=360*getRad(fixedPosition,otherPos)/Math.PI;if(isCheckHorizontal){var nextOtherPos=otherPos.slice();(Math.abs(deg-360)<2||Math.abs(deg-180)<2)&&(nextOtherPos[1]=fixedPosition[1]);var _a=solveNextOffset(fixedPosition,nextOtherPos,(fixedPosition[1]<otherPos[1]?bottom_1:top_1)-otherPos[1],!1,datas),heightOffset=_a.offset[1],isHeightOutside=_a.isOutside;isNaN(heightOffset)||(maxHeight=height+(isHeightOutside?1:-1)*Math.abs(heightOffset))}if(isCheckVertical){nextOtherPos=otherPos.slice(),(Math.abs(deg-90)<2||Math.abs(deg-270)<2)&&(nextOtherPos[0]=fixedPosition[0]);var _c=solveNextOffset(fixedPosition,nextOtherPos,(fixedPosition[0]<otherPos[0]?right_1:left_1)-otherPos[0],!0,datas),widthOffset=_c.offset[0],isWidthOutside=_c.isOutside;isNaN(widthOffset)||(maxWidth=width+(isWidthOutside?1:-1)*Math.abs(widthOffset))}}))}return{maxWidth:maxWidth,maxHeight:maxHeight}}(moveable,poses,direction,fixedPosition,datas),maxWidth=_b.maxWidth,maxHeight=_b.maxHeight,_c=function recheckSizeByTwoDirection(moveable,poses,width,height,maxWidth,maxHeight,direction,isRequest,datas){var _a=checkMoveableSnapBounds(moveable,isRequest,[getPosByDirection(poses,direction)]),horizontalOffset=_a.horizontal.offset,verticalOffset=_a.vertical.offset;if(verticalOffset||horizontalOffset){var _b=getDragDist({datas:datas,distX:-verticalOffset,distY:-horizontalOffset}),nextWidthOffset=_b[0],nextHeightOffset=_b[1];return[Math.min(maxWidth||1/0,width+direction[0]*nextWidthOffset)-width,Math.min(maxHeight||1/0,height+direction[1]*nextHeightOffset)-height]}return[0,0]}(moveable,getNextPoses(widthOffset,heightOffset).map((function(pos){return pos.map((function(p){return moveable_esm_throttle(p,1e-4)}))})),width+widthOffset,height+heightOffset,maxWidth,maxHeight,direction,isRequest,datas);widthOffset+=nextWidthOffset=_c[0],heightOffset+=nextHeightOffset=_c[1]}return[widthOffset,heightOffset]}function checkSnapRotate(moveable,rect,origin,rotation){if(!hasGuidelines(moveable,"rotatable"))return rotation;var pos1=rect.pos1,pos2=rect.pos2,pos3=rect.pos3,pos4=rect.pos4,rad=rotation*Math.PI/180,prevPoses=[pos1,pos2,pos3,pos4].map((function(pos){return minus(pos,origin)})),nextPoses=prevPoses.map((function(pos){return matrix_esm_rotate(pos,rad)})),result=moveable_esm_spreadArrays(checkRotateBounds(moveable,prevPoses,nextPoses,origin,rotation),checkRotateInnerBounds(moveable,prevPoses,nextPoses,origin,rotation));return result.sort((function(a,b){return Math.abs(a-rotation)-Math.abs(b-rotation)})),result.length?result[0]:rotation}function checkSnapScale(moveable,scale,direction,isRequest,datas){var width=datas.width,height=datas.height,fixedPosition=datas.fixedPosition;if(!hasGuidelines(moveable,"scalable"))return[0,0];var is3d=datas.is3d,sizeDist=checkSizeDist(moveable,(function(widthOffset,heightOffset){return getNextFixedPoses(function moveable_esm_scaleMatrix(state,scale){var transformOrigin=state.transformOrigin,offsetMatrix=state.offsetMatrix,n=state.is3d?4:3;return getNextMatrix(offsetMatrix,multiply(state.targetMatrix,createScaleMatrix(scale,n),n),transformOrigin,n)}(datas,plus(scale,[widthOffset/width,heightOffset/height])),width,height,fixedPosition,direction,is3d)}),width,height,direction,fixedPosition,isRequest,datas);return[sizeDist[0]/width,sizeDist[1]/height]}function checkSnapDrag(moveable,distX,distY,throttleDragRotate,isRequest,datas){if(!hasGuidelines(moveable,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var poses=getAbsolutePoses(datas.absolutePoses,[distX,distY]),_a=getRect(poses),left=_a.left,right=_a.right,top=_a.top,bottom=_a.bottom,snapPoses=[[left,top],[right,top],[left,bottom],[right,bottom]];moveable.props.snapCenter&&snapPoses.push([(left+right)/2,(top+bottom)/2]);var _b=checkMoveableSnapBounds(moveable,isRequest,snapPoses,poses),verticalSnapBoundInfo=_b.vertical,horizontalSnapBoundInfo=_b.horizontal,_c=getInnerBoundDragInfo(moveable,poses,datas),verticalInnerBoundInfo=_c.vertical,horizontalInnerBoundInfo=_c.horizontal,isVerticalSnap=verticalSnapBoundInfo.isSnap,isHorizontalSnap=horizontalSnapBoundInfo.isSnap,isVerticalBound=verticalSnapBoundInfo.isBound||verticalInnerBoundInfo.isBound,isHorizontalBound=horizontalSnapBoundInfo.isBound||horizontalInnerBoundInfo.isBound,_d=function checkThrottleDragRotate(throttleDragRotate,_a,_b,_c,_d){var distX=_a[0],distY=_a[1],isVerticalBound=_b[0],isHorizontalBound=_b[1],isVerticalSnap=_c[0],isHorizontalSnap=_c[1],verticalOffset=_d[0],horizontalOffset=_d[1],offsetX=-verticalOffset,offsetY=-horizontalOffset;if(throttleDragRotate&&distX&&distY){offsetX=0,offsetY=0;var adjustPoses=[];if(isVerticalBound&&isHorizontalBound?adjustPoses.push([0,horizontalOffset],[verticalOffset,0]):isVerticalBound?adjustPoses.push([verticalOffset,0]):isHorizontalBound?adjustPoses.push([0,horizontalOffset]):isVerticalSnap&&isHorizontalSnap?adjustPoses.push([0,horizontalOffset],[verticalOffset,0]):isVerticalSnap?adjustPoses.push([verticalOffset,0]):isHorizontalSnap&&adjustPoses.push([0,horizontalOffset]),adjustPoses.length){adjustPoses.sort((function(a,b){return getDistSize(minus([distX,distY],a))-getDistSize(minus([distX,distY],b))}));var adjustPos=adjustPoses[0];if(adjustPos[0]&&Math.abs(distX)>1e-7)offsetX=-adjustPos[0],offsetY=distY*Math.abs(distX+offsetX)/Math.abs(distX)-distY;else if(adjustPos[1]&&Math.abs(distY)>1e-7){var prevDistY=distY;offsetY=-adjustPos[1],offsetX=distX*Math.abs(distY+offsetY)/Math.abs(prevDistY)-distX}if(throttleDragRotate&&isHorizontalBound&&isVerticalBound)if(Math.abs(offsetX)>1e-7&&Math.abs(offsetX)<Math.abs(verticalOffset))offsetX*=scale=Math.abs(verticalOffset)/Math.abs(offsetX),offsetY*=scale;else if(Math.abs(offsetY)>1e-7&&Math.abs(offsetY)<Math.abs(horizontalOffset)){var scale;offsetX*=scale=Math.abs(horizontalOffset)/Math.abs(offsetY),offsetY*=scale}else offsetX=maxOffset(-verticalOffset,offsetX),offsetY=maxOffset(-horizontalOffset,offsetY)}}else offsetX=distX||isVerticalBound?-verticalOffset:0,offsetY=distY||isHorizontalBound?-horizontalOffset:0;return[offsetX,offsetY]}(throttleDragRotate,[distX,distY],[isVerticalBound,isHorizontalBound],[isVerticalSnap,isHorizontalSnap],[maxOffset(verticalSnapBoundInfo.offset,verticalInnerBoundInfo.offset),maxOffset(horizontalSnapBoundInfo.offset,horizontalInnerBoundInfo.offset)]);return[{isBound:isVerticalBound,isSnap:isVerticalSnap,offset:_d[0]},{isBound:isHorizontalBound,isSnap:isHorizontalSnap,offset:_d[1]}]}function getSnapGuidelines(posInfos){var guidelines=[];return posInfos.forEach((function(posInfo){posInfo.guidelineInfos.forEach((function(_a){var guideline=_a.guideline;guidelines.indexOf(guideline)>-1||guidelines.push(guideline)}))})),guidelines}function getGapGuidelines$1(guidelines,type,targetPos,targetSizes){var elementGuidelines=guidelines.filter((function(_a){var element=_a.element,gap=_a.gap,guidelineType=_a.type;return element&&gap&&guidelineType===type})),_a="vertical"===type?[0,1]:[1,0],index=_a[0],otherIndex=_a[1];return flat(elementGuidelines.map((function(guideline){var pos=guideline.pos,gap=guideline.gap,gapGuidelines=guideline.gapGuidelines,sizes=guideline.sizes,offset=function minOffset(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return args.sort((function(a,b){return Math.abs(a)-Math.abs(b)})),args[0]}(pos[otherIndex]+sizes[otherIndex]-targetPos[otherIndex],pos[otherIndex]-targetPos[otherIndex]-targetSizes[otherIndex]),minSize=Math.min(sizes[otherIndex],targetSizes[otherIndex]);if(offset>0&&offset>minSize?offset=2*(offset-minSize/2):offset<0&&offset<-minSize&&(offset=2*(offset+minSize/2)),0===offset)return[];var otherPos=(offset>0?0:targetSizes[otherIndex])+offset/2;return moveable_esm_spreadArrays(function getGapGuidelinesToStart(guidelines,index,targetPos,targetSizes,guidelinePos,gap,otherPos){var absGap=Math.abs(gap),start=guidelinePos[index]+(gap>0?targetSizes[0]:0);return guidelines.filter((function(_a){return _a.pos[index]<=targetPos[index]})).sort((function(_a,_b){var aPos=_a.pos;return _b.pos[index]-aPos[index]})).filter((function(_a){var gapPos=_a.pos,gapSizes=_a.sizes,nextPos=gapPos[index];return moveable_esm_throttle(nextPos+gapSizes[index],1e-4)===moveable_esm_throttle(start-absGap,1e-4)&&(start=nextPos,!0)})).map((function(gapGuideline){var renderPos=-targetPos[index]+gapGuideline.pos[index]+gapGuideline.sizes[index];return moveable_esm_assign(moveable_esm_assign({},gapGuideline),{gap:gap,renderPos:index?[otherPos,renderPos]:[renderPos,otherPos]})}))}(gapGuidelines,index,targetPos,targetSizes,pos,gap,otherPos),function getGapGuidelinesToEnd(guidelines,index,targetPos,targetSizes,guidelinePos,gap,otherPos){var absGap=Math.abs(gap),start=guidelinePos[index]+(gap<0?targetSizes[index]:0);return guidelines.filter((function(_a){return _a.pos[index]>targetPos[index]})).sort((function(_a,_b){var aPos=_a.pos,bPos=_b.pos;return aPos[index]-bPos[index]})).filter((function(_a){var gapPos=_a.pos,gapSizes=_a.sizes,nextPos=gapPos[index];return moveable_esm_throttle(nextPos,1e-4)===moveable_esm_throttle(start+absGap,1e-4)&&(start=nextPos+gapSizes[index],!0)})).map((function(gapGuideline){var renderPos=-targetPos[index]+gapGuideline.pos[index]-absGap;return moveable_esm_assign(moveable_esm_assign({},gapGuideline),{gap:gap,renderPos:index?[otherPos,renderPos]:[renderPos,otherPos]})}))}(gapGuidelines,index,targetPos,targetSizes,pos,gap,otherPos))})))}function addBoundGuidelines(moveable,verticalPoses,horizontalPoses,verticalSnapPoses,horizontalSnapPoses,externalBounds){var _a=checkBoundPoses(getBounds(moveable,externalBounds),verticalPoses,horizontalPoses),verticalBoundInfos=_a.vertical,horizontalBoundInfos=_a.horizontal;verticalBoundInfos.forEach((function(info){info.isBound&&verticalSnapPoses.push({type:"bounds",pos:info.pos})})),horizontalBoundInfos.forEach((function(info){info.isBound&&horizontalSnapPoses.push({type:"bounds",pos:info.pos})}));var _b=function checkInnerBoundPoses(moveable){var innerBounds=moveable.props.innerBounds;if(!innerBounds)return{vertical:[],horizontal:[]};var _a=moveable.getRect(),pos1=_a.pos1,pos2=_a.pos2,pos3=_a.pos3,pos4=_a.pos4,center=getPosByDirection([pos1,pos2,pos3,pos4],[0,0]),left=innerBounds.left,top=innerBounds.top,width=innerBounds.width,height=innerBounds.height,leftLine=[[left,top],[left,top+height]],topLine=[[left,top],[left+width,top]],rightLine=[[left+width,top],[left+width,top+height]],bottomLine=[[left,top+height],[left+width,top+height]],horizontalPoses=[],verticalPoses=[],boundMap={top:!1,bottom:!1,left:!1,right:!1};return[[pos1,pos2],[pos2,pos4],[pos4,pos3],[pos3,pos1]].forEach((function(line){var _a=isStartLine(center,line),isHorizontalStart=_a.horizontal,isVerticalStart=_a.vertical,topBoundInfo=checkLineBoundCollision(line,topLine,isVerticalStart,1,!0),bottomBoundInfo=checkLineBoundCollision(line,bottomLine,isVerticalStart,1,!0),leftBoundInfo=checkLineBoundCollision(line,leftLine,isHorizontalStart,1,!0),rightBoundInfo=checkLineBoundCollision(line,rightLine,isHorizontalStart,1,!0);topBoundInfo.isBound&&!boundMap.top&&(horizontalPoses.push(top),boundMap.top=!0),bottomBoundInfo.isBound&&!boundMap.bottom&&(horizontalPoses.push(top+height),boundMap.bottom=!0),leftBoundInfo.isBound&&!boundMap.left&&(verticalPoses.push(left),boundMap.left=!0),rightBoundInfo.isBound&&!boundMap.right&&(verticalPoses.push(left+width),boundMap.right=!0)})),{horizontal:horizontalPoses,vertical:verticalPoses}}(moveable),verticalInnerBoundPoses=_b.vertical,horizontalInnerBoundPoses=_b.horizontal;verticalInnerBoundPoses.forEach((function(innerPos){findIndex(verticalSnapPoses,(function(_a){var type=_a.type,pos=_a.pos;return"bounds"===type&&pos===innerPos}))>=0||verticalSnapPoses.push({type:"bounds",pos:innerPos})})),horizontalInnerBoundPoses.forEach((function(innerPos){findIndex(horizontalSnapPoses,(function(_a){var type=_a.type,pos=_a.pos;return"bounds"===type&&pos===innerPos}))>=0||horizontalSnapPoses.push({type:"bounds",pos:innerPos})}))}var Snappable={name:"snappable",props:{snappable:[Boolean,Array],snapContainer:Object,snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(moveable,React){var state=moveable.state,targetTop=state.top,targetLeft=state.left,pos1=state.pos1,pos2=state.pos2,pos3=state.pos3,pos4=state.pos4,snapRenderInfo=state.snapRenderInfo,targetClientRect=state.targetClientRect,containerClientRect=state.containerClientRect,is3d=state.is3d,rootMatrix=state.rootMatrix;if(!snapRenderInfo||!hasGuidelines(moveable,""))return[];state.staticGuidelines=getElementGuidelines(moveable,!1,state.staticGuidelines),state.guidelines=getTotalGuidelines(moveable);var n=is3d?4:3,minLeft=Math.min(pos1[0],pos2[0],pos3[0],pos4[0]),minTop=Math.min(pos1[1],pos2[1],pos3[1],pos4[1]),containerPos=calculateContainerPos(rootMatrix,containerClientRect,n),_a=calculateInversePosition(rootMatrix,[targetClientRect.left-containerPos[0],targetClientRect.top-containerPos[1]],n),clientLeft=_a[0],clientTop=_a[1],_b=moveable.props,_c=_b.snapThreshold,snapThreshold=void 0===_c?5:_c,_d=_b.snapDigit,snapDigit=void 0===_d?0:_d,_e=_b.snapDistFormat,snapDistFormat=void 0===_e?function(v){return v}:_e,externalPoses=snapRenderInfo.externalPoses||[],poses=getAbsolutePosesByState(moveable.state),verticalSnapPoses=[],horizontalSnapPoses=[],verticalGuidelines=[],horizontalGuidelines=[],snapInfos=[],_f=getRect(poses),width=_f.width,height=_f.height,top=_f.top,left=_f.left,bottom=_f.bottom,right=_f.right,hasExternalPoses=externalPoses.length>0,externalRect=hasExternalPoses?getRect(externalPoses):{};if(!snapRenderInfo.request){if(snapRenderInfo.direction&&snapInfos.push(function getSnapInfosByDirection(moveable,poses,snapDirection){var nextPoses=[];if(snapDirection[0]&&snapDirection[1])nextPoses=[snapDirection,[-snapDirection[0],snapDirection[1]],[snapDirection[0],-snapDirection[1]]].map((function(direction){return getPosByDirection(poses,direction)}));else if(snapDirection[0]||snapDirection[1])moveable.props.keepRatio?nextPoses=[[-1,-1],[-1,1],[1,-1],[1,1],snapDirection].map((function(dir){return getPosByDirection(poses,dir)})):(nextPoses=getPosesByDirection(poses,snapDirection)).length>1&&nextPoses.push([(nextPoses[0][0]+nextPoses[1][0])/2,(nextPoses[0][1]+nextPoses[1][1])/2]);else for(var alignPoses=[poses[0],poses[1],poses[3],poses[2],poses[0]],i=0;i<4;++i)nextPoses.push(alignPoses[i]),nextPoses.push([(alignPoses[i][0]+alignPoses[i+1][0])/2,(alignPoses[i][1]+alignPoses[i+1][1])/2]);return checkMoveableSnapPoses(moveable,nextPoses.map((function(pos){return pos[0]})),nextPoses.map((function(pos){return pos[1]})),!0,1)}(moveable,poses,snapRenderInfo.direction)),snapRenderInfo.snap){var rect=getRect(poses);snapRenderInfo.center&&(rect.middle=(rect.top+rect.bottom)/2,rect.center=(rect.left+rect.right)/2),snapInfos.push(checkSnaps(moveable,rect,!0,1))}hasExternalPoses&&(snapRenderInfo.center&&(externalRect.middle=(externalRect.top+externalRect.bottom)/2,externalRect.center=(externalRect.left+externalRect.right)/2),snapInfos.push(checkSnaps(moveable,externalRect,!0,1))),snapInfos.forEach((function(snapInfo){var verticalPosInfos=snapInfo.vertical.posInfos,horizontalPosInfos=snapInfo.horizontal.posInfos;verticalSnapPoses.push.apply(verticalSnapPoses,verticalPosInfos.filter((function(_a){return _a.guidelineInfos.some((function(_a){return!_a.guideline.hide}))})).map((function(posInfo){return{type:"snap",pos:posInfo.pos}}))),horizontalSnapPoses.push.apply(horizontalSnapPoses,horizontalPosInfos.filter((function(_a){return _a.guidelineInfos.some((function(_a){return!_a.guideline.hide}))})).map((function(posInfo){return{type:"snap",pos:posInfo.pos}}))),verticalGuidelines.push.apply(verticalGuidelines,getSnapGuidelines(verticalPosInfos)),horizontalGuidelines.push.apply(horizontalGuidelines,getSnapGuidelines(horizontalPosInfos))}))}addBoundGuidelines(moveable,[left,right],[top,bottom],verticalSnapPoses,horizontalSnapPoses),hasExternalPoses&&addBoundGuidelines(moveable,[externalRect.left,externalRect.right],[externalRect.top,externalRect.bottom],verticalSnapPoses,horizontalSnapPoses,snapRenderInfo.externalBounds);var gapHorizontalGuidelines=getGapGuidelines$1(verticalGuidelines,"vertical",[targetLeft,targetTop],[width,height]),gapVerticalGuidelines=getGapGuidelines$1(horizontalGuidelines,"horizontal",[targetLeft,targetTop],[width,height]),allGuidelines=moveable_esm_spreadArrays(verticalGuidelines,horizontalGuidelines);triggerEvent(moveable,"onSnap",{guidelines:allGuidelines.filter((function(_a){return!_a.element})),elements:groupBy(allGuidelines.filter((function(_a){return _a.element})),(function(_a){return _a.element})),gaps:moveable_esm_spreadArrays(gapVerticalGuidelines,gapHorizontalGuidelines)},!0);var _g=filterElementInnerGuidelines(moveable,horizontalGuidelines,0,[targetLeft,targetTop],[clientLeft,clientTop],[width,height]),nextHorizontalGuidelines=_g.guidelines,elementHorizontalGroups=_g.groups,innerGapHorizontalGuidelines=_g.gapGuidelines,_h=filterElementInnerGuidelines(moveable,verticalGuidelines,1,[targetLeft,targetTop],[clientLeft,clientTop],[width,height]),nextVerticalGuidelines=_h.guidelines,elementVerticalGroups=_h.groups;return moveable_esm_spreadArrays(renderGapGuidelines(moveable,"vertical",moveable_esm_spreadArrays(gapVerticalGuidelines,_h.gapGuidelines),snapDistFormat,React),renderGapGuidelines(moveable,"horizontal",moveable_esm_spreadArrays(gapHorizontalGuidelines,innerGapHorizontalGuidelines),snapDistFormat,React),renderElementGroups(moveable,"horizontal",elementHorizontalGroups,minLeft,clientLeft,width,targetTop,snapThreshold,snapDigit,0,snapDistFormat,React),renderElementGroups(moveable,"vertical",elementVerticalGroups,minTop,clientTop,height,targetLeft,snapThreshold,snapDigit,1,snapDistFormat,React),renderGuidelines(moveable,"horizontal",nextHorizontalGuidelines,[targetLeft,targetTop],React),renderGuidelines(moveable,"vertical",nextVerticalGuidelines,[targetLeft,targetTop],React),renderSnapPoses(moveable,"horizontal",horizontalSnapPoses,minLeft,targetTop,width,0,React),renderSnapPoses(moveable,"vertical",verticalSnapPoses,minTop,targetLeft,height,1,React))},dragStart:function(moveable,e){moveable.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},snapStart(moveable)},drag:function(moveable){var state=moveable.state;state.staticGuidelines=getElementGuidelines(moveable,!1,state.staticGuidelines),state.guidelines=getTotalGuidelines(moveable)},pinchStart:function(moveable){this.unset(moveable)},dragEnd:function(moveable){this.unset(moveable)},dragControlCondition:function(moveable,e){return!(!directionCondition(0,e)&&!dragControlCondition(moveable,e))||(!e.isRequest&&e.inputEvent?hasClass(e.inputEvent.target,prefix("snap-control")):void 0)},dragControlStart:function(moveable){moveable.state.snapRenderInfo=null,snapStart(moveable)},dragControl:function(moveable){this.drag(moveable)},dragControlEnd:function(moveable){this.unset(moveable)},dragGroupStart:function(moveable,e){this.dragStart(moveable,e)},dragGroup:function(moveable){this.drag(moveable)},dragGroupEnd:function(moveable){this.unset(moveable)},dragGroupControlStart:function(moveable){moveable.state.snapRenderInfo=null,snapStart(moveable)},dragGroupControl:function(moveable){this.drag(moveable)},dragGroupControlEnd:function(moveable){this.unset(moveable)},unset:function(moveable){var state=moveable.state;state.enableSnap=!1,state.staticGuidelines=[],state.guidelines=[],state.snapRenderInfo=null}},Draggable={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(moveable,React){var _a=moveable.props,throttleDragRotate=_a.throttleDragRotate,zoom=_a.zoom,_b=moveable.state,dragInfo=_b.dragInfo,beforeOrigin=_b.beforeOrigin;if(!throttleDragRotate||!dragInfo)return[];var dist=dragInfo.dist;if(!dist[0]&&!dist[1])return[];var width=getDistSize(dist),rad=getRad(dist,[0,0]);return[React.createElement("div",{className:prefix("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:width+"px",transform:"translate("+beforeOrigin[0]+"px, "+beforeOrigin[1]+"px) rotate("+rad+"rad) scaleY("+zoom+")"}})]},dragStart:function(moveable,e){var datas=e.datas,parentEvent=e.parentEvent,parentGesto=e.parentGesto,state=moveable.state,target=state.target;if(state.gesto)return!1;state.gesto=parentGesto||moveable.targetGesto;var style=moveable_esm_getComputedStyle(target);datas.datas={},datas.left=parseFloat(style.left||"")||0,datas.top=parseFloat(style.top||"")||0,datas.bottom=parseFloat(style.bottom||"")||0,datas.right=parseFloat(style.right||"")||0,datas.startValue=[0,0],setDragStart(moveable,e),setDefaultTransformIndex(e,"translate"),function startCheckSnapDrag(moveable,datas){datas.absolutePoses=getAbsolutePosesByState(moveable.state)}(moveable,datas),datas.prevDist=[0,0],datas.prevBeforeDist=[0,0],datas.isDrag=!1;var params=fillParams(moveable,e,moveable_esm_assign({set:function(translate){datas.startValue=translate}},fillTransformStartEvent(e)));return!1!==(parentEvent||triggerEvent(moveable,"onDragStart",params))?(datas.isDrag=!0,moveable.state.dragInfo={startRect:moveable.getRect(),dist:[0,0]}):(state.gesto=null,datas.isPinch=!1),!!datas.isDrag&&params},drag:function(moveable,e){resolveTransformEvent(e,"translate");var datas=e.datas,parentEvent=e.parentEvent,parentFlag=e.parentFlag,isPinch=e.isPinch,isRequest=e.isRequest,distX=e.distX,distY=e.distY,isDrag=datas.isDrag,prevDist=datas.prevDist,prevBeforeDist=datas.prevBeforeDist,startValue=datas.startValue;if(isDrag){var props=moveable.props,parentMoveable=props.parentMoveable,throttleDrag=parentEvent?0:props.throttleDrag||0,throttleDragRotate=parentEvent?0:props.throttleDragRotate||0,isSnap=!1,dragRotateRad=0;if(!parentEvent&&throttleDragRotate>0&&(distX||distY)){var startDragRotate=props.startDragRotate||0,deg=moveable_esm_throttle(startDragRotate+180*getRad([0,0],[distX,distY])/Math.PI,throttleDragRotate)-startDragRotate,ry=distY*Math.abs(Math.cos((deg-90)/180*Math.PI)),r=getDistSize([distX*Math.abs(Math.cos(deg/180*Math.PI)),ry]);dragRotateRad=deg*Math.PI/180,distX=r*Math.cos(dragRotateRad),distY=r*Math.sin(dragRotateRad)}if(!isPinch&&!parentEvent&&!parentFlag&&(!throttleDragRotate||distX||distY)){var _a=checkSnapDrag(moveable,distX,distY,throttleDragRotate,isRequest,datas),verticalInfo=_a[0],horizontalInfo=_a[1],isVerticalSnap=verticalInfo.isSnap,isVerticalBound=verticalInfo.isBound,verticalOffset=verticalInfo.offset,isHorizontalSnap=horizontalInfo.isSnap,isHorizontalBound=horizontalInfo.isBound;isSnap=isVerticalSnap||isHorizontalSnap||isVerticalBound||isHorizontalBound,distX+=verticalOffset,distY+=horizontalInfo.offset}datas.passDeltaX=distX-(datas.passDistX||0),datas.passDeltaY=distY-(datas.passDistY||0),datas.passDistX=distX,datas.passDistY=distY;var beforeTranslate=plus(getBeforeDragDist({datas:datas,distX:distX,distY:distY}),startValue),translate=plus(getTransformDist({datas:datas,distX:distX,distY:distY}),startValue);throttleDragRotate||isSnap||(throttleArray(translate,throttleDrag),throttleArray(beforeTranslate,throttleDrag));var beforeDist=minus(beforeTranslate,startValue),dist=minus(translate,startValue),delta=minus(dist,prevDist),beforeDelta=minus(beforeDist,prevBeforeDist);datas.prevDist=dist,datas.prevBeforeDist=beforeDist;var left=datas.left+beforeDist[0],top=datas.top+beforeDist[1],right=datas.right-beforeDist[0],bottom=datas.bottom-beforeDist[1],nextTransform=convertTransformFormat(datas,"translate("+translate[0]+"px, "+translate[1]+"px)","translate("+dist[0]+"px, "+dist[1]+"px)");if(moveable.state.dragInfo.dist=parentEvent?[0,0]:dist,parentEvent||parentMoveable||!delta.every((function(num){return!num}))||!beforeDelta.some((function(num){return!num}))){var _b=moveable.state,params=fillParams(moveable,e,{transform:nextTransform,dist:dist,delta:delta,translate:translate,beforeDist:beforeDist,beforeDelta:beforeDelta,beforeTranslate:beforeTranslate,left:left,top:top,right:right,bottom:bottom,width:_b.width,height:_b.height,isPinch:isPinch});return!parentEvent&&triggerEvent(moveable,"onDrag",params),params}}},dragEnd:function(moveable,e){var parentEvent=e.parentEvent,datas=e.datas,isDrag=e.isDrag;if(moveable.state.gesto=null,moveable.state.dragInfo=null,datas.isDrag)return datas.isDrag=!1,!parentEvent&&triggerEvent(moveable,"onDragEnd",fillEndParams(moveable,e,{})),isDrag},dragGroupStart:function(moveable,e){var datas=e.datas,clientX=e.clientX,clientY=e.clientY,params=this.dragStart(moveable,e);if(!params)return!1;var events=triggerChildGesto(moveable,this,"dragStart",[clientX||0,clientY||0],e,!1),result=triggerEvent(moveable,"onDragGroupStart",moveable_esm_assign(moveable_esm_assign({},params),{targets:moveable.props.targets,events:events}));return datas.isDrag=!1!==result,!!datas.isDrag&&params},dragGroup:function(moveable,e){if(e.datas.isDrag){var params=this.drag(moveable,e),_a=e.datas,events=triggerChildGesto(moveable,this,"drag",[_a.passDeltaX,_a.passDeltaY],e,!1);if(params){var nextParams=moveable_esm_assign({targets:moveable.props.targets,events:events},params);return triggerEvent(moveable,"onDragGroup",nextParams),nextParams}}},dragGroupEnd:function(moveable,e){var isDrag=e.isDrag;if(e.datas.isDrag)return this.dragEnd(moveable,e),triggerChildGesto(moveable,this,"dragEnd",[0,0],e,!1),triggerEvent(moveable,"onDragGroupEnd",fillEndParams(moveable,e,{targets:moveable.props.targets})),isDrag},request:function(moveable){var datas={},rect=moveable.getRect(),distX=0,distY=0;return{isControl:!1,requestStart:function(){return{datas:datas}},request:function(e){return"x"in e?distX=e.x-rect.left:"deltaX"in e&&(distX+=e.deltaX),"y"in e?distY=e.y-rect.top:"deltaY"in e&&(distY+=e.deltaY),{datas:datas,distX:distX,distY:distY}},requestEnd:function(){return{datas:datas,isDrag:!0}}}},unset:function(moveable){moveable.state.dragInfo=null}};function renderDirectionControls(moveable,defaultDirections,React,additionalClassName){void 0===additionalClassName&&(additionalClassName="");var _a=moveable.state,renderPoses=_a.renderPoses,radRotation=_a.rotation,direction=_a.direction,_b=moveable.props,_c=_b.renderDirections,directions=void 0===_c?defaultDirections:_c,zoom=_b.zoom,directionMap={};if(!directions)return[];var sign=direction>0?1:-1,renderDirections=!0===directions?DIRECTIONS:directions,degRotation=radRotation/Math.PI*180;return renderDirections.forEach((function(dir){directionMap[dir]=!0})),renderDirections.map((function(dir){var indexes=DIRECTION_INDEXES[dir];if(!indexes||!directionMap[dir])return null;var directionRotation=(moveable_esm_throttle(degRotation,15)+sign*DIRECTION_ROTATIONS[dir]+720)%180;return React.createElement("div",{className:prefix("control","direction",dir,additionalClassName),"data-rotation":directionRotation,"data-direction":dir,key:"direction-"+dir,style:getControlTransform.apply(void 0,moveable_esm_spreadArrays([radRotation,zoom],indexes.map((function(index){return renderPoses[index]}))))})}))}function renderLine(React,direction,pos1,pos2,zoom,key){for(var classNames=[],_i=6;_i<arguments.length;_i++)classNames[_i-6]=arguments[_i];var rad=getRad(pos1,pos2),rotation=direction?moveable_esm_throttle(rad/Math.PI*180,15)%180:-1;return React.createElement("div",{key:"line"+key,className:prefix.apply(void 0,moveable_esm_spreadArrays(["line","direction",direction],classNames)),"data-rotation":rotation,"data-line-index":key,"data-direction":direction,style:getLineStyle(pos1,pos2,zoom,rad)})}function renderAllDirections(moveable,React){return renderDirectionControls(moveable,DIRECTIONS,React)}function renderDiagonalDirections(moveable,React){return renderDirectionControls(moveable,["nw","ne","sw","se"],React)}function setRotateStartInfo(moveable,datas,clientX,clientY,origin,rect){var n=moveable.state.is3d?4:3,nextOrigin=calculatePosition(moveable.state.rootMatrix,origin,n),startAbsoluteOrigin=plus([rect.left,rect.top],nextOrigin);datas.startAbsoluteOrigin=startAbsoluteOrigin,datas.prevDeg=getRad(startAbsoluteOrigin,[clientX,clientY])/Math.PI*180,datas.prevSnapDeg=datas.prevDeg,datas.startDeg=datas.prevDeg,datas.loop=0}function getParentDeg(moveable,moveableRect,datas,parentDist,direction,startValue){var prevDeg=datas.prevDeg,dist=checkSnapRotate(moveable,moveableRect,datas.origin,parentDist);return datas.prevDeg=dist,[dist-prevDeg,dist,startValue+dist]}function getDeg(moveable,moveableRect,datas,deg,direction,startValue,throttleRotate,isSnap){var prevDeg=datas.prevDeg,prevSnapDeg=datas.prevSnapDeg,startDeg=datas.startDeg,prevLoop=datas.loop;prevDeg>deg&&prevDeg>270&&deg<90?++datas.loop:prevDeg<deg&&prevDeg<90&&deg>270&&--datas.loop;var loop=datas.loop,absolutePrevSnapDeg=360*prevLoop+prevSnapDeg-startDeg+startValue,absoluteDeg=360*loop+deg-startDeg+startValue;datas.prevDeg=absoluteDeg-360*loop+startDeg-startValue;var dist=direction*((absoluteDeg=moveable_esm_throttle(absoluteDeg,throttleRotate))-startValue);return isSnap&&(absoluteDeg=(dist=checkSnapRotate(moveable,moveableRect,datas.origin,dist))/direction+startValue),datas.prevSnapDeg=absoluteDeg-360*loop+startDeg-startValue,[direction*(absoluteDeg-absolutePrevSnapDeg),dist,startValue+dist]}function getRotateInfo(moveable,moveableRect,datas,direction,clientX,clientY,startValue,throttleRotate){return getDeg(moveable,moveableRect,datas,getRad(datas.startAbsoluteOrigin,[clientX,clientY])/Math.PI*180,direction,startValue,throttleRotate,!0)}function dragControlCondition(moveable,e){if(e.isRequest)return"rotatable"===e.requestAble;var target=e.inputEvent.target;if(hasClass(target,prefix("rotation-control")))return!0;var rotationTarget=moveable.props.rotationTarget;return!!rotationTarget&&getRefTargets(rotationTarget,!0).some((function(element){return!!element&&(target===element||target.contains(element))}))}var Rotatable={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(moveable,React){var _a=moveable.props,rotatable=_a.rotatable,rotationPosition=_a.rotationPosition,zoom=_a.zoom,renderDirections=_a.renderDirections,_b=moveable.state,renderPoses=_b.renderPoses,direction=_b.direction;if(!rotatable)return null;var positions=function getRotationPositions(rotationPosition,_a,direction){var pos1=_a[0],pos2=_a[1],pos3=_a[2],pos4=_a[3];if("none"!==rotationPosition){var _b=(rotationPosition||"top").split("-"),dir1=_b[0],dir2=_b[1],radPoses=[pos1,pos2];"left"===dir1?radPoses=[pos3,pos1]:"right"===dir1?radPoses=[pos2,pos4]:"bottom"===dir1&&(radPoses=[pos4,pos3]);var pos=[(radPoses[0][0]+radPoses[1][0])/2,(radPoses[0][1]+radPoses[1][1])/2],rad=getRotationRad(radPoses,direction);if(dir2){var isStart="top"===dir2||"left"===dir2,isReverse="bottom"===dir1||"left"===dir1;pos=radPoses[isStart&&!isReverse||!isStart&&isReverse?0:1]}return[pos,rad]}}(rotationPosition,renderPoses,direction),jsxs=[];if(positions){var pos=positions[0],rad=positions[1];jsxs.push(React.createElement("div",{key:"rotation",className:prefix("rotation"),style:{transform:"translate(-50%) translate("+pos[0]+"px, "+pos[1]+"px) rotate("+rad+"rad)"}},React.createElement("div",{className:prefix("line rotation-line"),style:{transform:"scaleX("+zoom+")"}}),React.createElement("div",{className:prefix("control rotation-control"),style:{transform:"translate(0.5px) scale("+zoom+")"}})))}return renderDirections&&jsxs.push.apply(jsxs,renderDirectionControls(moveable,[],React)),jsxs},dragControlCondition:dragControlCondition,dragControlStart:function(moveable,e){var datas=e.datas,clientX=e.clientX,clientY=e.clientY,parentRotate=e.parentRotate,parentFlag=e.parentFlag,isPinch=e.isPinch,isRequest=e.isRequest,_a=moveable.state,target=_a.target,left=_a.left,top=_a.top,origin=_a.origin,beforeOrigin=_a.beforeOrigin,direction=_a.direction,beforeDirection=_a.beforeDirection,targetTransform=_a.targetTransform,moveableClientRect=_a.moveableClientRect;if(!isRequest&&!target)return!1;var rect=moveable.getRect();if(datas.rect=rect,datas.transform=targetTransform,datas.left=left,datas.top=top,datas.fixedPosition=getDirectionOffset(moveable,getOriginDirection(moveable)),datas.absoluteInfo={origin:rect.origin,startValue:rect.rotation},setRotateStartInfo(moveable,datas.absoluteInfo,clientX,clientY,origin,moveableClientRect),isRequest||isPinch||parentFlag){var externalRotate=parentRotate||0;datas.beforeInfo={origin:rect.beforeOrigin,prevDeg:externalRotate,startDeg:externalRotate,prevSnapDeg:externalRotate,loop:0},datas.afterInfo={origin:rect.origin,prevDeg:externalRotate,startDeg:externalRotate,prevSnapDeg:externalRotate,loop:0}}else datas.beforeInfo={origin:rect.beforeOrigin},datas.afterInfo={origin:rect.origin},setRotateStartInfo(moveable,datas.beforeInfo,clientX,clientY,beforeOrigin,moveableClientRect),setRotateStartInfo(moveable,datas.afterInfo,clientX,clientY,origin,moveableClientRect);datas.direction=direction,datas.beforeDirection=beforeDirection,datas.startValue=0,datas.datas={},setDefaultTransformIndex(e,"rotate");var params=fillParams(moveable,e,moveable_esm_assign(moveable_esm_assign({set:function(rotatation){datas.startValue=rotatation*Math.PI/180}},fillTransformStartEvent(e)),{dragStart:Draggable.dragStart(moveable,(new CustomGesto).dragStart([0,0],e))})),result=triggerEvent(moveable,"onRotateStart",params);return datas.isRotate=!1!==result,moveable.state.snapRenderInfo={request:e.isRequest},!!datas.isRotate&&params},dragControl:function(moveable,e){var _a,_b,_c,_d,_e,_f,_g,_h,_j,datas=e.datas,clientX=e.clientX,clientY=e.clientY,parentRotate=e.parentRotate,parentFlag=e.parentFlag,isPinch=e.isPinch,groupDelta=e.groupDelta,beforeDirection=datas.beforeDirection,beforeInfo=datas.beforeInfo,afterInfo=datas.afterInfo,absoluteInfo=datas.absoluteInfo,isRotate=datas.isRotate,startValue=datas.startValue,rect=datas.rect;if(isRotate){resolveTransformEvent(e,"rotate");var delta,dist,rotate,beforeDelta,beforeDist,beforeRotate,absoluteDelta,absoluteDist,absoluteRotate,direction=beforeDirection*function getTransformDirection(e){return calculateMoveablePosition(e.datas.beforeTransform,[50,50],100,100).direction}(e),_k=moveable.props,_l=_k.throttleRotate,throttleRotate=void 0===_l?0:_l,parentMoveable=_k.parentMoveable,startDeg=180/Math.PI*startValue,absoluteStartDeg=absoluteInfo.startValue;if(!parentFlag&&"parentDist"in e){var parentDist=e.parentDist;delta=(_a=getParentDeg(moveable,rect,afterInfo,parentDist,0,startDeg))[0],dist=_a[1],rotate=_a[2],beforeDelta=(_b=getParentDeg(moveable,rect,beforeInfo,parentDist,0,startDeg))[0],beforeDist=_b[1],beforeRotate=_b[2],absoluteDelta=(_c=getParentDeg(moveable,rect,absoluteInfo,parentDist,0,absoluteStartDeg))[0],absoluteDist=_c[1],absoluteRotate=_c[2]}else isPinch||parentFlag?(delta=(_d=getDeg(moveable,rect,afterInfo,parentRotate,direction,startDeg,throttleRotate))[0],dist=_d[1],rotate=_d[2],beforeDelta=(_e=getDeg(moveable,rect,beforeInfo,parentRotate,beforeDirection,startDeg,throttleRotate))[0],beforeDist=_e[1],beforeRotate=_e[2],absoluteDelta=(_f=getDeg(moveable,rect,absoluteInfo,parentRotate,direction,absoluteStartDeg,throttleRotate))[0],absoluteDist=_f[1],absoluteRotate=_f[2]):(delta=(_g=getRotateInfo(moveable,rect,afterInfo,direction,clientX,clientY,startDeg,throttleRotate))[0],dist=_g[1],rotate=_g[2],beforeDelta=(_h=getRotateInfo(moveable,rect,beforeInfo,beforeDirection,clientX,clientY,startDeg,throttleRotate))[0],beforeDist=_h[1],beforeRotate=_h[2],absoluteDelta=(_j=getRotateInfo(moveable,rect,absoluteInfo,direction,clientX,clientY,absoluteStartDeg,throttleRotate))[0],absoluteDist=_j[1],absoluteRotate=_j[2]);if(absoluteDelta||delta||beforeDelta||parentMoveable){var nextTransform=convertTransformFormat(datas,"rotate("+rotate+"deg)","rotate("+dist+"deg)"),inverseDist=function getRotateDist(moveable,rotateDist,fixedPosition,datas){return getTranslateDist(moveable,"rotate("+rotateDist+"deg)",getOriginDirection(moveable),fixedPosition,datas)}(moveable,dist,datas.fixedPosition,datas),inverseDelta=minus(plus(groupDelta||[0,0],inverseDist),datas.prevInverseDist||[0,0]);datas.prevInverseDist=inverseDist;var params=fillParams(moveable,e,moveable_esm_assign({delta:delta,dist:dist,rotate:rotate,beforeDist:beforeDist,beforeDelta:beforeDelta,beforeRotate:beforeRotate,absoluteDist:absoluteDist,absoluteDelta:absoluteDelta,absoluteRotate:absoluteRotate,isPinch:!!isPinch},fillTransformEvent(moveable,nextTransform,inverseDelta,isPinch,e)));return triggerEvent(moveable,"onRotate",params),params}}},dragControlEnd:function(moveable,e){var datas=e.datas,isDrag=e.isDrag;return!!datas.isRotate&&(datas.isRotate=!1,triggerEvent(moveable,"onRotateEnd",fillEndParams(moveable,e,{})),isDrag)},dragGroupControlCondition:dragControlCondition,dragGroupControlStart:function(moveable,e){var datas=e.datas,_a=moveable.state,parentLeft=_a.left,parentTop=_a.top,parentBeforeOrigin=_a.beforeOrigin,params=this.dragControlStart(moveable,e);if(!params)return!1;params.set(datas.beforeDirection*moveable.rotation);var events=triggerChildAbles(moveable,this,"dragControlStart",e,(function(child,ev){var _a=child.state,left=_a.left,top=_a.top,beforeOrigin=_a.beforeOrigin,childClient=plus(minus([left,top],[parentLeft,parentTop]),minus(beforeOrigin,parentBeforeOrigin));return ev.datas.groupClient=childClient,moveable_esm_assign(moveable_esm_assign({},ev),{parentRotate:0})})),result=triggerEvent(moveable,"onRotateGroupStart",moveable_esm_assign(moveable_esm_assign({},params),{targets:moveable.props.targets,events:events}));return datas.isRotate=!1!==result,!!datas.isRotate&&params},dragGroupControl:function(moveable,e){var datas=e.datas;if(datas.isRotate){var params=this.dragControl(moveable,e);if(params){var direction=datas.beforeDirection,parentRotate=params.beforeDist,rad=params.beforeDelta/180*Math.PI,events=triggerChildAbles(moveable,this,"dragControl",e,(function(_,ev){var _a=ev.datas.groupClient,prevX=_a[0],prevY=_a[1],_b=matrix_esm_rotate([prevX,prevY],rad*direction),clientX=_b[0],clientY=_b[1],delta=[clientX-prevX,clientY-prevY];return ev.datas.groupClient=[clientX,clientY],moveable_esm_assign(moveable_esm_assign({},ev),{parentRotate:parentRotate,groupDelta:delta})}));moveable.rotation=direction*params.beforeRotate;var nextParams=moveable_esm_assign({targets:moveable.props.targets,events:events,set:function(rotation){moveable.rotation=rotation}},params);return triggerEvent(moveable,"onRotateGroup",nextParams),nextParams}}},dragGroupControlEnd:function(moveable,e){var isDrag=e.isDrag;if(e.datas.isRotate)return this.dragControlEnd(moveable,e),triggerChildAbles(moveable,this,"dragControlEnd",e),triggerEvent(moveable,"onRotateGroupEnd",fillEndParams(moveable,e,{targets:moveable.props.targets})),isDrag},request:function(moveable){var datas={},distRotate=0,startRotation=moveable.getRotation();return{isControl:!0,requestStart:function(){return{datas:datas}},request:function(e){return"deltaRotate"in e?distRotate+=e.deltaRotate:"rotate"in e&&(distRotate=e.rotate-startRotation),{datas:datas,parentDist:distRotate}},requestEnd:function(){return{datas:datas,isDrag:!0}}}}},Resizable={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(moveable,React){var _a=moveable.props,resizable=_a.resizable,edge=_a.edge;if(resizable)return edge?renderDiagonalDirections(moveable,React):renderAllDirections(moveable,React)},dragControlCondition:directionCondition,dragControlStart:function(moveable,e){var _a,inputEvent=e.inputEvent,isPinch=e.isPinch,parentDirection=e.parentDirection,datas=e.datas,parentFlag=e.parentFlag,direction=parentDirection||(isPinch?[0,0]:getDirection(inputEvent.target)),_b=moveable.state,target=_b.target,width=_b.width,height=_b.height;if(!direction||!target)return!1;!isPinch&&setDragStart(moveable,e),datas.datas={},datas.direction=direction,datas.startOffsetWidth=width,datas.startOffsetHeight=height,datas.prevWidth=0,datas.prevHeight=0,_a=function getCSSSize(target){var style=moveable_esm_getComputedStyle(target);return[parseFloat(style.width),parseFloat(style.height)]}(target),datas.startWidth=_a[0],datas.startHeight=_a[1];var padding=[Math.max(0,width-datas.startWidth),Math.max(0,height-datas.startHeight)];if(datas.minSize=padding,datas.maxSize=[1/0,1/0],!parentFlag){var style=moveable_esm_getComputedStyle(target),position=style.position,minWidth=style.minWidth,minHeight=style.minHeight,maxWidth=style.maxWidth,maxHeight=style.maxHeight,isParentElement="static"===position||"relative"===position,container=isParentElement?target.parentElement:target.offsetParent,containerWidth=width,containerHeight=height;if(container&&(containerWidth=container.clientWidth,containerHeight=container.clientHeight,isParentElement)){var containerStyle=moveable_esm_getComputedStyle(container);containerWidth-=parseFloat(containerStyle.paddingLeft)||0,containerHeight-=parseFloat(containerStyle.paddingTop)||0}datas.minSize=plus([convertUnitSize(minWidth,containerWidth)||0,convertUnitSize(minHeight,containerHeight)||0],padding),datas.maxSize=plus([convertUnitSize(maxWidth,containerWidth)||1/0,convertUnitSize(maxHeight,containerHeight)||1/0],padding)}var transformOrigin=moveable.props.transformOrigin||"% %";function setRatio(ratio){datas.ratio=ratio&&isFinite(ratio)?ratio:0}function setFixedDirection(fixedDirection){datas.fixedDirection=fixedDirection,datas.fixedPosition=getAbsolutePosition(moveable,fixedDirection)}datas.transformOrigin=transformOrigin&&isString(transformOrigin)?transformOrigin.split(" "):transformOrigin,datas.isWidth=!direction[0]&&!direction[1]||direction[0]||!direction[1],setRatio(width/height),setFixedDirection([-direction[0],-direction[1]]);var params=fillParams(moveable,e,{direction:direction,set:function(_a){var startWidth=_a[0],startHeight=_a[1];datas.startWidth=startWidth,datas.startHeight=startHeight},setMin:function(minSize){datas.minSize=minSize},setMax:function(maxSize){datas.maxSize=[maxSize[0]||1/0,maxSize[1]||1/0]},setRatio:setRatio,setFixedDirection:setFixedDirection,setOrigin:function(origin){datas.transformOrigin=origin},dragStart:Draggable.dragStart(moveable,(new CustomGesto).dragStart([0,0],e))});return!1!==triggerEvent(moveable,"onResizeStart",params)&&(datas.isResize=!0,moveable.state.snapRenderInfo={request:e.isRequest,direction:direction}),!!datas.isResize&&params},dragControl:function(moveable,e){var _a,datas=e.datas,distX=e.distX,distY=e.distY,parentFlag=e.parentFlag,isPinch=e.isPinch,parentDistance=e.parentDistance,parentScale=e.parentScale,parentKeepRatio=e.parentKeepRatio,dragClient=e.dragClient,parentDist=e.parentDist,isRequest=e.isRequest,isResize=datas.isResize,transformOrigin=datas.transformOrigin,fixedDirection=datas.fixedDirection,startWidth=datas.startWidth,startHeight=datas.startHeight,prevWidth=datas.prevWidth,prevHeight=datas.prevHeight,minSize=datas.minSize,maxSize=datas.maxSize,ratio=datas.ratio,isWidth=datas.isWidth,startOffsetWidth=datas.startOffsetWidth,startOffsetHeight=datas.startOffsetHeight;if(isResize){var _b=moveable.props,_c=_b.throttleResize,throttleResize=void 0===_c?0:_c,parentMoveable=_b.parentMoveable,_d=_b.snapThreshold,snapThreshold=void 0===_d?5:_d,direction=datas.direction,sizeDirection=direction,distWidth=0,distHeight=0;direction[0]||direction[1]||(sizeDirection=[1,1]);var keepRatio=ratio&&(moveable.props.keepRatio||parentKeepRatio),fixedPosition=dragClient;if(dragClient||(fixedPosition=!parentFlag&&isPinch?getAbsolutePosition(moveable,[0,0]):datas.fixedPosition),parentDist)distWidth=parentDist[0],distHeight=parentDist[1],keepRatio&&(distWidth?distHeight||(distHeight=distWidth/ratio):distWidth=distHeight*ratio);else if(parentScale)distWidth=(parentScale[0]-1)*startOffsetWidth,distHeight=(parentScale[1]-1)*startOffsetHeight;else if(isPinch)parentDistance&&(distWidth=parentDistance,distHeight=parentDistance*startOffsetHeight/startOffsetWidth);else{var dist=getDragDist({datas:datas,distX:distX,distY:distY});if(distWidth=sizeDirection[0]*dist[0],distHeight=sizeDirection[1]*dist[1],keepRatio&&startOffsetWidth&&startOffsetHeight){var rad=getRad([0,0],dist),standardRad=getRad([0,0],sizeDirection),size=getDistSize([distWidth,distHeight]),signSize=Math.cos(rad-standardRad)*size;if(sizeDirection[0])if(sizeDirection[1]){var startWidthSize=2*sizeDirection[0]*startOffsetWidth,startHeightSize=2*sizeDirection[1]*startOffsetHeight,distSize=getDistSize([startWidthSize+dist[0],startHeightSize+dist[1]])-getDistSize([startWidthSize,startHeightSize]),ratioRad=getRad([0,0],[ratio,1]);distWidth=Math.cos(ratioRad)*distSize,distHeight=Math.sin(ratioRad)*distSize}else distHeight=(distWidth=signSize)*ratio;else distWidth=(distHeight=signSize)/ratio}else if(!keepRatio){var nextDirection=moveable_esm_spreadArrays(direction);startOffsetWidth||(dist[0]<0?nextDirection[0]=-1:dist[0]>0&&(nextDirection[0]=1)),startOffsetHeight||(dist[1]<0?nextDirection[1]=-1:dist[1]>0&&(nextDirection[1]=1)),direction=nextDirection,distWidth=(sizeDirection=nextDirection)[0]*dist[0],distHeight=sizeDirection[1]*dist[1]}}var nextWidth=sizeDirection[0]||keepRatio?Math.max(startOffsetWidth+distWidth,1e-7):startOffsetWidth,nextHeight=sizeDirection[1]||keepRatio?Math.max(startOffsetHeight+distHeight,1e-7):startOffsetHeight;keepRatio&&startOffsetWidth&&startOffsetHeight&&(isWidth?nextHeight=nextWidth/ratio:nextWidth=nextHeight*ratio);var snapDist=[0,0];if(isPinch||(snapDist=function checkSnapResize(moveable,width,height,direction,fixedPosition,isRequest,datas){if(!hasGuidelines(moveable,"resizable"))return[0,0];var _a=moveable.state,allMatrix=_a.allMatrix,is3d=_a.is3d;return checkSizeDist(moveable,(function(widthOffset,heightOffset){return getNextFixedPoses(allMatrix,width+widthOffset,height+heightOffset,fixedPosition,direction,is3d)}),width,height,direction,fixedPosition,isRequest,datas)}(moveable,nextWidth,nextHeight,direction,fixedPosition,isRequest,datas)),parentDist&&(!parentDist[0]&&(snapDist[0]=0),!parentDist[1]&&(snapDist[1]=0)),keepRatio){sizeDirection[0]&&sizeDirection[1]&&snapDist[0]&&snapDist[1]&&(Math.abs(snapDist[0])>Math.abs(snapDist[1])?snapDist[1]=0:snapDist[0]=0);var isNoSnap=!snapDist[0]&&!snapDist[1];isNoSnap&&(isWidth?nextWidth=moveable_esm_throttle(nextWidth,throttleResize):nextHeight=moveable_esm_throttle(nextHeight,throttleResize)),sizeDirection[0]&&!sizeDirection[1]||snapDist[0]&&!snapDist[1]||isNoSnap&&isWidth?nextHeight=(nextWidth+=snapDist[0])/ratio:(!sizeDirection[0]&&sizeDirection[1]||!snapDist[0]&&snapDist[1]||isNoSnap&&!isWidth)&&(nextWidth=(nextHeight+=snapDist[1])*ratio)}else startOffsetWidth+distWidth<-snapThreshold&&(snapDist[0]=0),startOffsetWidth+distHeight<-snapThreshold&&(snapDist[1]=0),nextWidth+=snapDist[0],nextHeight+=snapDist[1],snapDist[0]||(nextWidth=moveable_esm_throttle(nextWidth,throttleResize)),snapDist[1]||(nextHeight=moveable_esm_throttle(nextHeight,throttleResize));nextWidth=(_a=calculateBoundSize([nextWidth,nextHeight],minSize,maxSize,keepRatio))[0],nextHeight=_a[1];var delta=[(distWidth=(nextWidth=Math.round(nextWidth))-startOffsetWidth)-prevWidth,(distHeight=(nextHeight=Math.round(nextHeight))-startOffsetHeight)-prevHeight];datas.prevWidth=distWidth,datas.prevHeight=distHeight;var inverseDelta=getResizeDist(moveable,nextWidth,nextHeight,fixedDirection,fixedPosition,transformOrigin);if(parentMoveable||!delta.every((function(num){return!num}))||!inverseDelta.every((function(num){return!num}))){var params=fillParams(moveable,e,{width:startWidth+distWidth,height:startHeight+distHeight,offsetWidth:nextWidth,offsetHeight:nextHeight,direction:direction,dist:[distWidth,distHeight],delta:delta,isPinch:!!isPinch,drag:Draggable.drag(moveable,setCustomDrag(e,moveable.state,inverseDelta,!!isPinch,!1))});return triggerEvent(moveable,"onResize",params),params}}},dragControlAfter:function(moveable,e){var datas=e.datas,isResize=datas.isResize,startOffsetWidth=datas.startOffsetWidth,startOffsetHeight=datas.startOffsetHeight,prevWidth=datas.prevWidth,prevHeight=datas.prevHeight;if(isResize){var _a=moveable.state,errorWidth=_a.width-(startOffsetWidth+prevWidth),errorHeight=_a.height-(startOffsetHeight+prevHeight),isErrorWidth=Math.abs(errorWidth)>3,isErrorHeight=Math.abs(errorHeight)>3;return isErrorWidth&&(datas.startWidth+=errorWidth,datas.startOffsetWidth+=errorWidth,datas.prevWidth+=errorWidth),isErrorHeight&&(datas.startHeight+=errorHeight,datas.startOffsetHeight+=errorHeight,datas.prevHeight+=errorHeight),isErrorWidth||isErrorHeight?(this.dragControl(moveable,e),!0):void 0}},dragControlEnd:function(moveable,e){var datas=e.datas,isDrag=e.isDrag;return!!datas.isResize&&(datas.isResize=!1,triggerEvent(moveable,"onResizeEnd",fillEndParams(moveable,e,{})),isDrag)},dragGroupControlCondition:directionCondition,dragGroupControlStart:function(moveable,e){var datas=e.datas,params=this.dragControlStart(moveable,e);if(!params)return!1;var originalEvents=fillChildEvents(moveable,"resizable",e);function setDist(child,ev){var fixedDirection=datas.fixedDirection,fixedPosition=datas.fixedPosition,pos=getAbsolutePosition(child,fixedDirection),_a=calculate(createRotateMatrix(-moveable.rotation/180*Math.PI,3),[pos[0]-fixedPosition[0],pos[1]-fixedPosition[1],1],3),originalX=_a[0],originalY=_a[1];return ev.datas.originalX=originalX,ev.datas.originalY=originalY,ev}var events=triggerChildAbles(moveable,this,"dragControlStart",e,(function(child,ev){return setDist(child,ev)})),nextParams=moveable_esm_assign(moveable_esm_assign({},params),{targets:moveable.props.targets,events:events,setFixedDirection:function(fixedDirection){params.setFixedDirection(fixedDirection),events.forEach((function(ev,i){ev.setFixedDirection(fixedDirection),setDist(moveable.moveables[i],originalEvents[i])}))}}),result=triggerEvent(moveable,"onResizeGroupStart",nextParams);return datas.isResize=!1!==result,!!datas.isResize&&params},dragGroupControl:function(moveable,e){var datas=e.datas;if(datas.isResize){var params=this.dragControl(moveable,e);if(params){var offsetWidth=params.offsetWidth,offsetHeight=params.offsetHeight,dist=params.dist,keepRatio=moveable.props.keepRatio,parentScale=[offsetWidth/(offsetWidth-dist[0]),offsetHeight/(offsetHeight-dist[1])],fixedPosition=datas.fixedPosition,events=triggerChildAbles(moveable,this,"dragControl",e,(function(_,ev){var _a=calculate(createRotateMatrix(moveable.rotation/180*Math.PI,3),[ev.datas.originalX*parentScale[0],ev.datas.originalY*parentScale[1],1],3),clientX=_a[0],clientY=_a[1];return moveable_esm_assign(moveable_esm_assign({},ev),{parentDist:null,parentScale:parentScale,dragClient:plus(fixedPosition,[clientX,clientY]),parentKeepRatio:keepRatio})})),nextParams=moveable_esm_assign({targets:moveable.props.targets,events:events},params);return triggerEvent(moveable,"onResizeGroup",nextParams),nextParams}}},dragGroupControlEnd:function(moveable,e){var isDrag=e.isDrag;if(e.datas.isResize)return this.dragControlEnd(moveable,e),triggerChildAbles(moveable,this,"dragControlEnd",e),triggerEvent(moveable,"onResizeGroupEnd",fillEndParams(moveable,e,{targets:moveable.props.targets})),isDrag},request:function(moveable){var datas={},distWidth=0,distHeight=0,rect=moveable.getRect();return{isControl:!0,requestStart:function(e){return{datas:datas,parentDirection:e.direction||[1,1]}},request:function(e){return"offsetWidth"in e?distWidth=e.offsetWidth-rect.offsetWidth:"deltaWidth"in e&&(distWidth+=e.deltaWidth),"offsetHeight"in e?distHeight=e.offsetHeight-rect.offsetHeight:"deltaHeight"in e&&(distHeight+=e.deltaHeight),{datas:datas,parentDist:[distWidth,distHeight]}},requestEnd:function(){return{datas:datas,isDrag:!0}}}}},Scalable={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(moveable,React){var _a=moveable.props,resizable=_a.resizable,scalable=_a.scalable,edge=_a.edge;if(!resizable&&scalable)return edge?renderDiagonalDirections(moveable,React):renderAllDirections(moveable,React)},dragControlCondition:directionCondition,dragControlStart:function(moveable,e){var datas=e.datas,isPinch=e.isPinch,inputEvent=e.inputEvent,direction=e.parentDirection||(isPinch?[0,0]:getDirection(inputEvent.target)),_a=moveable.state,width=_a.width,height=_a.height,targetTransform=_a.targetTransform,target=_a.target,pos1=_a.pos1,pos2=_a.pos2,pos4=_a.pos4;if(!direction||!target)return!1;isPinch||setDragStart(moveable,e),datas.datas={},datas.transform=targetTransform,datas.prevDist=[1,1],datas.direction=direction,datas.width=width,datas.height=height,datas.startValue=[1,1];var scaleWidth=getDist(pos1,pos2),scaleHeight=getDist(pos2,pos4),isWidth=!direction[0]&&!direction[1]||direction[0]||!direction[1];function setRatio(ratio){datas.ratio=ratio&&isFinite(ratio)?ratio:0}function setFixedDirection(fixedDirection){datas.fixedDirection=fixedDirection,datas.fixedPosition=getAbsolutePosition(moveable,fixedDirection)}datas.scaleWidth=scaleWidth,datas.scaleHeight=scaleHeight,datas.scaleXRatio=scaleWidth/width,datas.scaleYRatio=scaleHeight/height,setDefaultTransformIndex(e,"scale"),datas.isWidth=isWidth,setRatio(getDist(pos1,pos2)/getDist(pos2,pos4)),setFixedDirection([-direction[0],-direction[1]]);var params=fillParams(moveable,e,moveable_esm_assign(moveable_esm_assign({direction:direction,set:function(scale){datas.startValue=scale},setRatio:setRatio,setFixedDirection:setFixedDirection},fillTransformStartEvent(e)),{dragStart:Draggable.dragStart(moveable,(new CustomGesto).dragStart([0,0],e))}));return!1!==triggerEvent(moveable,"onScaleStart",params)&&(datas.isScale=!0,moveable.state.snapRenderInfo={request:e.isRequest,direction:direction}),!!datas.isScale&&params},dragControl:function(moveable,e){resolveTransformEvent(e,"scale");var datas=e.datas,distX=e.distX,distY=e.distY,parentScale=e.parentScale,parentDistance=e.parentDistance,parentKeepRatio=e.parentKeepRatio,parentFlag=e.parentFlag,isPinch=e.isPinch,dragClient=e.dragClient,parentDist=e.parentDist,isRequest=e.isRequest,prevDist=datas.prevDist,direction=datas.direction,width=datas.width,height=datas.height,isScale=datas.isScale,startValue=datas.startValue,isWidth=datas.isWidth,ratio=datas.ratio,fixedDirection=datas.fixedDirection,scaleXRatio=datas.scaleXRatio,scaleYRatio=datas.scaleYRatio;if(!isScale)return!1;var _a=moveable.props,throttleScale=_a.throttleScale,parentMoveable=_a.parentMoveable,sizeDirection=direction;direction[0]||direction[1]||(sizeDirection=[1,1]);var keepRatio=ratio&&(moveable.props.keepRatio||parentKeepRatio),state=moveable.state,scaleX=1,scaleY=1,fixedPosition=dragClient;if(dragClient||(fixedPosition=!parentFlag&&isPinch?getAbsolutePosition(moveable,[0,0]):datas.fixedPosition),parentDist)scaleX=(width+parentDist[0])/width,scaleY=(height+parentDist[1])/height;else if(parentScale)scaleX=parentScale[0],scaleY=parentScale[1];else if(isPinch)parentDistance&&(scaleX=(width+parentDistance)/width,scaleY=(height+parentDistance*height/width)/height);else{var dragDist=getDragDist({datas:datas,distX:distX,distY:distY}),distScaleWidth=sizeDirection[0]*dragDist[0]*scaleXRatio,distScaleHeight=sizeDirection[1]*dragDist[1]*scaleYRatio;if(keepRatio&&width&&height)if(sizeDirection[0])if(sizeDirection[1]){var size=getDistSize([distScaleWidth,distScaleHeight]),dragRad=getRad([0,0],dragDist),standardRad=getRad([0,0],sizeDirection),signSize=Math.cos(dragRad-standardRad)*size,ratioRad=getRad([0,0],[ratio,1]);distScaleWidth=Math.cos(ratioRad)*signSize,distScaleHeight=Math.sin(ratioRad)*signSize}else distScaleHeight=distScaleWidth/ratio;else distScaleWidth=distScaleHeight*ratio;scaleX=(width+distScaleWidth/scaleXRatio)/width,scaleY=(height+distScaleHeight/scaleYRatio)/height}scaleX=sizeDirection[0]||keepRatio?scaleX*startValue[0]:startValue[0],scaleY=sizeDirection[1]||keepRatio?scaleY*startValue[1]:startValue[1],0===scaleX&&(scaleX=1e-9*(prevDist[0]>0?1:-1)),0===scaleY&&(scaleY=1e-9*(prevDist[1]>0?1:-1));var dist=[scaleX/startValue[0],scaleY/startValue[1]],scale=[scaleX,scaleY];if(!isPinch&&moveable.props.groupable){var stateDirection=(state.snapRenderInfo||{}).direction;isArray(stateDirection)&&(stateDirection[0]||stateDirection[1])&&(state.snapRenderInfo={direction:direction,request:e.isRequest})}var snapDist=[0,0];if(isPinch||(snapDist=checkSnapScale(moveable,dist,direction,isRequest,datas)),keepRatio){sizeDirection[0]&&sizeDirection[1]&&snapDist[0]&&snapDist[1]&&(Math.abs(snapDist[0]*width)>Math.abs(snapDist[1]*height)?snapDist[1]=0:snapDist[0]=0);var isNoSnap=!snapDist[0]&&!snapDist[1];if(isNoSnap&&(isWidth?dist[0]=moveable_esm_throttle(dist[0]*startValue[0],throttleScale)/startValue[0]:dist[1]=moveable_esm_throttle(dist[1]*startValue[1],throttleScale)/startValue[1]),sizeDirection[0]&&!sizeDirection[1]||snapDist[0]&&!snapDist[1]||isNoSnap&&isWidth){dist[0]+=snapDist[0];var snapHeight=width*dist[0]*startValue[0]/ratio;dist[1]=snapHeight/height/startValue[1]}else if(!sizeDirection[0]&&sizeDirection[1]||!snapDist[0]&&snapDist[1]||isNoSnap&&!isWidth){dist[1]+=snapDist[1];var snapWidth=height*dist[1]*startValue[1]*ratio;dist[0]=snapWidth/width/startValue[0]}}else dist[0]+=snapDist[0],dist[1]+=snapDist[1],snapDist[0]||(dist[0]=moveable_esm_throttle(dist[0]*startValue[0],throttleScale)/startValue[0]),snapDist[1]||(dist[1]=moveable_esm_throttle(dist[1]*startValue[1],throttleScale)/startValue[1]);0===dist[0]&&(dist[0]=1e-9*(prevDist[0]>0?1:-1)),0===dist[1]&&(dist[1]=1e-9*(prevDist[1]>0?1:-1));var delta=[dist[0]/prevDist[0],dist[1]/prevDist[1]];scale=function multiply2(pos1,pos2){return[pos1[0]*pos2[0],pos1[1]*pos2[1]]}(dist,startValue);var inverseDist=function getScaleDist(moveable,scaleDist,fixedDirection,fixedPosition,datas){return getTranslateDist(moveable,"scale("+scaleDist.join(", ")+")",fixedDirection,fixedPosition,datas)}(moveable,dist,fixedDirection,fixedPosition,datas),inverseDelta=minus(inverseDist,datas.prevInverseDist||[0,0]);if(datas.prevDist=dist,datas.prevInverseDist=inverseDist,scaleX===prevDist[0]&&scaleY===prevDist[1]&&inverseDelta.every((function(num){return!num}))&&!parentMoveable)return!1;var nextTransform=convertTransformFormat(datas,"scale("+scale.join(", ")+")","scale("+dist.join(", ")+")"),params=fillParams(moveable,e,moveable_esm_assign({offsetWidth:width,offsetHeight:height,direction:direction,scale:scale,dist:dist,delta:delta,isPinch:!!isPinch},fillTransformEvent(moveable,nextTransform,inverseDelta,isPinch,e)));return triggerEvent(moveable,"onScale",params),params},dragControlEnd:function(moveable,e){var datas=e.datas,isDrag=e.isDrag;return!!datas.isScale&&(datas.isScale=!1,triggerEvent(moveable,"onScaleEnd",fillEndParams(moveable,e,{})),isDrag)},dragGroupControlCondition:directionCondition,dragGroupControlStart:function(moveable,e){var datas=e.datas,params=this.dragControlStart(moveable,e);if(!params)return!1;var originalEvents=fillChildEvents(moveable,"resizable",e);function setDist(child,ev){var fixedDirection=datas.fixedDirection,fixedPosition=datas.fixedPosition,pos=getAbsolutePosition(child,fixedDirection),_a=calculate(createRotateMatrix(-moveable.rotation/180*Math.PI,3),[pos[0]-fixedPosition[0],pos[1]-fixedPosition[1],1],3),originalX=_a[0],originalY=_a[1];return ev.datas.originalX=originalX,ev.datas.originalY=originalY,ev}datas.moveableScale=moveable.scale;var events=triggerChildAbles(moveable,this,"dragControlStart",e,(function(child,ev){return setDist(child,ev)})),nextParams=moveable_esm_assign(moveable_esm_assign({},params),{targets:moveable.props.targets,events:events,setFixedDirection:function(fixedDirection){params.setFixedDirection(fixedDirection),events.forEach((function(ev,i){ev.setFixedDirection(fixedDirection),setDist(moveable.moveables[i],originalEvents[i])}))}}),result=triggerEvent(moveable,"onScaleGroupStart",nextParams);return datas.isScale=!1!==result,!!datas.isScale&&nextParams},dragGroupControl:function(moveable,e){var datas=e.datas;if(datas.isScale){var params=this.dragControl(moveable,e);if(params){var moveableScale=datas.moveableScale;moveable.scale=[params.scale[0]*moveableScale[0],params.scale[1]*moveableScale[1]];var keepRatio=moveable.props.keepRatio,dist=params.dist,scale=params.scale,fixedPosition=datas.fixedPosition,events=triggerChildAbles(moveable,this,"dragControl",e,(function(_,ev){var _a=calculate(createRotateMatrix(moveable.rotation/180*Math.PI,3),[ev.datas.originalX*dist[0],ev.datas.originalY*dist[1],1],3),clientX=_a[0],clientY=_a[1];return moveable_esm_assign(moveable_esm_assign({},ev),{parentDist:null,parentScale:scale,parentKeepRatio:keepRatio,dragClient:plus(fixedPosition,[clientX,clientY])})})),nextParams=moveable_esm_assign({targets:moveable.props.targets,events:events},params);return triggerEvent(moveable,"onScaleGroup",nextParams),nextParams}}},dragGroupControlEnd:function(moveable,e){var isDrag=e.isDrag;if(e.datas.isScale)return this.dragControlEnd(moveable,e),triggerChildAbles(moveable,this,"dragControlEnd",e),triggerEvent(moveable,"onScaleGroupEnd",fillEndParams(moveable,e,{targets:moveable.props.targets})),isDrag},request:function(){var datas={},distWidth=0,distHeight=0;return{isControl:!0,requestStart:function(e){return{datas:datas,parentDirection:e.direction||[1,1]}},request:function(e){return distWidth+=e.deltaWidth,distHeight+=e.deltaHeight,{datas:datas,parentDist:[distWidth,distHeight]}},requestEnd:function(){return{datas:datas,isDrag:!0}}}}};function getMiddleLinePos(pos1,pos2){return pos1.map((function(pos,i){return function utils_esm_dot(a1,a2,b1,b2){return(a1*b2+a2*b1)/(b1+b2)}(pos,pos2[i],1,2)}))}function getTriangleRad(pos1,pos2,pos3){var rad1=getRad(pos1,pos2),rad=getRad(pos1,pos3)-rad1;return rad>=0?rad:rad+2*Math.PI}var Warpable={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(moveable,React){var _a=moveable.props,resizable=_a.resizable,scalable=_a.scalable,warpable=_a.warpable,zoom=_a.zoom;if(resizable||scalable||!warpable)return[];var _b=moveable.state,pos1=_b.pos1,pos2=_b.pos2,pos3=_b.pos3,pos4=_b.pos4,linePosFrom1=getMiddleLinePos(pos1,pos2),linePosFrom2=getMiddleLinePos(pos2,pos1),linePosFrom3=getMiddleLinePos(pos1,pos3),linePosFrom4=getMiddleLinePos(pos3,pos1),linePosTo1=getMiddleLinePos(pos3,pos4),linePosTo2=getMiddleLinePos(pos4,pos3),linePosTo3=getMiddleLinePos(pos2,pos4),linePosTo4=getMiddleLinePos(pos4,pos2);return moveable_esm_spreadArrays([React.createElement("div",{className:prefix("line"),key:"middeLine1",style:getLineStyle(linePosFrom1,linePosTo1,zoom)}),React.createElement("div",{className:prefix("line"),key:"middeLine2",style:getLineStyle(linePosFrom2,linePosTo2,zoom)}),React.createElement("div",{className:prefix("line"),key:"middeLine3",style:getLineStyle(linePosFrom3,linePosTo3,zoom)}),React.createElement("div",{className:prefix("line"),key:"middeLine4",style:getLineStyle(linePosFrom4,linePosTo4,zoom)})],renderAllDirections(moveable,React))},dragControlCondition:function(moveable,e){return!e.isRequest&&hasClass(e.inputEvent.target,prefix("direction"))},dragControlStart:function(moveable,e){var datas=e.datas,inputEvent=e.inputEvent,target=moveable.props.target,direction=getDirection(inputEvent.target);if(!direction||!target)return!1;var state=moveable.state,transformOrigin=state.transformOrigin,is3d=state.is3d,targetTransform=state.targetTransform,targetMatrix=state.targetMatrix,width=state.width,height=state.height,left=state.left,top=state.top;return datas.datas={},datas.targetTransform=targetTransform,datas.warpTargetMatrix=is3d?targetMatrix:convertDimension(targetMatrix,3,4),datas.targetInverseMatrix=ignoreDimension(invert(datas.warpTargetMatrix,4),3,4),datas.direction=direction,datas.left=left,datas.top=top,datas.poses=[[0,0],[width,0],[0,height],[width,height]].map((function(p){return minus(p,transformOrigin)})),datas.nextPoses=datas.poses.map((function(_a){var x=_a[0],y=_a[1];return calculate(datas.warpTargetMatrix,[x,y,0,1],4)})),datas.startValue=createIdentityMatrix(4),datas.prevMatrix=createIdentityMatrix(4),datas.absolutePoses=getAbsolutePosesByState(state),datas.posIndexes=getPosIndexesByDirection(direction),setDragStart(moveable,e),setDefaultTransformIndex(e,"matrix3d"),state.snapRenderInfo={request:e.isRequest,direction:direction},!1!==triggerEvent(moveable,"onWarpStart",fillParams(moveable,e,moveable_esm_assign({set:function(matrix){datas.startValue=matrix}},fillTransformStartEvent(e))))&&(datas.isWarp=!0),datas.isWarp},dragControl:function(moveable,e){var datas=e.datas,isRequest=e.isRequest,distX=e.distX,distY=e.distY,targetInverseMatrix=datas.targetInverseMatrix,prevMatrix=datas.prevMatrix,isWarp=datas.isWarp,startValue=datas.startValue,poses=datas.poses,posIndexes=datas.posIndexes,absolutePoses=datas.absolutePoses;if(!isWarp)return!1;if(resolveTransformEvent(e,"matrix3d"),hasGuidelines(moveable,"warpable")){var selectedPoses=posIndexes.map((function(index){return absolutePoses[index]}));selectedPoses.length>1&&selectedPoses.push([(selectedPoses[0][0]+selectedPoses[1][0])/2,(selectedPoses[0][1]+selectedPoses[1][1])/2]);var _a=checkMoveableSnapBounds(moveable,isRequest,selectedPoses.map((function(pos){return[pos[0]+distX,pos[1]+distY]}))),horizontalSnapInfo=_a.horizontal,verticalSnapInfo=_a.vertical;distY-=horizontalSnapInfo.offset,distX-=verticalSnapInfo.offset}var dist=getDragDist({datas:datas,distX:distX,distY:distY},!0),nextPoses=datas.nextPoses.slice();if(posIndexes.forEach((function(index){nextPoses[index]=plus(nextPoses[index],dist)})),!NEARBY_POS.every((function(nearByPoses){return function isValidPos(poses1,poses2){var rad1=getTriangleRad(poses1[0],poses1[1],poses1[2]),rad2=getTriangleRad(poses2[0],poses2[1],poses2[2]),pi=Math.PI;return!(rad1>=pi&&rad2<=pi||rad1<=pi&&rad2>=pi)}(nearByPoses.map((function(i){return poses[i]})),nearByPoses.map((function(i){return nextPoses[i]})))})))return!1;var h=createWarpMatrix(poses[0],poses[2],poses[1],poses[3],nextPoses[0],nextPoses[2],nextPoses[1],nextPoses[3]);if(!h.length)return!1;var matrix=getTransfromMatrix(datas,multiply(targetInverseMatrix,h,4),!0),delta=multiply(invert(prevMatrix,4),matrix,4);datas.prevMatrix=matrix;var totalMatrix=multiply(startValue,matrix,4),nextTransform=convertTransformFormat(datas,"matrix3d("+totalMatrix.join(", ")+")","matrix3d("+matrix.join(", ")+")");return fillOriginalTransform(e,nextTransform),triggerEvent(moveable,"onWarp",fillParams(moveable,e,{delta:delta,matrix:totalMatrix,dist:matrix,multiply:multiply,transform:nextTransform})),!0},dragControlEnd:function(moveable,e){var datas=e.datas,isDrag=e.isDrag;return!!datas.isWarp&&(datas.isWarp=!1,triggerEvent(moveable,"onWarpEnd",fillEndParams(moveable,e,{})),isDrag)}},AREA_PIECES=prefix("area-pieces"),AREA_PIECE=prefix("area-piece"),AVOID=prefix("avoid");function restoreStyle(moveable){var el=moveable.areaElement,_a=moveable.state,width=_a.width,height=_a.height;!function removeClass(element,className){if(element.classList)element.classList.remove(className);else{var reg=new RegExp("(\\s|^)"+className+"(\\s|$)");element.className=element.className.replace(reg," ")}}(el,AVOID),el.style.cssText+="left: 0px; top: 0px; width: "+width+"px; height: "+height+"px"}function renderPieces(React){return React.createElement("div",{key:"area_pieces",className:AREA_PIECES},React.createElement("div",{className:AREA_PIECE}),React.createElement("div",{className:AREA_PIECE}),React.createElement("div",{className:AREA_PIECE}),React.createElement("div",{className:AREA_PIECE}))}var DragArea={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(moveable,React){var _a=moveable.props,target=_a.target,dragArea=_a.dragArea,groupable=_a.groupable,passDragArea=_a.passDragArea,_b=moveable.state,width=_b.width,height=_b.height,renderPoses=_b.renderPoses,className=passDragArea?prefix("area","pass"):prefix("area");if(groupable)return[React.createElement("div",{key:"area",ref:ref(moveable,"areaElement"),className:className}),renderPieces(React)];if(!target||!dragArea)return[];var h=createWarpMatrix([0,0],[width,0],[0,height],[width,height],renderPoses[0],renderPoses[1],renderPoses[2],renderPoses[3]),transform=h.length?makeMatrixCSS(h,!0):"none";return[React.createElement("div",{key:"area",ref:ref(moveable,"areaElement"),className:className,style:{top:"0px",left:"0px",width:width+"px",height:height+"px",transformOrigin:"0 0",transform:transform}}),renderPieces(React)]},dragStart:function(moveable,_a){var datas=_a.datas,clientX=_a.clientX,clientY=_a.clientY;if(!_a.inputEvent)return!1;datas.isDragArea=!1;var areaElement=moveable.areaElement,state=moveable.state,moveableClientRect=state.moveableClientRect,renderPoses=state.renderPoses,rootMatrix=state.rootMatrix,is3d=state.is3d,left=moveableClientRect.left,top=moveableClientRect.top,_b=getRect(renderPoses),relativeLeft=_b.left,relativeTop=_b.top,width=_b.width,height=_b.height,_c=calculateInversePosition(rootMatrix,[clientX-left,clientY-top],is3d?4:3),posX=_c[0],posY=_c[1],rects=[{left:relativeLeft,top:relativeTop,width:width,height:(posY-=relativeTop)-10},{left:relativeLeft,top:relativeTop,width:(posX-=relativeLeft)-10,height:height},{left:relativeLeft,top:relativeTop+posY+10,width:width,height:height-posY-10},{left:relativeLeft+posX+10,top:relativeTop,width:width-posX-10,height:height}],children=[].slice.call(areaElement.nextElementSibling.children);rects.forEach((function(rect,i){children[i].style.cssText="left: "+rect.left+"px;top: "+rect.top+"px; width: "+rect.width+"px; height: "+rect.height+"px;"})),function addClass(element,className){element.classList?element.classList.add(className):element.className+=" "+className}(areaElement,AVOID),state.disableNativeEvent=!0},drag:function(moveable,_a){var datas=_a.datas,inputEvent=_a.inputEvent;if(this.enableNativeEvent(moveable),!inputEvent)return!1;datas.isDragArea||(datas.isDragArea=!0,restoreStyle(moveable))},dragEnd:function(moveable,e){this.enableNativeEvent(moveable);var inputEvent=e.inputEvent,datas=e.datas;if(!inputEvent)return!1;datas.isDragArea||restoreStyle(moveable)},dragGroupStart:function(moveable,e){return this.dragStart(moveable,e)},dragGroup:function(moveable,e){return this.drag(moveable,e)},dragGroupEnd:function(moveable,e){return this.dragEnd(moveable,e)},unset:function(moveable){restoreStyle(moveable),moveable.state.disableNativeEvent=!1},enableNativeEvent:function(moveable){var state=moveable.state;state.disableNativeEvent&&requestAnimationFrame((function(){state.disableNativeEvent=!1}))}},Origin=makeAble("origin",{render:function(moveable,React){var zoom=moveable.props.zoom,_a=moveable.state,beforeOrigin=_a.beforeOrigin,rotation=_a.rotation;return[React.createElement("div",{className:prefix("control","origin"),style:getControlTransform(rotation,zoom,beforeOrigin),key:"beforeOrigin"})]}});function moveable_esm_getDefaultScrollPosition(e){var scrollContainer=e.scrollContainer;return[scrollContainer.scrollLeft,scrollContainer.scrollTop]}var Scrollable={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(moveable,e){var _a=moveable.props.scrollContainer,scrollContainer=void 0===_a?moveable.getContainer():_a,dragScroll=new dragscroll_esm,scrollContainerElement=getRefTarget(scrollContainer,!0);e.datas.dragScroll=dragScroll;var gestoName=e.isControl?"controlGesto":"targetGesto",targets=e.targets;dragScroll.on("scroll",(function(_a){var container=_a.container,direction=_a.direction,params=fillParams(moveable,e,{scrollContainer:container,direction:direction}),eventName=targets?"onScrollGroup":"onScroll";targets&&(params.targets=targets),triggerEvent(moveable,eventName,params)})).on("move",(function(_a){var offsetX=_a.offsetX,offsetY=_a.offsetY;moveable[gestoName].scrollBy(offsetX,offsetY,e.inputEvent,!1)})),dragScroll.dragStart(e,{container:scrollContainerElement})},checkScroll:function(moveable,e){var dragScroll=e.datas.dragScroll;if(dragScroll){var _a=moveable.props,_b=_a.scrollContainer,scrollContainer=void 0===_b?moveable.getContainer():_b,_c=_a.scrollThreshold,scrollThreshold=void 0===_c?0:_c,_d=_a.getScrollPosition,getScrollPosition=void 0===_d?moveable_esm_getDefaultScrollPosition:_d;return dragScroll.drag(e,{container:scrollContainer,threshold:scrollThreshold,getScrollPosition:function(ev){return getScrollPosition({scrollContainer:ev.container,direction:ev.direction})}}),!0}},drag:function(moveable,e){return this.checkScroll(moveable,e)},dragEnd:function(moveable,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(moveable,e){return this.dragStart(moveable,moveable_esm_assign(moveable_esm_assign({},e),{isControl:!0}))},dragControl:function(moveable,e){return this.drag(moveable,e)},dragControlEnd:function(moveable,e){return this.dragEnd(moveable,e)},dragGroupStart:function(moveable,e){return this.dragStart(moveable,moveable_esm_assign(moveable_esm_assign({},e),{targets:moveable.props.targets}))},dragGroup:function(moveable,e){return this.drag(moveable,moveable_esm_assign(moveable_esm_assign({},e),{targets:moveable.props.targets}))},dragGroupEnd:function(moveable,e){return this.dragEnd(moveable,moveable_esm_assign(moveable_esm_assign({},e),{targets:moveable.props.targets}))},dragGroupControlStart:function(moveable,e){return this.dragStart(moveable,moveable_esm_assign(moveable_esm_assign({},e),{targets:moveable.props.targets,isControl:!0}))},dragGroupContro:function(moveable,e){return this.drag(moveable,moveable_esm_assign(moveable_esm_assign({},e),{targets:moveable.props.targets}))},dragGroupControEnd:function(moveable,e){return this.dragEnd(moveable,moveable_esm_assign(moveable_esm_assign({},e),{targets:moveable.props.targets}))}},Default={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,props:Object},events:{}},Padding=makeAble("padding",{render:function(moveable,React){var props=moveable.props;if(props.dragArea)return[];var padding=props.padding||{},_a=padding.left,left=void 0===_a?0:_a,_b=padding.top,top=void 0===_b?0:_b,_c=padding.right,right=void 0===_c?0:_c,_d=padding.bottom,bottom=void 0===_d?0:_d,_e=moveable.state,renderPoses=_e.renderPoses,poses=[_e.pos1,_e.pos2,_e.pos3,_e.pos4],paddingDirections=[];return left>0&&paddingDirections.push([0,2]),top>0&&paddingDirections.push([0,1]),right>0&&paddingDirections.push([1,3]),bottom>0&&paddingDirections.push([2,3]),paddingDirections.map((function(_a,i){var dir1=_a[0],dir2=_a[1],h=createWarpMatrix([0,0],[100,0],[0,100],[100,100],poses[dir1],poses[dir2],renderPoses[dir1],renderPoses[dir2]);if(h.length)return React.createElement("div",{key:"padding"+i,className:prefix("padding"),style:{transform:makeMatrixCSS(h,!0)}})}))}}),RADIUS_DIRECTIONS=["nw","ne","se","sw"];function calculateRatio(values,size){var sumSize=values[0]+values[1],sumRatio=sumSize>size?size/sumSize:1;return values[0]*=sumRatio,values[1]=size-values[1]*sumRatio,values}var HORIZONTAL_RADIUS_ORDER=[1,2,5,6],VERTICAL_RADIUS_ORDER=[0,3,4,7],HORIZONTAL_RADIUS_DIRECTIONS=[1,-1,-1,1],VERTICAL_RADIUS_DIRECTIONS=[1,1,-1,-1];function getRadiusStyles(poses,controlPoses,isRelative,width,height,left,top,right,bottom){void 0===left&&(left=0),void 0===top&&(top=0),void 0===right&&(right=width),void 0===bottom&&(bottom=height);var clipStyles=[],isVertical=!1,raws=poses.map((function(pos,i){var _a=controlPoses[i],horizontal=_a.horizontal,vertical=_a.vertical;if(vertical&&!isVertical&&(isVertical=!0,clipStyles.push("/")),isVertical){var rawPos=Math.max(0,1===vertical?pos[1]-top:bottom-pos[1]);return clipStyles.push(convertCSSSize(rawPos,height,isRelative)),rawPos}rawPos=Math.max(0,1===horizontal?pos[0]-left:right-pos[0]);return clipStyles.push(convertCSSSize(rawPos,width,isRelative)),rawPos}));return{styles:clipStyles,raws:raws}}function getRadiusRange(controlPoses){for(var horizontalRange=[0,0],verticalRange=[0,0],length=controlPoses.length,i=0;i<length;++i){var clipPose=controlPoses[i];clipPose.sub&&(clipPose.horizontal&&(0===horizontalRange[1]&&(horizontalRange[0]=i),horizontalRange[1]=i-horizontalRange[0]+1,verticalRange[0]=i+1),clipPose.vertical&&(0===verticalRange[1]&&(verticalRange[0]=i),verticalRange[1]=i-verticalRange[0]+1))}return{horizontalRange:horizontalRange,verticalRange:verticalRange}}function getRadiusValues(values,width,height,left,top,minCounts){var _a,_b,_c,_d;void 0===minCounts&&(minCounts=[0,0]);var splitIndex=values.indexOf("/"),splitLength=(splitIndex>-1?values.slice(0,splitIndex):values).length,horizontalValues=values.slice(0,splitLength),verticalValues=values.slice(splitLength+1),_e=horizontalValues[0],nwValue=void 0===_e?"0px":_e,_f=horizontalValues[1],neValue=void 0===_f?nwValue:_f,_g=horizontalValues[2],seValue=void 0===_g?nwValue:_g,_h=horizontalValues[3],swValue=void 0===_h?neValue:_h,_j=verticalValues[0],wnValue=void 0===_j?nwValue:_j,_k=verticalValues[1],enValue=void 0===_k?wnValue:_k,_l=verticalValues[2],esValue=void 0===_l?wnValue:_l,_m=verticalValues[3],wsValue=void 0===_m?enValue:_m,horizontalRawPoses=[nwValue,neValue,seValue,swValue].map((function(pos){return convertUnitSize(pos,width)})),verticalRawPoses=[wnValue,enValue,esValue,wsValue].map((function(pos){return convertUnitSize(pos,height)})),horizontalPoses=horizontalRawPoses.slice(),verticalPoses=verticalRawPoses.slice();_a=calculateRatio([horizontalPoses[0],horizontalPoses[1]],width),horizontalPoses[0]=_a[0],horizontalPoses[1]=_a[1],_b=calculateRatio([horizontalPoses[3],horizontalPoses[2]],width),horizontalPoses[3]=_b[0],horizontalPoses[2]=_b[1],_c=calculateRatio([verticalPoses[0],verticalPoses[3]],height),verticalPoses[0]=_c[0],verticalPoses[3]=_c[1],_d=calculateRatio([verticalPoses[1],verticalPoses[2]],height),verticalPoses[1]=_d[0],verticalPoses[2]=_d[1];var nextHorizontalPoses=horizontalPoses.slice(0,Math.max(minCounts[0],horizontalValues.length)),nextVerticalPoses=verticalPoses.slice(0,Math.max(minCounts[1],verticalValues.length));return moveable_esm_spreadArrays(nextHorizontalPoses.map((function(pos,i){var direction=RADIUS_DIRECTIONS[i];return{horizontal:HORIZONTAL_RADIUS_DIRECTIONS[i],vertical:0,pos:[left+pos,top+(-1===VERTICAL_RADIUS_DIRECTIONS[i]?height:0)],sub:!0,raw:horizontalRawPoses[i],direction:direction}})),nextVerticalPoses.map((function(pos,i){var direction=RADIUS_DIRECTIONS[i];return{horizontal:0,vertical:VERTICAL_RADIUS_DIRECTIONS[i],pos:[left+(-1===HORIZONTAL_RADIUS_DIRECTIONS[i]?width:0),top+pos],sub:!0,raw:verticalRawPoses[i],direction:direction}})))}function removeRadiusPos(controlPoses,poses,index,startIndex,length){void 0===length&&(length=poses.length);var _a=getRadiusRange(controlPoses.slice(startIndex)),horizontalRange=_a.horizontalRange,verticalRange=_a.verticalRange,radiuslIndex=index-startIndex,deleteCount=0;if(0===radiuslIndex)deleteCount=length;else if(radiuslIndex>0&&radiuslIndex<horizontalRange[1])deleteCount=horizontalRange[1]-radiuslIndex;else{if(!(radiuslIndex>=verticalRange[0]))return;deleteCount=verticalRange[0]+verticalRange[1]-radiuslIndex}controlPoses.splice(index,deleteCount),poses.splice(index,deleteCount)}function addRadiusPos(controlPoses,poses,startIndex,horizontalIndex,verticalIndex,distX,distY,right,bottom,left,top){void 0===left&&(left=0),void 0===top&&(top=0);var _a=getRadiusRange(controlPoses.slice(startIndex)),horizontalRange=_a.horizontalRange,verticalRange=_a.verticalRange;if(horizontalIndex>-1)for(var radiusX=1===HORIZONTAL_RADIUS_DIRECTIONS[horizontalIndex]?distX-left:right-distX,i=horizontalRange[1];i<=horizontalIndex;++i){var y=1===VERTICAL_RADIUS_DIRECTIONS[i]?top:bottom,x=0;if(horizontalIndex===i?x=distX:0===i?x=left+radiusX:-1===HORIZONTAL_RADIUS_DIRECTIONS[i]&&(x=right-(poses[startIndex][0]-left)),controlPoses.splice(startIndex+i,0,{horizontal:HORIZONTAL_RADIUS_DIRECTIONS[i],vertical:0,pos:[x,y]}),poses.splice(startIndex+i,0,[x,y]),0===i)break}else if(verticalIndex>-1){var radiusY=1===VERTICAL_RADIUS_DIRECTIONS[verticalIndex]?distY-top:bottom-distY;if(0===horizontalRange[1]&&0===verticalRange[1]){var pos=[left+radiusY,top];controlPoses.push({horizontal:HORIZONTAL_RADIUS_DIRECTIONS[0],vertical:0,pos:pos}),poses.push(pos)}var startVerticalIndex=verticalRange[0];for(i=verticalRange[1];i<=verticalIndex;++i){x=1===HORIZONTAL_RADIUS_DIRECTIONS[i]?left:right,y=0;if(verticalIndex===i?y=distY:0===i?y=top+radiusY:1===VERTICAL_RADIUS_DIRECTIONS[i]?y=poses[startIndex+startVerticalIndex][1]:-1===VERTICAL_RADIUS_DIRECTIONS[i]&&(y=bottom-(poses[startIndex+startVerticalIndex][1]-top)),controlPoses.push({horizontal:0,vertical:VERTICAL_RADIUS_DIRECTIONS[i],pos:[x,y]}),poses.push([x,y]),0===i)break}}}function splitRadiusPoses(controlPoses,raws){return void 0===raws&&(raws=controlPoses.map((function(pos){return pos.raw}))),{horizontals:controlPoses.map((function(pos,i){return pos.horizontal?raws[i]:null})).filter((function(pos){return null!=pos})),verticals:controlPoses.map((function(pos,i){return pos.vertical?raws[i]:null})).filter((function(pos){return null!=pos}))}}var CLIP_DIRECTIONS=[[0,-1,"n"],[1,0,"e"]],CLIP_RECT_DIRECTIONS=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function getClipStyles(moveable,clipPath,poses){var clipRelative=moveable.props.clipRelative,_a=moveable.state,width=_a.width,height=_a.height,_b=clipPath,clipType=_b.type,clipPoses=_b.poses,isRect="rect"===clipType,isCircle="circle"===clipType;if("polygon"===clipType)return poses.map((function(pos){return convertCSSSize(pos[0],width,clipRelative)+" "+convertCSSSize(pos[1],height,clipRelative)}));if(isRect||"inset"===clipType){var top=poses[1][1],right=poses[3][0],left=poses[7][0],bottom=poses[5][1];if(isRect)return[top,right,bottom,left].map((function(pos){return pos+"px"}));var clipStyles=[top,width-right,height-bottom,left].map((function(pos,i){return convertCSSSize(pos,i%2?width:height,clipRelative)}));if(poses.length>8){var _c=minus(poses[4],poses[0]),subWidth=_c[0],subHeight=_c[1];clipStyles.push.apply(clipStyles,moveable_esm_spreadArrays(["round"],getRadiusStyles(poses.slice(8),clipPoses.slice(8),clipRelative,subWidth,subHeight,left,top,right,bottom).styles))}return clipStyles}if(isCircle||"ellipse"===clipType){var center=poses[0],ry=convertCSSSize(Math.abs(poses[1][1]-center[1]),isCircle?Math.sqrt((width*width+height*height)/2):height,clipRelative);return(clipStyles=isCircle?[ry]:[convertCSSSize(Math.abs(poses[2][0]-center[0]),width,clipRelative),ry]).push("at",convertCSSSize(center[0],width,clipRelative),convertCSSSize(center[1],height,clipRelative)),clipStyles}}function getRectPoses(top,right,bottom,left){var xs=[left,(left+right)/2,right],ys=[top,(top+bottom)/2,bottom];return CLIP_RECT_DIRECTIONS.map((function(_a){var dirx=_a[0],diry=_a[1],dir=_a[2],x=xs[dirx+1],y=ys[diry+1];return{vertical:Math.abs(diry),horizontal:Math.abs(dirx),direction:dir,pos:[x,y]}}))}function getClipPath(target,width,height,defaultClip,customClip){var _a,_b,_c,_d,_e,_f,_g,clipText=customClip;if(!clipText){var style=moveable_esm_getComputedStyle(target),clipPath=style.clipPath;clipText="none"!==clipPath?clipPath:style.clip}if(clipText&&"none"!==clipText&&"auto"!==clipText||(clipText=defaultClip)){var _h=splitBracket(clipText),_j=_h.prefix,clipPrefix=void 0===_j?clipText:_j,_k=_h.value,value=void 0===_k?"":_k,isCircle="circle"===clipPrefix,splitter=" ";if("polygon"===clipPrefix)return splitter=",",{type:clipPrefix,clipText:clipText,poses:poses=(values=splitComma(value||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(pos){var _a=pos.split(" "),xPos=_a[0],yPos=_a[1];return{vertical:1,horizontal:1,pos:[convertUnitSize(xPos,width),convertUnitSize(yPos,height)]}})),splitter:splitter};if(isCircle||"ellipse"===clipPrefix){var xPos="",yPos="",radiusX_1=0,radiusY_1=0,values=splitSpace(value);if(isCircle){var radius;radius=void 0===(_a=values[0])?"50%":_a,xPos=void 0===(_b=values[2])?"50%":_b,yPos=void 0===(_c=values[3])?"50%":_c,radiusX_1=convertUnitSize(radius,Math.sqrt((width*width+height*height)/2)),radiusY_1=radiusX_1}else{var xRadius,yRadius;xRadius=void 0===(_d=values[0])?"50%":_d,yRadius=void 0===(_e=values[1])?"50%":_e,xPos=void 0===(_f=values[3])?"50%":_f,yPos=void 0===(_g=values[4])?"50%":_g,radiusX_1=convertUnitSize(xRadius,width),radiusY_1=convertUnitSize(yRadius,height)}var centerPos_1=[convertUnitSize(xPos,width),convertUnitSize(yPos,height)],poses=moveable_esm_spreadArrays([{vertical:1,horizontal:1,pos:centerPos_1,direction:"nesw"}],CLIP_DIRECTIONS.slice(0,isCircle?1:2).map((function(dir){return{vertical:Math.abs(dir[1]),horizontal:dir[0],direction:dir[2],sub:!0,pos:[centerPos_1[0]+dir[0]*radiusX_1,centerPos_1[1]+dir[1]*radiusY_1]}})));return{type:clipPrefix,clipText:clipText,radiusX:radiusX_1,radiusY:radiusY_1,left:centerPos_1[0]-radiusX_1,top:centerPos_1[1]-radiusY_1,poses:poses,splitter:splitter}}if("inset"===clipPrefix){var roundIndex=(values=splitSpace(value||"0 0 0 0")).indexOf("round"),rectLength=(roundIndex>-1?values.slice(0,roundIndex):values).length,radiusValues=values.slice(rectLength+1),_l=values.slice(0,rectLength),topValue=_l[0],_m=_l[1],rightValue=void 0===_m?topValue:_m,_o=_l[2],bottomValue=void 0===_o?topValue:_o,_p=_l[3],leftValue=void 0===_p?rightValue:_p,_q=[topValue,bottomValue].map((function(pos){return convertUnitSize(pos,height)})),top=_q[0],bottom=_q[1],_r=[leftValue,rightValue].map((function(pos){return convertUnitSize(pos,width)})),left=_r[0],right=_r[1],nextRight=width-right,nextBottom=height-bottom,radiusPoses=getRadiusValues(radiusValues,nextRight-left,nextBottom-top,left,top);return{type:"inset",clipText:clipText,poses:poses=moveable_esm_spreadArrays(getRectPoses(top,nextRight,nextBottom,left),radiusPoses),top:top,left:left,right:nextRight,bottom:nextBottom,radius:radiusValues,splitter:splitter}}if("rect"===clipPrefix){splitter=",";var _s=(values=splitComma(value||"0px, "+width+"px, "+height+"px, 0px")).map((function(pos){return splitUnit(pos).value}));return{type:"rect",clipText:clipText,poses:poses=getRectPoses(top=_s[0],right=_s[1],bottom=_s[2],left=_s[3]),top:top,right:right,bottom:bottom,left:left,values:values,splitter:splitter}}}}var Clippable={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(moveable,React){var _a=moveable.props,customClipPath=_a.customClipPath,defaultClipPath=_a.defaultClipPath,clipArea=_a.clipArea,zoom=_a.zoom,_b=moveable.state,target=_b.target,width=_b.width,height=_b.height,allMatrix=_b.allMatrix,is3d=_b.is3d,left=_b.left,top=_b.top,pos1=_b.pos1,pos2=_b.pos2,pos3=_b.pos3,pos4=_b.pos4,clipPathState=_b.clipPathState,snapBoundInfos=_b.snapBoundInfos;if(!target)return[];var clipPath=getClipPath(target,width,height,defaultClipPath||"inset",clipPathState||customClipPath);if(!clipPath)return[];var n=is3d?4:3,type=clipPath.type,poses=clipPath.poses.map((function(pos){var calculatedPos=calculatePosition(allMatrix,pos.pos,n);return[calculatedPos[0]-left,calculatedPos[1]-top]})),controls=[],lines=[],isRect="rect"===type,isInset="inset"===type,isPolygon="polygon"===type;if(isRect||isInset||isPolygon){var linePoses_1=isInset?poses.slice(0,8):poses;lines=linePoses_1.map((function(to,i){var from=0===i?linePoses_1[linePoses_1.length-1]:linePoses_1[i-1],rad=getRad(from,to),dist=getDiagonalSize(from,to);return React.createElement("div",{key:"clipLine"+i,className:prefix("line","clip-line","snap-control"),"data-clip-index":i,style:{width:dist+"px",transform:"translate("+from[0]+"px, "+from[1]+"px) rotate("+rad+"rad) scaleY("+zoom+")"}})}))}if(controls=poses.map((function(pos,i){return React.createElement("div",{key:"clipControl"+i,className:prefix("control","clip-control","snap-control"),"data-clip-index":i,style:{transform:"translate("+pos[0]+"px, "+pos[1]+"px) scale("+zoom+")"}})})),isInset&&controls.push.apply(controls,poses.slice(8).map((function(pos,i){return React.createElement("div",{key:"clipRadiusControl"+i,className:prefix("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+i,style:{transform:"translate("+pos[0]+"px, "+pos[1]+"px) scale("+zoom+")"}})}))),"circle"===type||"ellipse"===type){var clipLeft=clipPath.left,clipTop=clipPath.top,radiusX=clipPath.radiusX,radiusY=clipPath.radiusY,_c=minus(calculatePosition(allMatrix,[clipLeft,clipTop],n),calculatePosition(allMatrix,[0,0],n)),distLeft=_c[0],distTop=_c[1],ellipseClipPath="none";if(!clipArea){for(var piece=Math.max(10,radiusX/5,radiusY/5),areaPoses=[],i=0;i<=piece;++i){var rad=2*Math.PI/piece*i;areaPoses.push([radiusX+(radiusX-zoom)*Math.cos(rad),radiusY+(radiusY-zoom)*Math.sin(rad)])}areaPoses.push([radiusX,-2]),areaPoses.push([-2,-2]),areaPoses.push([-2,2*radiusY+2]),areaPoses.push([2*radiusX+2,2*radiusY+2]),areaPoses.push([2*radiusX+2,-2]),areaPoses.push([radiusX,-2]),ellipseClipPath="polygon("+areaPoses.map((function(pos){return pos[0]+"px "+pos[1]+"px"})).join(", ")+")"}controls.push(React.createElement("div",{key:"clipEllipse",className:prefix("clip-ellipse","snap-control"),style:{width:2*radiusX+"px",height:2*radiusY+"px",clipPath:ellipseClipPath,transform:"translate("+(-left+distLeft)+"px, "+(-top+distTop)+"px) "+makeMatrixCSS(allMatrix)}}))}if(clipArea){var _d=getRect(moveable_esm_spreadArrays([pos1,pos2,pos3,pos4],poses)),allWidth=_d.width,allHeight=_d.height,allLeft_1=_d.left,allTop_1=_d.top;if(isPolygon||isRect||isInset){areaPoses=isInset?poses.slice(0,8):poses;controls.push(React.createElement("div",{key:"clipArea",className:prefix("clip-area","snap-control"),style:{width:allWidth+"px",height:allHeight+"px",transform:"translate("+allLeft_1+"px, "+allTop_1+"px)",clipPath:"polygon("+areaPoses.map((function(pos){return pos[0]-allLeft_1+"px "+(pos[1]-allTop_1)+"px"})).join(", ")+")"}}))}}return snapBoundInfos&&["vertical","horizontal"].forEach((function(directionType){var info=snapBoundInfos[directionType],isHorizontal="horizontal"===directionType;info.isSnap&&lines.push.apply(lines,info.snap.posInfos.map((function(_a,i){var pos=_a.pos,snapPos1=minus(calculatePosition(allMatrix,isHorizontal?[0,pos]:[pos,0],n),[left,top]),snapPos2=minus(calculatePosition(allMatrix,isHorizontal?[width,pos]:[pos,height],n),[left,top]);return renderLine(React,"",snapPos1,snapPos2,zoom,"clip"+directionType+"snap"+i,"guideline")}))),info.isBound&&lines.push.apply(lines,info.bounds.map((function(_a,i){var pos=_a.pos,snapPos1=minus(calculatePosition(allMatrix,isHorizontal?[0,pos]:[pos,0],n),[left,top]),snapPos2=minus(calculatePosition(allMatrix,isHorizontal?[width,pos]:[pos,height],n),[left,top]);return renderLine(React,"",snapPos1,snapPos2,zoom,"clip"+directionType+"bounds"+i,"guideline","bounds","bold")})))})),moveable_esm_spreadArrays(controls,lines)},dragControlCondition:function(moveable,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(moveable,e){var _a=moveable.props.dragWithClip;return!(void 0===_a||_a)&&this.dragControlStart(moveable,e)},drag:function(moveable,e){return this.dragControl(moveable,e)},dragEnd:function(moveable,e){return this.dragControlEnd(moveable,e)},dragControlStart:function(moveable,e){var state=moveable.state,_a=moveable.props,defaultClipPath=_a.defaultClipPath,customClipPath=_a.customClipPath,target=state.target,width=state.width,height=state.height,inputTarget=e.inputEvent?e.inputEvent.target:null,className=inputTarget?inputTarget.getAttribute("class"):"",datas=e.datas,clipPath=getClipPath(target,width,height,defaultClipPath||"inset",customClipPath);if(!clipPath)return!1;var clipText=clipPath.clipText;return!1===triggerEvent(moveable,"onClipStart",fillParams(moveable,e,{clipType:clipPath.type,clipStyle:clipText,poses:clipPath.poses.map((function(pos){return pos.pos}))}))?(datas.isClipStart=!1,!1):(datas.isControl=className.indexOf("clip-control")>-1,datas.isLine=className.indexOf("clip-line")>-1,datas.isArea=className.indexOf("clip-area")>-1||className.indexOf("clip-ellipse")>-1,datas.index=inputTarget?parseInt(inputTarget.getAttribute("data-clip-index"),10):-1,datas.clipPath=clipPath,datas.isClipStart=!0,state.clipPathState=clipText,setDragStart(moveable,e),!0)},dragControl:function(moveable,e){var datas=e.datas,originalDatas=e.originalDatas;if(!datas.isClipStart)return!1;var draggableData=originalDatas&&originalDatas.draggable||{},_a=datas,isControl=_a.isControl,isLine=_a.isLine,isArea=_a.isArea,index=_a.index,clipPath=_a.clipPath;if(!clipPath)return!1;var _b=draggableData.isDrag?draggableData.prevDist:getDragDist(e),distX=_b[0],distY=_b[1],props=moveable.props,state=moveable.state,width=state.width,height=state.height,isDragWithTarget=!isArea&&!isControl&&!isLine,clipType=clipPath.type,clipPoses=clipPath.poses,splitter=clipPath.splitter,poses=clipPoses.map((function(pos){return pos.pos}));isDragWithTarget&&(distX=-distX,distY=-distY);var isAll=!isControl||"nesw"===clipPoses[index].direction,isRect="inset"===clipType||"rect"===clipType,dists=clipPoses.map((function(){return[0,0]}));if(isControl&&!isAll){var _c=clipPoses[index],horizontal=_c.horizontal,vertical=_c.vertical,dist=[distX*Math.abs(horizontal),distY*Math.abs(vertical)];dists=function moveControlPos(controlPoses,index,dist,isRect){var _a=controlPoses[index],direction=_a.direction,sub=_a.sub,dists=controlPoses.map((function(){return[0,0]})),directions=direction?direction.split(""):[];if(isRect&&index<8){var verticalDirection_1=directions.filter((function(dir){return"w"===dir||"e"===dir}))[0],horizontalDirection_1=directions.filter((function(dir){return"n"===dir||"s"===dir}))[0];dists[index]=dist,controlPoses.forEach((function(controlPose,i){var controlDir=controlPose.direction;controlDir&&(controlDir.indexOf(verticalDirection_1)>-1&&(dists[i][0]=dist[0]),controlDir.indexOf(horizontalDirection_1)>-1&&(dists[i][1]=dist[1]))})),verticalDirection_1&&(dists[1][0]=dist[0]/2,dists[5][0]=dist[0]/2),horizontalDirection_1&&(dists[3][1]=dist[1]/2,dists[7][1]=dist[1]/2)}else direction&&!sub?directions.forEach((function(dir){var isVertical="n"===dir||"s"===dir;controlPoses.forEach((function(controlPose,i){var dirDir=controlPose.direction,dirHorizontal=controlPose.horizontal,dirVertical=controlPose.vertical;dirDir&&-1!==dirDir.indexOf(dir)&&(dists[i]=[isVertical||!dirHorizontal?0:dist[0],isVertical&&dirVertical?dist[1]:0])}))})):dists[index]=dist;return dists}(clipPoses,index,dist,isRect)}else isAll&&(dists=poses.map((function(){return[distX,distY]})));var nextPoses=poses.map((function(pos,i){return plus(pos,dists[i])})),guidePoses=moveable_esm_spreadArrays(nextPoses);state.snapBoundInfos=null;var isCircle="circle"===clipPath.type,isEllipse="ellipse"===clipPath.type;if(isCircle||isEllipse){var guideRect=getRect(nextPoses),ry=Math.abs(guideRect.bottom-guideRect.top),rx=Math.abs(isEllipse?guideRect.right-guideRect.left:ry),bottom=nextPoses[0][1]+ry,left=nextPoses[0][0]-rx,right=nextPoses[0][0]+rx;isCircle&&(guidePoses.push([right,guideRect.bottom]),dists.push([1,0])),guidePoses.push([guideRect.left,bottom]),dists.push([0,1]),guidePoses.push([left,guideRect.bottom]),dists.push([1,0])}var guidelines=getDefaultGuidelines((props.clipHorizontalGuidelines||[]).map((function(v){return convertUnitSize(""+v,height)})),(props.clipVerticalGuidelines||[]).map((function(v){return convertUnitSize(""+v,width)})),width,height),guideXPoses=[],guideYPoses=[];if(isCircle||isEllipse)guideXPoses=[guidePoses[4][0],guidePoses[2][0]],guideYPoses=[guidePoses[1][1],guidePoses[3][1]];else if(isRect){var rectPoses=[guidePoses[0],guidePoses[2],guidePoses[4],guidePoses[6]],rectDists_1=[dists[0],dists[2],dists[4],dists[6]];guideXPoses=rectPoses.filter((function(_,i){return rectDists_1[i][0]})).map((function(pos){return pos[0]})),guideYPoses=rectPoses.filter((function(_,i){return rectDists_1[i][1]})).map((function(pos){return pos[1]}))}else guideXPoses=guidePoses.filter((function(_,i){return dists[i][0]})).map((function(pos){return pos[0]})),guideYPoses=guidePoses.filter((function(_,i){return dists[i][1]})).map((function(pos){return pos[1]}));for(var _loop_1=function(i){var _a=checkSnapBounds(guidelines,props.clipTargetBounds&&{left:0,top:0,right:width,bottom:height},guideXPoses,guideYPoses,{snapThreshold:5}),horizontalSnapInfo=_a.horizontal,verticalSnapInfo=_a.vertical,snapOffsetY=horizontalSnapInfo.offset,snapOffsetX=verticalSnapInfo.offset;if(!isEllipse&&!isCircle||0!==dists[0][0]||0!==dists[0][1])return guidePoses.forEach((function(pos,j){var dist=dists[j];dist[0]&&(pos[0]-=snapOffsetX),dist[1]&&(pos[1]-=snapOffsetY)})),"break";var guideRect=getRect(nextPoses),cy=guideRect.bottom-guideRect.top,cx=isEllipse?guideRect.right-guideRect.left:cy;cx-=verticalSnapInfo.isBound?Math.abs(snapOffsetX):0===verticalSnapInfo.snapIndex?-snapOffsetX:snapOffsetX,cy-=horizontalSnapInfo.isBound?Math.abs(snapOffsetY):0===horizontalSnapInfo.snapIndex?-snapOffsetY:snapOffsetY,isCircle&&(cx=cy=checkSnapBoundPriority(verticalSnapInfo,horizontalSnapInfo)>0?cy:cx);var center=guidePoses[0];guidePoses[1][1]=center[1]-cy,guidePoses[2][0]=center[0]+cx,guidePoses[3][1]=center[1]+cy,guidePoses[4][0]=center[0]-cx},i=0;i<2;++i){if("break"===_loop_1())break}var nextClipStyles=getClipStyles(moveable,clipPath,nextPoses),clipStyle=clipType+"("+nextClipStyles.join(splitter)+")";if(state.clipPathState=clipStyle,isCircle||isEllipse)guideXPoses=[guidePoses[4][0],guidePoses[2][0]],guideYPoses=[guidePoses[1][1],guidePoses[3][1]];else if(isRect){rectPoses=[guidePoses[0],guidePoses[2],guidePoses[4],guidePoses[6]];guideXPoses=rectPoses.map((function(pos){return pos[0]})),guideYPoses=rectPoses.map((function(pos){return pos[1]}))}else guideXPoses=guidePoses.map((function(pos){return pos[0]})),guideYPoses=guidePoses.map((function(pos){return pos[1]}));return state.snapBoundInfos=checkSnapBounds(guidelines,props.clipTargetBounds&&{left:0,top:0,right:width,bottom:height},guideXPoses,guideYPoses,{snapThreshold:1}),triggerEvent(moveable,"onClip",fillParams(moveable,e,{clipEventType:"changed",clipType:clipType,poses:nextPoses,clipStyle:clipStyle,clipStyles:nextClipStyles,distX:distX,distY:distY})),!0},dragControlEnd:function(moveable,e){this.unset(moveable);var isDrag=e.isDrag,datas=e.datas,isDouble=e.isDouble,isLine=datas.isLine,isClipStart=datas.isClipStart,isControl=datas.isControl;return!!isClipStart&&(triggerEvent(moveable,"onClipEnd",fillEndParams(moveable,e,{})),isDouble&&(isControl?function removeClipPath(moveable,e){var _a=e.datas,clipPath=_a.clipPath,index=_a.index,_b=clipPath,clipType=_b.type,clipPoses=_b.poses,splitter=_b.splitter,poses=clipPoses.map((function(pos){return pos.pos})),length=poses.length;if("polygon"===clipType)clipPoses.splice(index,1),poses.splice(index,1);else{if("inset"!==clipType)return;if(index<8)return;if(removeRadiusPos(clipPoses,poses,index,8,length),length===clipPoses.length)return}var clipStyles=getClipStyles(moveable,clipPath,poses);triggerEvent(moveable,"onClip",fillParams(moveable,e,{clipEventType:"removed",clipType:clipType,poses:poses,clipStyles:clipStyles,clipStyle:clipType+"("+clipStyles.join(splitter)+")",distX:0,distY:0}))}(moveable,e):isLine&&function addClipPath(moveable,e){var _a=calculatePointerDist(moveable,e),distX=_a[0],distY=_a[1],_b=e.datas,clipPath=_b.clipPath,index=_b.index,_c=clipPath,clipType=_c.type,clipPoses=_c.poses,splitter=_c.splitter,poses=clipPoses.map((function(pos){return pos.pos}));if("polygon"===clipType)poses.splice(index,0,[distX,distY]);else{if("inset"!==clipType)return;var horizontalIndex=HORIZONTAL_RADIUS_ORDER.indexOf(index),verticalIndex=VERTICAL_RADIUS_ORDER.indexOf(index),length=clipPoses.length;if(addRadiusPos(clipPoses,poses,8,horizontalIndex,verticalIndex,distX,distY,poses[4][0],poses[4][1],poses[0][0],poses[0][1]),length===clipPoses.length)return}var clipStyles=getClipStyles(moveable,clipPath,poses);triggerEvent(moveable,"onClip",fillParams(moveable,e,{clipEventType:"added",clipType:clipType,poses:poses,clipStyles:clipStyles,clipStyle:clipType+"("+clipStyles.join(splitter)+")",distX:0,distY:0}))}(moveable,e)),isDouble||isDrag)},unset:function(moveable){moveable.state.clipPathState="",moveable.state.snapBoundInfos=null}},OriginDraggable={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(_,e){return e.isRequest?"originDraggable"===e.requestAble:hasClass(e.inputEvent.target,prefix("origin"))},dragControlStart:function(moveable,e){var datas=e.datas;setDragStart(moveable,e);var params=fillParams(moveable,e,{dragStart:Draggable.dragStart(moveable,(new CustomGesto).dragStart([0,0],e))}),result=triggerEvent(moveable,"onDragOriginStart",params);return datas.startOrigin=moveable.state.transformOrigin,datas.startTargetOrigin=moveable.state.targetOrigin,datas.prevOrigin=[0,0],datas.isDragOrigin=!0,!1===result?(datas.isDragOrigin=!1,!1):params},dragControl:function(moveable,e){var datas=e.datas,isPinch=e.isPinch,isRequest=e.isRequest;if(!datas.isDragOrigin)return!1;var _a=getDragDist(e),distX=_a[0],distY=_a[1],state=moveable.state,width=state.width,height=state.height,offsetMatrix=state.offsetMatrix,targetMatrix=state.targetMatrix,is3d=state.is3d,_b=moveable.props.originRelative,originRelative=void 0===_b||_b,n=is3d?4:3,dist=[distX,distY];if(isRequest){var distOrigin=e.distOrigin;(distOrigin[0]||distOrigin[1])&&(dist=distOrigin)}var origin=plus(datas.startOrigin,dist),targetOrigin=plus(datas.startTargetOrigin,dist),delta=minus(dist,datas.prevOrigin),nextMatrix=getNextMatrix(offsetMatrix,targetMatrix,origin,n),rect=moveable.getRect(),nextRect=getRect(calculatePoses(nextMatrix,width,height,n)),dragDelta=[rect.left-nextRect.left,rect.top-nextRect.top];datas.prevOrigin=dist;var params=fillParams(moveable,e,{width:width,height:height,origin:origin,dist:dist,delta:delta,transformOrigin:[convertCSSSize(targetOrigin[0],width,originRelative),convertCSSSize(targetOrigin[1],height,originRelative)].join(" "),drag:Draggable.drag(moveable,setCustomDrag(e,moveable.state,dragDelta,!!isPinch,!1))});return triggerEvent(moveable,"onDragOrigin",params),params},dragControlEnd:function(moveable,e){return!!e.datas.isDragOrigin&&(triggerEvent(moveable,"onDragOriginEnd",fillEndParams(moveable,e,{})),!0)},dragGroupControlCondition:function(moveable,e){return this.dragControlCondition(moveable,e)},dragGroupControlStart:function(moveable,e){return!!this.dragControlStart(moveable,e)},dragGroupControl:function(moveable,e){var params=this.dragControl(moveable,e);return!!params&&(moveable.transformOrigin=params.transformOrigin,!0)},request:function(moveable){var datas={},rect=moveable.getRect(),distX=0,distY=0,transformOrigin=rect.transformOrigin,distOrigin=[0,0];return{isControl:!0,requestStart:function(){return{datas:datas}},request:function(e){return"deltaOrigin"in e?(distOrigin[0]+=e.deltaOrigin[0],distOrigin[1]+=e.deltaOrigin[1]):"origin"in e?(distOrigin[0]=e.origin[0]-transformOrigin[0],distOrigin[1]=e.origin[1]-transformOrigin[1]):("x"in e?distX=e.x-rect.left:"deltaX"in e&&(distX+=e.deltaX),"y"in e?distY=e.y-rect.top:"deltaY"in e&&(distY+=e.deltaY)),{datas:datas,distX:distX,distY:distY,distOrigin:distOrigin}},requestEnd:function(){return{datas:datas,isDrag:!0}}}}};function getBorderRadius(target,width,height,minCounts,state){var borderRadius;void 0===minCounts&&(minCounts=[0,0]);if(state)borderRadius=state;else{var style=moveable_esm_getComputedStyle(target);borderRadius=style&&style.borderRadius||""}return getRadiusValues(!borderRadius||!state&&"0px"===borderRadius?[]:splitSpace(borderRadius),width,height,0,0,minCounts)}function triggerRoundEvent(moveable,e,dist,delta,controlPoses,nextPoses){var state=moveable.state,width=state.width,height=state.height,_a=getRadiusStyles(nextPoses,controlPoses,moveable.props.roundRelative,width,height),raws=_a.raws,styles=_a.styles,_b=splitRadiusPoses(controlPoses,raws),horizontals=_b.horizontals,verticals=_b.verticals,borderRadius=styles.join(" ");state.borderRadiusState=borderRadius,triggerEvent(moveable,"onRound",fillParams(moveable,e,{horizontals:horizontals,verticals:verticals,borderRadius:borderRadius,width:width,height:height,delta:delta,dist:dist}))}var Roundable={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(moveable,React){var _a=moveable.state,target=_a.target,width=_a.width,height=_a.height,allMatrix=_a.allMatrix,is3d=_a.is3d,left=_a.left,top=_a.top,borderRadiusState=_a.borderRadiusState,_b=moveable.props,_c=_b.minRoundControls,minRoundControls=void 0===_c?[0,0]:_c,_d=_b.maxRoundControls,maxRoundControls=void 0===_d?[4,4]:_d,zoom=_b.zoom;if(!target)return null;var n=is3d?4:3,radiusValues=getBorderRadius(target,width,height,minRoundControls,borderRadiusState);if(!radiusValues)return null;var verticalCount=0,horizontalCount=0;return radiusValues.map((function(v,i){horizontalCount+=Math.abs(v.horizontal),verticalCount+=Math.abs(v.vertical);var pos=minus(calculatePosition(allMatrix,v.pos,n),[left,top]),isDisplay=v.vertical?verticalCount<=maxRoundControls[1]:horizontalCount<=maxRoundControls[0];return React.createElement("div",{key:"borderRadiusControl"+i,className:prefix("control","border-radius"),"data-radius-index":i,style:{display:isDisplay?"block":"none",transform:"translate("+pos[0]+"px, "+pos[1]+"px) scale("+zoom+")"}})}))},dragControlCondition:function(moveable,e){if(!e.inputEvent||e.isRequest)return!1;var className=e.inputEvent.target.getAttribute("class")||"";return className.indexOf("border-radius")>-1||className.indexOf("moveable-line")>-1&&className.indexOf("moveable-direction")>-1},dragControlStart:function(moveable,e){var inputEvent=e.inputEvent,datas=e.datas,inputTarget=inputEvent.target,className=inputTarget.getAttribute("class")||"",isControl=className.indexOf("border-radius")>-1,isLine=className.indexOf("moveable-line")>-1&&className.indexOf("moveable-direction")>-1,controlIndex=isControl?parseInt(inputTarget.getAttribute("data-radius-index"),10):-1,lineIndex=isLine?parseInt(inputTarget.getAttribute("data-line-index"),10):-1;if(!isControl&&!isLine)return!1;if(!1===triggerEvent(moveable,"onRoundStart",fillParams(moveable,e,{})))return!1;datas.lineIndex=lineIndex,datas.controlIndex=controlIndex,datas.isControl=isControl,datas.isLine=isLine,setDragStart(moveable,e);var _a=moveable.props,roundRelative=_a.roundRelative,_b=_a.minRoundControls,minRoundControls=void 0===_b?[0,0]:_b,state=moveable.state,target=state.target,width=state.width,height=state.height;datas.isRound=!0,datas.prevDist=[0,0];var controlPoses=getBorderRadius(target,width,height,minRoundControls)||[];return datas.controlPoses=controlPoses,state.borderRadiusState=getRadiusStyles(controlPoses.map((function(pos){return pos.pos})),controlPoses,roundRelative,width,height).styles.join(" "),!0},dragControl:function(moveable,e){var datas=e.datas;if(!datas.isRound||!datas.isControl||!datas.controlPoses.length)return!1;var index=datas.controlIndex,controlPoses=datas.controlPoses,_a=getDragDist(e),distX=_a[0],distY=_a[1],dist=[distX,distY],delta=minus(dist,datas.prevDist),_b=moveable.props.maxRoundControls,maxRoundControls=void 0===_b?[4,4]:_b,_c=moveable.state,width=_c.width,height=_c.height,selectedControlPose=controlPoses[index],selectedVertical=selectedControlPose.vertical,selectedHorizontal=selectedControlPose.horizontal,dists=controlPoses.map((function(pose){var horizontal=pose.horizontal,vertical=pose.vertical,poseDist=[horizontal*selectedHorizontal*dist[0],vertical*selectedVertical*dist[1]];if(horizontal){if(1===maxRoundControls[0])return poseDist;if(maxRoundControls[0]<4&&horizontal!==selectedHorizontal)return poseDist}else{if(0===maxRoundControls[1])return poseDist[1]=vertical*selectedHorizontal*dist[0]/width*height,poseDist;if(selectedVertical){if(1===maxRoundControls[1])return poseDist;if(maxRoundControls[1]<4&&vertical!==selectedVertical)return poseDist}}return[0,0]}));dists[index]=dist;var nextPoses=controlPoses.map((function(pos,i){return plus(pos.pos,dists[i])}));return datas.prevDist=[distX,distY],triggerRoundEvent(moveable,e,dist,delta,controlPoses,nextPoses),!0},dragControlEnd:function(moveable,e){var state=moveable.state;state.borderRadiusState="";var datas=e.datas,isDouble=e.isDouble;if(!datas.isRound)return!1;var width=state.width,height=state.height,isControl=datas.isControl,controlIndex=datas.controlIndex,isLine=datas.isLine,lineIndex=datas.lineIndex,controlPoses=datas.controlPoses,poses=controlPoses.map((function(pos){return pos.pos})),length=poses.length,_a=moveable.props.roundClickable;if(isDouble&&(void 0===_a||_a)){if(isControl)removeRadiusPos(controlPoses,poses,controlIndex,0);else if(isLine){var _b=calculatePointerDist(moveable,e);!function addBorderRadius(controlPoses,poses,lineIndex,distX,distY,width,height){var _a=splitRadiusPoses(controlPoses),horizontals=_a.horizontals,verticals=_a.verticals,horizontalsLength=horizontals.length,verticalsLength=verticals.length,horizontalIndex=-1,verticalIndex=-1;0===lineIndex?0===horizontalsLength?horizontalIndex=0:1===horizontalsLength&&(horizontalIndex=1):3===lineIndex&&(horizontalsLength<=2?horizontalIndex=2:horizontalsLength<=3&&(horizontalIndex=3)),2===lineIndex?0===verticalsLength?verticalIndex=0:verticalsLength<4&&(verticalIndex=3):1===lineIndex&&(verticalsLength<=1?verticalIndex=1:verticalsLength<=2&&(verticalIndex=2)),addRadiusPos(controlPoses,poses,0,horizontalIndex,verticalIndex,distX,distY,width,height)}(controlPoses,poses,lineIndex,_b[0],_b[1],width,height)}length!==controlPoses.length&&triggerRoundEvent(moveable,e,[0,0],[0,0],controlPoses,poses)}return triggerEvent(moveable,"onRoundEnd",fillEndParams(moveable,e,{})),state.borderRadiusState="",!0},unset:function(moveable){moveable.state.borderRadiusState=""}},BeforeRenderable={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},setTransform:function(moveable,e){var _a=moveable.state,is3d=_a.is3d,target=_a.target,targetMatrix=_a.targetMatrix,transform=null==target?void 0:target.style.transform,cssMatrix=is3d?"matrix3d("+targetMatrix.join(",")+")":"matrix("+convertMatrixtoCSS(targetMatrix,!0)+")";e.datas.startTransforms=transform&&"none"!==transform?splitSpace(transform):[cssMatrix]},resetTransform:function(moveable,e){e.datas.nextTransforms=e.datas.startTransforms,e.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(moveable,e){return fillParams(moveable,e,{setTransform:function(transform){e.datas.startTransforms=isArray(transform)?transform:splitSpace(transform)},isPinch:!!e.isPinch})},fillDragParams:function(moveable,e){return fillParams(moveable,e,{isPinch:!!e.isPinch})},dragStart:function(moveable,e){this.setTransform(moveable,e),triggerEvent(moveable,"onBeforeRenderStart",this.fillDragStartParams(moveable,e))},drag:function(moveable,e){this.resetTransform(moveable,e),triggerEvent(moveable,"onBeforeRender",fillParams(moveable,e,{isPinch:!!e.isPinch}))},dragEnd:function(moveable,e){triggerEvent(moveable,"onBeforeRenderEnd",fillParams(moveable,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(moveable,e){var _this=this;this.dragStart(moveable,e);var events=fillChildEvents(moveable,"beforeRenderable",e),moveables=moveable.moveables,params=events.map((function(childEvent,i){var childMoveable=moveables[i];return _this.setTransform(childMoveable,childEvent),_this.fillDragStartParams(childMoveable,childEvent)}));triggerEvent(moveable,"onBeforeRenderGroupStart",fillParams(moveable,e,{isPinch:!!e.isPinch,targets:moveable.props.targets,setTransform:function(){},events:params}))},dragGroup:function(moveable,e){var _this=this;this.drag(moveable,e);var events=fillChildEvents(moveable,"beforeRenderable",e),moveables=moveable.moveables,params=events.map((function(childEvent,i){var childMoveable=moveables[i];return _this.resetTransform(childMoveable,childEvent),_this.fillDragParams(childMoveable,childEvent)}));triggerEvent(moveable,"onBeforeRenderGroup",fillParams(moveable,e,{isPinch:!!e.isPinch,targets:moveable.props.targets,events:params}))},dragGroupEnd:function(moveable,e){this.dragEnd(moveable,e),triggerEvent(moveable,"onBeforeRenderGroupEnd",fillParams(moveable,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:moveable.props.targets}))},dragControlStart:function(moveable,e){return this.dragStart(moveable,e)},dragControl:function(moveable,e){return this.drag(moveable,e)},dragControlEnd:function(moveable,e){return this.dragEnd(moveable,e)},dragGroupControlStart:function(moveable,e){return this.dragGroupStart(moveable,e)},dragGroupControl:function(moveable,e){return this.dragGroup(moveable,e)},dragGroupControlEnd:function(moveable,e){return this.dragGroupEnd(moveable,e)}},Renderable={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragStart:function(moveable,e){triggerEvent(moveable,"onRenderStart",fillParams(moveable,e,{isPinch:!!e.isPinch}))},drag:function(moveable,e){triggerEvent(moveable,"onRender",fillParams(moveable,e,{isPinch:!!e.isPinch}))},dragEnd:function(moveable,e){triggerEvent(moveable,"onRenderEnd",fillParams(moveable,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(moveable,e){triggerEvent(moveable,"onRenderGroupStart",fillParams(moveable,e,{isPinch:!!e.isPinch,targets:moveable.props.targets}))},dragGroup:function(moveable,e){triggerEvent(moveable,"onRenderGroup",fillParams(moveable,e,{isPinch:!!e.isPinch,targets:moveable.props.targets}))},dragGroupEnd:function(moveable,e){triggerEvent(moveable,"onRenderGroupEnd",fillParams(moveable,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:moveable.props.targets}))},dragControlStart:function(moveable,e){return this.dragStart(moveable,e)},dragControl:function(moveable,e){return this.drag(moveable,e)},dragControlEnd:function(moveable,e){return this.dragEnd(moveable,e)},dragGroupControlStart:function(moveable,e){return this.dragGroupStart(moveable,e)},dragGroupControl:function(moveable,e){return this.dragGroup(moveable,e)},dragGroupControlEnd:function(moveable,e){return this.dragGroupEnd(moveable,e)}};function triggerAble(moveable,ableType,eventOperation,eventAffix,eventType,e,requestInstant){var isStart="Start"===eventType,target=moveable.state.target,isRequest=e.isRequest;if(!target||isStart&&eventAffix.indexOf("Control")>-1&&!isRequest&&moveable.areaElement===e.inputEvent.target)return!1;var eventName=""+eventOperation+eventAffix+eventType,conditionName=""+eventOperation+eventAffix+"Condition",isEnd="End"===eventType,isAfter=eventType.indexOf("After")>-1,isFirstStart=isStart&&(!moveable.targetGesto||!moveable.controlGesto||!moveable.targetGesto.isFlag()||!moveable.controlGesto.isFlag());isFirstStart&&moveable.updateRect(eventType,!0,!1),""!==eventType||isAfter||isRequest||convertDragDist(moveable.state,e);var ables=moveable_esm_spreadArrays([BeforeRenderable],moveable[ableType].slice(),[Renderable]);if(isRequest){var requestAble_1=e.requestAble;ables.some((function(able){return able.name===requestAble_1}))||ables.push.apply(ables,moveable.props.ables.filter((function(able){return able.name===requestAble_1})))}if(!ables.length)return!1;var events=ables.filter((function(able){return able[eventName]})),datas=e.datas;isFirstStart&&events.forEach((function(able){able.unset&&able.unset(moveable)}));var inputTarget,inputEvent=e.inputEvent;isEnd&&inputEvent&&(inputTarget=document.elementFromPoint(e.clientX,e.clientY)||inputEvent.target);var isUpdate=events.filter((function(able){var ableName=able.name,nextDatas=datas[ableName]||(datas[ableName]={});return isStart&&(nextDatas.isEventStart=!able[conditionName]||able[conditionName](moveable,e)),!!nextDatas.isEventStart&&able[eventName](moveable,moveable_esm_assign(moveable_esm_assign({},e),{datas:nextDatas,originalDatas:datas,inputTarget:inputTarget}))})).length,isForceEnd=isStart&&events.length&&!isUpdate;return(isEnd||isForceEnd)&&(moveable.state.gesto=null,moveable.moveables&&moveable.moveables.forEach((function(childMoveable){childMoveable.state.gesto=null}))),isFirstStart&&isForceEnd&&events.forEach((function(able){able.unset&&able.unset(moveable)})),!moveable.isUnmounted&&!isForceEnd&&((!isStart&&isUpdate&&!requestInstant||isEnd)&&(moveable.updateRect(eventType,!0,!1),moveable.forceUpdate()),isStart||isEnd||isAfter||!isUpdate||requestInstant||triggerAble(moveable,ableType,eventOperation,eventAffix,eventType+"After",e),!0)}function getTargetAbleGesto(moveable,moveableTarget,eventAffix){var controlBox=moveable.controlBox.getElement(),targets=[];targets.push(controlBox),moveable.props.dragArea&&!moveable.props.dragTarget||targets.push(moveableTarget);var startFunc=function(e){var eventTarget=e.inputEvent.target;return eventTarget===moveable.areaElement||!moveable.isMoveableElement(eventTarget)||hasClass(eventTarget,"moveable-area")||hasClass(eventTarget,"moveable-padding")};return getAbleGesto(moveable,targets,"targetAbles",eventAffix,{dragStart:startFunc,pinchStart:startFunc})}function getAbleGesto(moveable,target,ableType,eventAffix,conditionFunctions){void 0===conditionFunctions&&(conditionFunctions={});var _a=moveable.props,pinchOutside=_a.pinchOutside,pinchThreshold=_a.pinchThreshold,options={container:window,pinchThreshold:pinchThreshold,pinchOutside:pinchOutside},gesto=new gesto_esm(target,options);return["drag","pinch"].forEach((function(eventOperation){["Start","","End"].forEach((function(eventType){gesto.on(""+eventOperation+eventType,(function(e){var eventName=e.eventType;!conditionFunctions[eventName]||conditionFunctions[eventName](e)?triggerAble(moveable,ableType,eventOperation,eventAffix,eventType,e)||e.stop():e.stop()}))}))})),gesto}var EventManager=function(){function EventManager(target,moveable,eventName){var _this=this;this.target=target,this.moveable=moveable,this.eventName=eventName,this.ables=[],this.onEvent=function(e){var eventName=_this.eventName,moveable=_this.moveable;moveable.state.disableNativeEvent||_this.ables.forEach((function(able){able[eventName](moveable,{inputEvent:e})}))},this.target.addEventListener(this.eventName.toLowerCase(),this.onEvent)}var __proto=EventManager.prototype;return __proto.setAbles=function(ables){this.ables=ables},__proto.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this.onEvent),this.target=null,this.moveable=null},EventManager}(),moveable_esm_MoveableManager=function(_super){function MoveableManager(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state=moveable_esm_assign({container:null,target:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},getTargetInfo(null)),_this.enabledAbles=[],_this.targetAbles=[],_this.controlAbles=[],_this.rotation=0,_this.scale=[1,1],_this.isUnmounted=!1,_this.events={mouseEnter:null,mouseLeave:null},_this.onPreventClick=function(e){e.stopPropagation()},_this}moveable_esm_extends(MoveableManager,_super);var __proto=MoveableManager.prototype;return __proto.render=function(){var props=this.props,state=this.state,edge=props.edge,parentPosition=props.parentPosition,className=props.className,propsTarget=props.target,zoom=props.zoom,cspNonce=props.cspNonce,translateZ=props.translateZ,ControlBoxElement=props.cssStyled,portalContainer=props.portalContainer;this.checkUpdate(),this.updateRenderPoses();var _a=parentPosition||{left:0,top:0},parentLeft=_a.left,parentTop=_a.top,left=state.left,top=state.top,stateTarget=state.target,direction=state.direction,renderPoses=state.renderPoses,groupTargets=props.targets,isDisplay=(groupTargets&&groupTargets.length||propsTarget)&&stateTarget,isDragging=this.isDragging(),ableAttributes={},Renderer={createElement:react.createElement};return this.getEnabledAbles().forEach((function(able){ableAttributes["data-able-"+able.name.toLowerCase()]=!0})),Object(react.createElement)(ControlBoxElement,moveable_esm_assign({cspNonce:cspNonce,ref:ref(this,"controlBox"),className:prefix("control-box",-1===direction?"reverse":"",isDragging?"dragging":"")+" "+className},ableAttributes,{onClick:this.onPreventClick,portalContainer:portalContainer,style:{position:"absolute",display:isDisplay?"block":"none",transform:"translate3d("+(left-parentLeft)+"px, "+(top-parentTop)+"px, "+translateZ+")","--zoom":zoom,"--zoompx":zoom+"px"}}),this.renderAbles(),renderLine(Renderer,edge?"n":"",renderPoses[0],renderPoses[1],zoom,0),renderLine(Renderer,edge?"e":"",renderPoses[1],renderPoses[3],zoom,1),renderLine(Renderer,edge?"w":"",renderPoses[0],renderPoses[2],zoom,2),renderLine(Renderer,edge?"s":"",renderPoses[2],renderPoses[3],zoom,3))},__proto.componentDidMount=function(){this.controlBox.getElement();var props=this.props,parentMoveable=props.parentMoveable,container=props.container,wrapperMoveable=props.wrapperMoveable;this.updateEvent(props),this.updateNativeEvents(props),container||parentMoveable||wrapperMoveable||this.updateRect("",!1,!0),this.updateCheckInput()},__proto.componentDidUpdate=function(prevProps){this.updateNativeEvents(prevProps),this.updateEvent(prevProps),this.updateCheckInput()},__proto.componentWillUnmount=function(){this.isUnmounted=!0,unset(this,"targetGesto"),unset(this,"controlGesto");var events=this.events;for(var name in events){var manager=events[name];manager&&manager.destroy()}},__proto.getContainer=function(){var _a=this.props,parentMoveable=_a.parentMoveable,wrapperMoveable=_a.wrapperMoveable;return _a.container||wrapperMoveable&&wrapperMoveable.getContainer()||parentMoveable&&parentMoveable.getContainer()||this.controlBox.getElement().parentElement},__proto.isMoveableElement=function(target){return target&&(target.getAttribute("class")||"").indexOf(PREFIX)>-1},__proto.dragStart=function(e){return this.targetGesto&&this.targetGesto.triggerDragStart(e),this},__proto.hitTest=function(el){var rect,_a=this.state,target=_a.target,pos1=_a.pos1,pos2=_a.pos2,pos3=_a.pos3,pos4=_a.pos4,targetClientRect=_a.targetClientRect;if(!target)return 0;if(el instanceof Element){var clientRect=el.getBoundingClientRect();rect={left:clientRect.left,top:clientRect.top,width:clientRect.width,height:clientRect.height}}else rect=moveable_esm_assign({width:0,height:0},el);var rectLeft=rect.left,rectTop=rect.top,rectWidth=rect.width,rectHeight=rect.height,points=fitPoints([pos1,pos2,pos4,pos3],targetClientRect),size=getOverlapSize(points,[[rectLeft,rectTop],[rectLeft+rectWidth,rectTop],[rectLeft+rectWidth,rectTop+rectHeight],[rectLeft,rectTop+rectHeight]]),totalSize=getAreaSize(points);return size&&totalSize?Math.min(100,size/totalSize*100):0},__proto.isInside=function(clientX,clientY){var _a=this.state,target=_a.target,pos1=_a.pos1,pos2=_a.pos2,pos3=_a.pos3,pos4=_a.pos4,targetClientRect=_a.targetClientRect;return!!target&&isInside([clientX,clientY],fitPoints([pos1,pos2,pos4,pos3],targetClientRect))},__proto.updateRect=function(type,isTarget,isSetState){void 0===isSetState&&(isSetState=!0);var props=this.props,parentMoveable=props.parentMoveable,target=this.state.target||this.props.target,container=this.getContainer(),rootContainer=parentMoveable?parentMoveable.props.rootContainer:props.rootContainer;this.updateState(getTargetInfo(this.controlBox&&this.controlBox.getElement(),target,container,container,rootContainer||container),!parentMoveable&&isSetState)},__proto.isTargetChanged=function(prevProps,useDragArea){var props=this.props,target=props.dragTarget||props.target,prevTarget=prevProps.dragTarget||prevProps.target,dragArea=props.dragArea,prevDragArea=prevProps.dragArea;return!dragArea&&prevTarget!==target||(useDragArea||dragArea)&&prevDragArea!==dragArea},__proto.updateNativeEvents=function(prevProps){var _this=this,target=this.props.dragArea?this.areaElement:this.state.target,events=this.events,eventKeys=getKeys(events);if(this.isTargetChanged(prevProps))for(var eventName in events){var manager=events[eventName];manager&&manager.destroy(),events[eventName]=null}if(target){var enabledAbles=this.enabledAbles;eventKeys.forEach((function(eventName){var ables=filterAbles(enabledAbles,[eventName]),hasAbles=ables.length>0,manager=events[eventName];hasAbles?(manager||(manager=new EventManager(target,_this,eventName),events[eventName]=manager),manager.setAbles(ables)):manager&&(manager.destroy(),events[eventName]=null)}))}},__proto.updateEvent=function(prevProps){var controlBoxElement=this.controlBox.getElement(),hasTargetAble=this.targetAbles.length,hasControlAble=this.controlAbles.length,props=this.props,target=props.dragTarget||props.target,isTargetChanged=this.isTargetChanged(prevProps,!0),isUnset=!hasTargetAble&&this.targetGesto||isTargetChanged;isUnset&&(unset(this,"targetGesto"),this.updateState({gesto:null})),hasControlAble||unset(this,"controlGesto"),target&&hasTargetAble&&!this.targetGesto&&(this.targetGesto=getTargetAbleGesto(this,target,"")),!this.controlGesto&&hasControlAble&&(this.controlGesto=getAbleGesto(this,controlBoxElement,"controlAbles","Control")),isUnset&&this.unsetAbles()},__proto.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},__proto.updateTarget=function(type){this.updateRect(type,!0)},__proto.getRect=function(){var state=this.state,poses=getAbsolutePosesByState(this.state),pos1=poses[0],pos2=poses[1],pos3=poses[2],pos4=poses[3],rect=getRect(poses),offsetWidth=state.width,offsetHeight=state.height,width=rect.width,height=rect.height,left=rect.left,top=rect.top,statePos=[state.left,state.top],origin=plus(statePos,state.origin);return{width:width,height:height,left:left,top:top,pos1:pos1,pos2:pos2,pos3:pos3,pos4:pos4,offsetWidth:offsetWidth,offsetHeight:offsetHeight,beforeOrigin:plus(statePos,state.beforeOrigin),origin:origin,transformOrigin:state.transformOrigin,rotation:this.getRotation()}},__proto.getManager=function(){return this},__proto.getRotation=function(){var _a=this.state;return function getAbsoluteRotation(pos1,pos2,direction){var deg=getRad(pos1,pos2)/Math.PI*180;return(deg=direction>=0?deg:180-deg)>=0?deg:360+deg}(_a.pos1,_a.pos2,_a.direction)},__proto.request=function(ableName,param,isInstant){void 0===param&&(param={});var _a=this.props,ables=_a.ables,groupable=_a.groupable,requsetAble=ables.filter((function(able){return able.name===ableName}))[0];if(this.isDragging()||!requsetAble||!requsetAble.request)return{request:function(){return this},requestEnd:function(){return this}};var self=this,ableRequester=requsetAble.request(this),requestInstant=isInstant||param.isInstant,ableType=ableRequester.isControl?"controlAbles":"targetAbles",eventAffix=(groupable?"Group":"")+(ableRequester.isControl?"Control":""),requester={request:function(ableParam){return triggerAble(self,ableType,"drag",eventAffix,"",moveable_esm_assign(moveable_esm_assign({},ableRequester.request(ableParam)),{requestAble:ableName,isRequest:!0}),requestInstant),this},requestEnd:function(){return triggerAble(self,ableType,"drag",eventAffix,"End",moveable_esm_assign(moveable_esm_assign({},ableRequester.requestEnd()),{requestAble:ableName,isRequest:!0}),requestInstant),this}};return triggerAble(self,ableType,"drag",eventAffix,"Start",moveable_esm_assign(moveable_esm_assign({},ableRequester.requestStart(param)),{requestAble:ableName,isRequest:!0}),requestInstant),requestInstant?requester.request(param).requestEnd():requester},__proto.destroy=function(){this.componentWillUnmount()},__proto.updateRenderPoses=function(){var state=this.state,props=this.props,originalBeforeOrigin=state.originalBeforeOrigin,transformOrigin=state.transformOrigin,allMatrix=state.allMatrix,is3d=state.is3d,pos1=state.pos1,pos2=state.pos2,pos3=state.pos3,pos4=state.pos4,stateLeft=state.left,stateTop=state.top,_a=props.padding||{},_b=_a.left,left=void 0===_b?0:_b,_c=_a.top,top=void 0===_c?0:_c,_d=_a.bottom,bottom=void 0===_d?0:_d,_e=_a.right,right=void 0===_e?0:_e,n=is3d?4:3,absoluteOrigin=props.groupable?originalBeforeOrigin:plus(originalBeforeOrigin,[stateLeft,stateTop]);state.renderPoses=[plus(pos1,calculatePadding(allMatrix,[-left,-top],transformOrigin,absoluteOrigin,n)),plus(pos2,calculatePadding(allMatrix,[right,-top],transformOrigin,absoluteOrigin,n)),plus(pos3,calculatePadding(allMatrix,[-left,bottom],transformOrigin,absoluteOrigin,n)),plus(pos4,calculatePadding(allMatrix,[right,bottom],transformOrigin,absoluteOrigin,n))]},__proto.checkUpdate=function(){var _a=this.props,target=_a.target,container=_a.container,parentMoveable=_a.parentMoveable,_b=this.state,stateTarget=_b.target,stateContainer=_b.container;(stateTarget||target)&&(this.updateAbles(),(!equals(stateTarget,target)||!equals(stateContainer,container))&&(this.updateState({target:target,container:container}),parentMoveable||!container&&!this.controlBox||this.updateRect("End",!1,!1)))},__proto.triggerEvent=function(name,e){var callback=this.props[name];return callback&&callback(e)},__proto.useCSS=function(tag,css){var customStyleMap=this.props.customStyledMap,key=tag+css;return customStyleMap[key]||(customStyleMap[key]=dist_styled_esm(tag,css)),customStyleMap[key]},__proto.unsetAbles=function(){var _this=this;this.targetAbles.filter((function(able){return!!able.unset&&(able.unset(_this),!0)})).length&&this.forceUpdate()},__proto.updateAbles=function(ables,eventAffix){void 0===ables&&(ables=this.props.ables),void 0===eventAffix&&(eventAffix="");var props=this.props,triggerAblesSimultaneously=props.triggerAblesSimultaneously,enabledAbles=ables.filter((function(able){return able&&(able.always||props[able.name])})),dragControlStart="drag"+eventAffix+"ControlStart",targetAbles=filterAbles(enabledAbles,["drag"+eventAffix+"Start","pinch"+eventAffix+"Start"],triggerAblesSimultaneously),controlAbles=filterAbles(enabledAbles,[dragControlStart],triggerAblesSimultaneously);this.enabledAbles=enabledAbles,this.targetAbles=targetAbles,this.controlAbles=controlAbles},__proto.updateState=function(nextState,isSetState){if(isSetState)this.setState(nextState);else{var state=this.state;for(var name in nextState)state[name]=nextState[name]}},__proto.getEnabledAbles=function(){var props=this.props;return props.ables.filter((function(able){return able&&props[able.name]}))},__proto.renderAbles=function(){var _this=this,triggerAblesSimultaneously=this.props.triggerAblesSimultaneously,Renderer={createElement:react.createElement};return function groupByMap(arr,func){var groups=[],groupKeys={};return arr.forEach((function(el,index){var groupKey=func(el,index,arr),group=groupKeys[groupKey];group||(group=[],groupKeys[groupKey]=group,groups.push(group)),group.push(el)})),groups}(flat(filterAbles(this.getEnabledAbles(),["render"],triggerAblesSimultaneously).map((function(_a){return(0,_a.render)(_this,Renderer)||[]}))).filter((function(el){return el})),(function(_a){return _a.key})).map((function(group){return group[0]}))},__proto.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},MoveableManager.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{}},MoveableManager}(react.PureComponent),Groupable={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(moveable,React){var targets=moveable.props.targets||[];moveable.moveables=[];var _a=moveable.state,position={left:_a.left,top:_a.top};return targets.map((function(target,i){return React.createElement(moveable_esm_MoveableManager,{key:"moveable"+i,ref:refs(moveable,"moveables",i),target:target,origin:!1,cssStyled:moveable.props.cssStyled,customStyledMap:moveable.props.customStyledMap,parentMoveable:moveable,parentPosition:position})}))}},Clickable=makeAble("clickable",{props:{},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragStart:function(){},dragGroupStart:function(moveable,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(moveable,e){var target=moveable.state.target,inputEvent=e.inputEvent,inputTarget=e.inputTarget;if(inputEvent&&inputTarget&&!e.isDrag&&!moveable.isMoveableElement(inputTarget)){var containsTarget=target.contains(inputTarget);triggerEvent(moveable,"onClick",fillParams(moveable,e,{isDouble:e.isDouble,inputTarget:inputTarget,isTarget:target===inputTarget,containsTarget:containsTarget}))}},dragGroupEnd:function(moveable,e){var inputEvent=e.inputEvent,inputTarget=e.inputTarget;if(inputEvent&&inputTarget&&!e.isDrag&&!moveable.isMoveableElement(inputTarget)&&e.datas.inputTarget!==inputTarget){var targets=moveable.props.targets,targetIndex=targets.indexOf(inputTarget),isTarget=targetIndex>-1,containsTarget=!1;-1===targetIndex&&(containsTarget=(targetIndex=findIndex(targets,(function(parentTarget){return parentTarget.contains(inputTarget)})))>-1),triggerEvent(moveable,"onClickGroup",fillParams(moveable,e,{isDouble:e.isDouble,targets:targets,inputTarget:inputTarget,targetIndex:targetIndex,isTarget:isTarget,containsTarget:containsTarget}))}}});function getDraggableEvent(e){var datas=e.originalDatas.draggable;return datas||(e.originalDatas.draggable={},datas=e.originalDatas.draggable),moveable_esm_assign(moveable_esm_assign({},e),{datas:datas})}var edgeDraggable=makeAble("edgeDraggable",{dragControlCondition:function(moveable,e){if(!moveable.props.edgeDraggable||!e.inputEvent)return!1;var target=e.inputEvent.target;return hasClass(target,prefix("direction"))&&hasClass(target,prefix("line"))},dragControlStart:function(moveable,e){return Draggable.dragStart(moveable,getDraggableEvent(e))},dragControl:function(moveable,e){return Draggable.drag(moveable,getDraggableEvent(e))},dragControlEnd:function(moveable,e){return Draggable.dragEnd(moveable,getDraggableEvent(e))},dragGroupControlCondition:function(moveable,e){if(!moveable.props.edgeDraggable||!e.inputEvent)return!1;var target=e.inputEvent.target;return hasClass(target,prefix("direction"))&&hasClass(target,prefix("line"))},dragGroupControlStart:function(moveable,e){return Draggable.dragGroupStart(moveable,getDraggableEvent(e))},dragGroupControl:function(moveable,e){return Draggable.dragGroup(moveable,getDraggableEvent(e))},dragGroupControlEnd:function(moveable,e){return Draggable.dragGroupEnd(moveable,getDraggableEvent(e))},unset:function(moveable){moveable.state.dragInfo=null}}),IndividualGroupable={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},MOVEABLE_ABLES=[BeforeRenderable,Default,Snappable,Pinchable,Draggable,edgeDraggable,Rotatable,Resizable,Scalable,Warpable,Scrollable,Padding,Origin,OriginDraggable,Clippable,Roundable,Groupable,IndividualGroupable,Clickable,DragArea,Renderable],MOVEABLE_EVENTS_PROPS_MAP=MOVEABLE_ABLES.reduce((function(current,able){return moveable_esm_assign(moveable_esm_assign({},current),"events"in able?able.events:{})}),{}),MOVEABLE_PROPS_MAP=MOVEABLE_ABLES.reduce((function(current,able){return moveable_esm_assign(moveable_esm_assign({},current),able.props)}),{}),MOVEABLE_EVENTS_MAP=invertObject(MOVEABLE_EVENTS_PROPS_MAP),MOVEABLE_EVENTS=Object.keys(MOVEABLE_EVENTS_MAP),MOVEABLE_PROPS=Object.keys(MOVEABLE_PROPS_MAP);function getMaxPos(poses,index){return Math.max.apply(Math,poses.map((function(_a){var pos1=_a[0],pos2=_a[1],pos3=_a[2],pos4=_a[3];return Math.max(pos1[index],pos2[index],pos3[index],pos4[index])})))}function getMinPos(poses,index){return Math.min.apply(Math,poses.map((function(_a){var pos1=_a[0],pos2=_a[1],pos3=_a[2],pos4=_a[3];return Math.min(pos1[index],pos2[index],pos3[index],pos4[index])})))}var moveable_esm_MoveableGroup=function(_super){function MoveableGroup(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.differ=new children_differ_esm,_this.moveables=[],_this.transformOrigin="50% 50%",_this}moveable_esm_extends(MoveableGroup,_super);var __proto=MoveableGroup.prototype;return __proto.updateEvent=function(prevProps){var state=this.state,props=this.props,prevTarget=prevProps.dragTarget||state.target,nextTarget=props.dragTarget||this.areaElement;prevTarget!==nextTarget&&(unset(this,"targetGesto"),unset(this,"controlGesto"),state.target=null),state.target||(state.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetGesto=getTargetAbleGesto(this,nextTarget,"Group"),this.controlGesto=getAbleGesto(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var isContainerChanged=!equals(prevProps.container,props.container);isContainerChanged&&(state.container=props.container);var _a=this.differ.update(props.targets),added=_a.added,changed=_a.changed,removed=_a.removed;(isContainerChanged||added.length||changed.length||removed.length)&&this.updateRect()},__proto.checkUpdate=function(){this.updateAbles()},__proto.updateRect=function(type,isTarget,isSetState){if(void 0===isSetState&&(isSetState=!0),this.controlBox){this.moveables.forEach((function(moveable){moveable.updateRect(type,!1,!1)}));var state=this.state,props=this.props,target=state.target||props.target;(!isTarget||""!==type&&props.updateGroup)&&(this.rotation=props.defaultGroupRotate,this.transformOrigin=props.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var rotation=this.rotation,scale=this.scale,_a=function getGroupRect(moveables,rotation){if(!moveables.length)return[0,0,0,0];var moveablePoses=moveables.map((function(_a){return getAbsolutePosesByState(_a.state)})),minX=MAX_NUM,minY=MAX_NUM,groupWidth=0,groupHeight=0,fixedRotation=moveable_esm_throttle(rotation,1e-7);if(fixedRotation%90){var rad_1=fixedRotation/180*Math.PI,a1_1=Math.tan(rad_1),a2_1=-1/a1_1,b1MinMax_1=[MIN_NUM,MAX_NUM],b2MinMax_1=[MIN_NUM,MAX_NUM];moveablePoses.forEach((function(poses){poses.forEach((function(pos){var b1=pos[1]-a1_1*pos[0],b2=pos[1]-a2_1*pos[0];b1MinMax_1[0]=Math.max(b1MinMax_1[0],b1),b1MinMax_1[1]=Math.min(b1MinMax_1[1],b1),b2MinMax_1[0]=Math.max(b2MinMax_1[0],b2),b2MinMax_1[1]=Math.min(b2MinMax_1[1],b2)}))})),b1MinMax_1.forEach((function(b1){b2MinMax_1.forEach((function(b2){var x=(b2-b1)/(a1_1-a2_1),y=a1_1*x+b1;minX=Math.min(minX,x),minY=Math.min(minY,y)}))}));var rotatePoses=moveablePoses.map((function(_a){var pos1=_a[0],pos2=_a[1],pos3=_a[2],pos4=_a[3];return[matrix_esm_rotate(pos1,-rad_1),matrix_esm_rotate(pos2,-rad_1),matrix_esm_rotate(pos3,-rad_1),matrix_esm_rotate(pos4,-rad_1)]}));groupWidth=getMaxPos(rotatePoses,0)-getMinPos(rotatePoses,0),groupHeight=getMaxPos(rotatePoses,1)-getMinPos(rotatePoses,1)}else if(minX=getMinPos(moveablePoses,0),minY=getMinPos(moveablePoses,1),groupWidth=getMaxPos(moveablePoses,0)-minX,groupHeight=getMaxPos(moveablePoses,1)-minY,fixedRotation%180){var changedWidth=groupWidth;groupWidth=groupHeight,groupHeight=changedWidth}return[minX,minY,groupWidth,groupHeight]}(this.moveables,rotation),left=_a[0],top=_a[1],width=_a[2],height=_a[3],transform="rotate("+rotation+"deg) scale("+(scale[0]>=0?1:-1)+", "+(scale[1]>=0?1:-1)+")";target.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+width+"px; height:"+height+"px;transform:"+transform,state.width=width,state.height=height;var container=this.getContainer(),info=getTargetInfo(this.controlBox.getElement(),target,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||container),pos=[info.left,info.top],_b=getAbsolutePosesByState(info),pos1=_b[0],pos2=_b[1],pos3=_b[2],pos4=_b[3],minPos=getMinMaxs([pos1,pos2,pos3,pos4]),delta=[minPos.minX,minPos.minY];info.pos1=minus(pos1,delta),info.pos2=minus(pos2,delta),info.pos3=minus(pos3,delta),info.pos4=minus(pos4,delta),info.left=left-info.left+delta[0],info.top=top-info.top+delta[1],info.origin=minus(plus(pos,info.origin),delta),info.beforeOrigin=minus(plus(pos,info.beforeOrigin),delta),info.originalBeforeOrigin=plus(pos,info.originalBeforeOrigin);var clientRect=info.targetClientRect,direction=scale[0]*scale[1]>0?1:-1;clientRect.top+=info.top-state.top,clientRect.left+=info.left-state.left,target.style.transform="translate("+-delta[0]+"px, "+-delta[1]+"px) "+transform,this.updateState(moveable_esm_assign(moveable_esm_assign({},info),{direction:direction,beforeDirection:direction}),isSetState)}},__proto.getRect=function(){return moveable_esm_assign(moveable_esm_assign({},_super.prototype.getRect.call(this)),{children:this.moveables.map((function(child){return child.getRect()}))})},__proto.triggerEvent=function(name,e,isManager){if(isManager||name.indexOf("Group")>-1)return _super.prototype.triggerEvent.call(this,name,e)},__proto.updateAbles=function(){_super.prototype.updateAbles.call(this,moveable_esm_spreadArrays(this.props.ables,[Groupable]),"Group")},MoveableGroup.defaultProps=moveable_esm_assign(moveable_esm_assign({},moveable_esm_MoveableManager.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),MoveableGroup}(moveable_esm_MoveableManager),moveable_esm_MoveableIndividualGroup=function(_super){function MoveableIndividualGroup(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.moveables=[],_this}moveable_esm_extends(MoveableIndividualGroup,_super);var __proto=MoveableIndividualGroup.prototype;return __proto.render=function(){var _this=this,_a=this.props,cspNonce=_a.cspNonce,ControlBoxElement=_a.cssStyled,targets=_a.targets;return Object(react.createElement)(ControlBoxElement,{cspNonce:cspNonce,ref:ref(this,"controlBox"),className:prefix("control-box")},targets.map((function(target,i){return Object(react.createElement)(moveable_esm_MoveableManager,moveable_esm_assign({key:"moveable"+i,ref:refs(_this,"moveables",i)},_this.props,{target:target,wrapperMoveable:_this}))})))},__proto.componentDidUpdate=function(){},__proto.updateRect=function(type,isTarget,isSetState){void 0===isSetState&&(isSetState=!0),this.moveables.forEach((function(moveable){moveable.updateRect(type,isTarget,isSetState)}))},__proto.getRect=function(){return moveable_esm_assign(moveable_esm_assign({},_super.prototype.getRect.call(this)),{children:this.moveables.map((function(child){return child.getRect()}))})},__proto.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},__proto.dragStart=function(){return this},__proto.hitTest=function(){return 0},__proto.isInside=function(){return!1},__proto.isDragging=function(){return!1},__proto.updateRenderPoses=function(){},__proto.updateEvent=function(){},__proto.checkUpdate=function(){},__proto.triggerEvent=function(){},__proto.updateAbles=function(){},MoveableIndividualGroup}(moveable_esm_MoveableManager),moveable_esm_InitialMoveable=function(_super){function InitialMoveable(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.refTargets=[],_this.selectorMap={},_this}moveable_esm_extends(InitialMoveable,_super);var methods,duplicate,__proto=InitialMoveable.prototype;return InitialMoveable.makeStyled=function(){var cssMap={};this.getTotalAbles().forEach((function(_a){var css=_a.css;css&&css.forEach((function(text){cssMap[text]=!0}))}));var style=getKeys(cssMap).join("\n");this.defaultStyled=dist_styled_esm("div",function prefixCSS(prefix,css){return css.replace(/([^}{]*){/gm,(function(_,selector){return selector.replace(/\.([^{,\s\d.]+)/g,"."+prefix+"$1")+"{"}))}(PREFIX,MOVEABLE_CSS+style))},InitialMoveable.getTotalAbles=function(){return moveable_esm_spreadArrays([Default,Groupable,IndividualGroupable,DragArea],this.defaultAbles)},__proto.render=function(){var moveableContructor=this.constructor;moveableContructor.defaultStyled||moveableContructor.makeStyled();var _a=this.props,userAbles=_a.ables,userProps=_a.props,props=function moveable_esm_rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}(_a,["ables","props"]),refTargets=getRefTargets(props.target||props.targets),elementTargets=function getElementTargets(targets,selectorMap){var elementTargets=[];return targets.forEach((function(target){target&&(isString(target)?selectorMap[target]&&elementTargets.push.apply(elementTargets,selectorMap[target]):elementTargets.push(target))})),elementTargets}(refTargets,this.selectorMap);this.refTargets=refTargets;var isGroup=elementTargets.length>1,ables=moveable_esm_spreadArrays(moveableContructor.getTotalAbles(),userAbles||[]),nextProps=moveable_esm_assign(moveable_esm_assign(moveable_esm_assign({},props),userProps||{}),{ables:ables,cssStyled:moveableContructor.defaultStyled,customStyledMap:moveableContructor.customStyledMap});return isGroup?props.individualGroupable?Object(react.createElement)(moveable_esm_MoveableIndividualGroup,moveable_esm_assign({key:"individual-group",ref:ref(this,"moveable")},nextProps,{target:null,targets:elementTargets})):Object(react.createElement)(moveable_esm_MoveableGroup,moveable_esm_assign({key:"group",ref:ref(this,"moveable")},nextProps,{target:null,targets:elementTargets})):Object(react.createElement)(moveable_esm_MoveableManager,moveable_esm_assign({key:"single",ref:ref(this,"moveable")},nextProps,{target:elementTargets[0]}))},__proto.componentDidMount=function(){this.updateRefs()},__proto.componentDidUpdate=function(){this.updateRefs()},__proto.updateRefs=function(isReset){var refTargets=getRefTargets(this.props.target||this.props.targets),isUpdate=this.refTargets.some((function(target,i){var nextTarget=refTargets[i];return!(!target&&!nextTarget)&&target!==nextTarget})),selectorMap=isReset?{}:this.selectorMap,nextSelectorMap={};this.refTargets.forEach((function(target){isString(target)&&(selectorMap[target]?nextSelectorMap[target]=selectorMap[target]:(isUpdate=!0,nextSelectorMap[target]=[].slice.call(document.querySelectorAll(target))))})),this.selectorMap=nextSelectorMap,isUpdate&&this.forceUpdate()},__proto.getManager=function(){return this.moveable},InitialMoveable.defaultAbles=[],InitialMoveable.customStyledMap={},InitialMoveable.defaultStyled=null,function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([(methods=MOVEABLE_METHODS,void 0===duplicate&&(duplicate={}),function(prototype,propertyName){methods.forEach((function(name){var methodName=duplicate[name]||name;methodName in prototype||(prototype[methodName]=function(){for(var _a,args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var result=(_a=this[propertyName])[name].apply(_a,args);return result===this[propertyName]?this:result})}))})],InitialMoveable.prototype,"moveable",void 0),InitialMoveable}(react.PureComponent),Moveable=function(_super){function Moveable(){return null!==_super&&_super.apply(this,arguments)||this}return moveable_esm_extends(Moveable,_super),Moveable.defaultAbles=MOVEABLE_ABLES,Moveable}(moveable_esm_InitialMoveable);function makeMoveable(ables){var _a;return(_a=function(_super){function Moveable(){return null!==_super&&_super.apply(this,arguments)||this}return moveable_esm_extends(Moveable,_super),Moveable}(moveable_esm_InitialMoveable)).defaultAbles=ables,_a}__webpack_exports__.default=Moveable}}]);
//# sourceMappingURL=vendors~chunk-react-moveable.079fd501.iframe.bundle.js.map